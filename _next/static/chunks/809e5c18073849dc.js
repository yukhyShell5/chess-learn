(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59045,(__turbopack_context__,module,exports)=>{!function(e,t){module.exports=t()}(__turbopack_context__.e,()=>(()=>{var __webpack_modules__={"./node_modules/pegjs/lib/compiler/asts.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/arrays.js"),o=n("./node_modules/pegjs/lib/compiler/visitor.js"),u={findRule:function(e,t){return r.find(e.rules,function(e){return e.name===t})},indexOfRule:function(e,t){return r.indexOf(e.rules,function(e){return e.name===t})},alwaysConsumesOnSuccess:function(e,t){function n(){return!0}function i(){return!1}function a(e){return s(e.expression)}var s=o.build({rule:a,named:a,choice:function(e){return r.every(e.alternatives,s)},action:a,sequence:function(e){return r.some(e.elements,s)},labeled:a,text:a,simple_and:i,simple_not:i,optional:i,zero_or_more:i,one_or_more:a,group:a,semantic_and:i,semantic_not:i,rule_ref:function(t){return s(u.findRule(e,t.name))},literal:function(e){return""!==e.value},class:n,any:n});return s(t)}};e.exports=u},"./node_modules/pegjs/lib/compiler/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var arrays=__webpack_require__("./node_modules/pegjs/lib/utils/arrays.js"),objects=__webpack_require__("./node_modules/pegjs/lib/utils/objects.js"),compiler={visitor:__webpack_require__("./node_modules/pegjs/lib/compiler/visitor.js"),passes:{check:{reportUndefinedRules:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/report-undefined-rules.js"),reportDuplicateRules:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/report-duplicate-rules.js"),reportDuplicateLabels:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/report-duplicate-labels.js"),reportInfiniteRecursion:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/report-infinite-recursion.js"),reportInfiniteRepetition:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/report-infinite-repetition.js")},transform:{removeProxyRules:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/remove-proxy-rules.js")},generate:{generateBytecode:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/generate-bytecode.js"),generateJS:__webpack_require__("./node_modules/pegjs/lib/compiler/passes/generate-js.js")}},compile:function(ast,passes,options){var stage;for(stage in options=void 0!==options?options:{},options=objects.clone(options),objects.defaults(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",optimize:"speed",output:"parser",trace:!1}),passes)passes.hasOwnProperty(stage)&&arrays.each(passes[stage],function(e){e(ast,options)});switch(options.output){case"parser":return eval(ast.code);case"source":return ast.code}}};module.exports=compiler},"./node_modules/pegjs/lib/compiler/js.js":e=>{"use strict";function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}e.exports={stringEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})},regexpClassEscape:function(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\x0B").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x7F-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}}},"./node_modules/pegjs/lib/compiler/opcodes.js":e=>{"use strict";e.exports={PUSH:0,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29}},"./node_modules/pegjs/lib/compiler/passes/generate-bytecode.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/arrays.js"),o=n("./node_modules/pegjs/lib/utils/objects.js"),u=n("./node_modules/pegjs/lib/compiler/asts.js"),i=n("./node_modules/pegjs/lib/compiler/visitor.js"),a=n("./node_modules/pegjs/lib/compiler/opcodes.js"),s=n("./node_modules/pegjs/lib/compiler/js.js");e.exports=function(e){var t=[];function n(e){var n=r.indexOf(t,e);return -1===n?t.push(e)-1:n}function l(e,t){return n("function("+e.join(", ")+") {"+t+"}")}function c(){return Array.prototype.concat.apply([],arguments)}function d(e,t,n){return e.concat([t.length,n.length],t,n)}function f(e,t){return e.concat([t.length],t)}function h(e,t,n,u){var i=r.map(o.values(n),function(e){return u-e});return[a.CALL,e,t,i.length].concat(i)}function p(e,t,n){return c([a.PUSH_CURR_POS],[a.SILENT_FAILS_ON],m(e,{sp:n.sp+1,env:o.clone(n.env),action:null}),[a.SILENT_FAILS_OFF],d([t?a.IF_ERROR:a.IF_NOT_ERROR],c([a.POP],[t?a.POP:a.POP_CURR_POS],[a.PUSH_UNDEFINED]),c([a.POP],[t?a.POP_CURR_POS:a.POP],[a.PUSH_FAILED])))}function g(e,t,n){var r=l(o.keys(n.env),e);return c([a.UPDATE_SAVED_POS],h(r,0,n.env,n.sp),d([a.IF],c([a.POP],t?[a.PUSH_FAILED]:[a.PUSH_UNDEFINED]),c([a.POP],t?[a.PUSH_UNDEFINED]:[a.PUSH_FAILED])))}function v(e){return f([a.WHILE_NOT_ERROR],c([a.APPEND],e))}var m=i.build({grammar:function(e){r.each(e.rules,m),e.consts=t},rule:function(e){e.bytecode=m(e.expression,{sp:-1,env:{},action:null})},named:function(e,t){var r=n('peg$otherExpectation("'+s.stringEscape(e.name)+'")');return c([a.SILENT_FAILS_ON],m(e.expression,t),[a.SILENT_FAILS_OFF],d([a.IF_ERROR],[a.FAIL,r],[]))},choice:function(e,t){function n(e,t){return c(m(e[0],{sp:t.sp,env:o.clone(t.env),action:null}),e.length>1?d([a.IF_ERROR],c([a.POP],n(e.slice(1),t)),[]):[])}return n(e.alternatives,t)},action:function(e,t){var n=o.clone(t.env),r="sequence"!==e.expression.type||0===e.expression.elements.length,u=m(e.expression,{sp:t.sp+ +!!r,env:n,action:e}),i=l(o.keys(n),e.code);return r?c([a.PUSH_CURR_POS],u,d([a.IF_NOT_ERROR],c([a.LOAD_SAVED_POS,1],h(i,1,n,t.sp+2)),[]),[a.NIP]):u},sequence:function(e,t){function n(t,r){var u,i;return t.length>0?(u=e.elements.length-t.slice(1).length,c(m(t[0],{sp:r.sp,env:r.env,action:null}),d([a.IF_NOT_ERROR],n(t.slice(1),{sp:r.sp+1,env:r.env,action:r.action}),c(u>1?[a.POP_N,u]:[a.POP],[a.POP_CURR_POS],[a.PUSH_FAILED])))):r.action?(i=l(o.keys(r.env),r.action.code),c([a.LOAD_SAVED_POS,e.elements.length],h(i,e.elements.length,r.env,r.sp),[a.NIP])):c([a.WRAP,e.elements.length],[a.NIP])}return c([a.PUSH_CURR_POS],n(e.elements,{sp:t.sp+1,env:t.env,action:t.action}))},labeled:function(e,t){var n=o.clone(t.env);return t.env[e.label]=t.sp+1,m(e.expression,{sp:t.sp,env:n,action:null})},text:function(e,t){return c([a.PUSH_CURR_POS],m(e.expression,{sp:t.sp+1,env:o.clone(t.env),action:null}),d([a.IF_NOT_ERROR],c([a.POP],[a.TEXT]),[a.NIP]))},simple_and:function(e,t){return p(e.expression,!1,t)},simple_not:function(e,t){return p(e.expression,!0,t)},optional:function(e,t){return c(m(e.expression,{sp:t.sp,env:o.clone(t.env),action:null}),d([a.IF_ERROR],c([a.POP],[a.PUSH_NULL]),[]))},zero_or_more:function(e,t){var n=m(e.expression,{sp:t.sp+1,env:o.clone(t.env),action:null});return c([a.PUSH_EMPTY_ARRAY],n,v(n),[a.POP])},one_or_more:function(e,t){var n=m(e.expression,{sp:t.sp+1,env:o.clone(t.env),action:null});return c([a.PUSH_EMPTY_ARRAY],n,d([a.IF_NOT_ERROR],c(v(n),[a.POP]),c([a.POP],[a.POP],[a.PUSH_FAILED])))},group:function(e,t){return m(e.expression,{sp:t.sp,env:o.clone(t.env),action:null})},semantic_and:function(e,t){return g(e.code,!1,t)},semantic_not:function(e,t){return g(e.code,!0,t)},rule_ref:function(t){return[a.RULE,u.indexOfRule(e,t.name)]},literal:function(e){var t,r;return e.value.length>0?(t=n('"'+s.stringEscape(e.ignoreCase?e.value.toLowerCase():e.value)+'"'),r=n('peg$literalExpectation("'+s.stringEscape(e.value)+'", '+e.ignoreCase+")"),d(e.ignoreCase?[a.MATCH_STRING_IC,t]:[a.MATCH_STRING,t],e.ignoreCase?[a.ACCEPT_N,e.value.length]:[a.ACCEPT_STRING,t],[a.FAIL,r])):(t=n('""'),[a.PUSH,t])},class:function(e){var t,o,u,i;return t=e.parts.length>0?"/^["+(e.inverted?"^":"")+r.map(e.parts,function(e){return e instanceof Array?s.regexpClassEscape(e[0])+"-"+s.regexpClassEscape(e[1]):s.regexpClassEscape(e)}).join("")+"]/"+(e.ignoreCase?"i":""):e.inverted?"/^[\\S\\s]/":"/^(?!)/",o="["+r.map(e.parts,function(e){return e instanceof Array?'["'+s.stringEscape(e[0])+'", "'+s.stringEscape(e[1])+'"]':'"'+s.stringEscape(e)+'"'}).join(", ")+"]",u=n(t),i=n("peg$classExpectation("+o+", "+e.inverted+", "+e.ignoreCase+")"),d([a.MATCH_REGEXP,u],[a.ACCEPT_N,1],[a.FAIL,i])},any:function(){var e=n("peg$anyExpectation()");return d([a.MATCH_ANY],[a.ACCEPT_N,1],[a.FAIL,e])}});m(e)}},"./node_modules/pegjs/lib/compiler/passes/generate-js.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var arrays=__webpack_require__("./node_modules/pegjs/lib/utils/arrays.js"),objects=__webpack_require__("./node_modules/pegjs/lib/utils/objects.js"),asts=__webpack_require__("./node_modules/pegjs/lib/compiler/asts.js"),op=__webpack_require__("./node_modules/pegjs/lib/compiler/opcodes.js"),js=__webpack_require__("./node_modules/pegjs/lib/compiler/js.js");function generateJS(ast,options){function indent2(e){return e.replace(/^(.+)$/gm,"  $1")}function indent6(e){return e.replace(/^(.+)$/gm,"      $1")}function indent10(e){return e.replace(/^(.+)$/gm,"          $1")}function generateTables(){return"size"===options.optimize?["peg$consts = [",indent2(ast.consts.join(",\n")),"],\n\npeg$bytecode = [",indent2(arrays.map(ast.rules,function(e){return'peg$decode("'+js.stringEscape(arrays.map(e.bytecode,function(e){return String.fromCharCode(e+32)}).join(""))+'")'}).join(",\n")),"],"].join("\n"):arrays.map(ast.consts,function(e,t){return"peg$c"+t+" = "+e+","}).join("\n")}function generateRuleHeader(e,t){var n=[];return n.push(""),options.trace&&n.push(['peg$tracer.trace({\n  type:     "rule.enter",',"  rule:     "+e+",","  location: peg$computeLocation(startPos, startPos)\n});\n"].join("\n")),options.cache&&(n.push(["var key    = peg$currPos * "+ast.rules.length+" + "+t+",","    cached = peg$resultsCache[key];\n\nif (cached) {\n  peg$currPos = cached.nextPos;\n"].join("\n")),options.trace&&n.push(['if (cached.result !== peg$FAILED) {\n  peg$tracer.trace({\n    type:   "rule.match",',"    rule:   "+e+",",'    result: cached.result,\n    location: peg$computeLocation(startPos, peg$currPos)\n  });\n} else {\n  peg$tracer.trace({\n    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)\n  });\n}\n"].join("\n")),n.push("  return cached.result;\n}\n")),n.join("\n")}function generateRuleFooter(e,t){var n=[];return options.cache&&n.push(["","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+t+" };"].join("\n")),options.trace&&n.push(["","if ("+t+" !== peg$FAILED) {",'  peg$tracer.trace({\n    type:   "rule.match",',"    rule:   "+e+",","    result: "+t+",",'    location: peg$computeLocation(startPos, peg$currPos)\n  });\n} else {\n  peg$tracer.trace({\n    type: "rule.fail",',"    rule: "+e+",","    location: peg$computeLocation(startPos, startPos)\n  });\n}"].join("\n")),n.push(["","return "+t+";"].join("\n")),n.join("\n")}function generateInterpreter(){var e=[];function t(e,t){var n=t+3,r="bc[ip + "+(n-2)+"]",o="bc[ip + "+(n-1)+"]";return["ends.push(end);","ips.push(ip + "+n+" + "+r+" + "+o+");","","if ("+e+") {","  end = ip + "+n+" + "+r+";","  ip += "+n+";","} else {","  end = ip + "+n+" + "+r+" + "+o+";","  ip += "+n+" + "+r+";","}\n\nbreak;"].join("\n")}function n(e){var t="bc[ip + 1]";return["if ("+e+") {","  ends.push(end);\n  ips.push(ip);\n","  end = ip + 2 + "+t+";","  ip += 2;\n} else {","  ip += 2 + "+t+";","}\n\nbreak;"].join("\n")}function r(){var e="bc[ip + 3]";return["params = bc.slice(ip + 4, ip + 4 + "+e+");","for (i = 0; i < "+e+"; i++) {","  params[i] = stack[stack.length - 1 - params[i]];\n}\n\nstack.splice(\n  stack.length - bc[ip + 2],\n  bc[ip + 2],\n  peg$consts[bc[ip + 1]].apply(null, params)\n);\n","ip += 4 + "+e+";","break;"].join("\n")}return e.push("function peg$decode(s) {\n  var bc = new Array(s.length), i;\n\n  for (i = 0; i < s.length; i++) {\n    bc[i] = s.charCodeAt(i) - 32;\n  }\n\n  return bc;\n}\n\nfunction peg$parseRule(index) {"),options.trace?e.push("  var bc       = peg$bytecode[index],\n      ip       = 0,\n      ips      = [],\n      end      = bc.length,\n      ends     = [],\n      stack    = [],\n      startPos = peg$currPos,\n      params, i;"):e.push("  var bc    = peg$bytecode[index],\n      ip    = 0,\n      ips   = [],\n      end   = bc.length,\n      ends  = [],\n      stack = [],\n      params, i;"),e.push(indent2(generateRuleHeader("peg$ruleNames[index]","index"))),e.push(["  while (true) {\n    while (ip < end) {\n      switch (bc[ip]) {","        case "+op.PUSH+":","          stack.push(peg$consts[bc[ip + 1]]);\n          ip += 2;\n          break;\n","        case "+op.PUSH_UNDEFINED+":","          stack.push(void 0);\n          ip++;\n          break;\n","        case "+op.PUSH_NULL+":","          stack.push(null);\n          ip++;\n          break;\n","        case "+op.PUSH_FAILED+":","          stack.push(peg$FAILED);\n          ip++;\n          break;\n","        case "+op.PUSH_EMPTY_ARRAY+":","          stack.push([]);\n          ip++;\n          break;\n","        case "+op.PUSH_CURR_POS+":","          stack.push(peg$currPos);\n          ip++;\n          break;\n","        case "+op.POP+":","          stack.pop();\n          ip++;\n          break;\n","        case "+op.POP_CURR_POS+":","          peg$currPos = stack.pop();\n          ip++;\n          break;\n","        case "+op.POP_N+":","          stack.length -= bc[ip + 1];\n          ip += 2;\n          break;\n","        case "+op.NIP+":","          stack.splice(-2, 1);\n          ip++;\n          break;\n","        case "+op.APPEND+":","          stack[stack.length - 2].push(stack.pop());\n          ip++;\n          break;\n","        case "+op.WRAP+":","          stack.push(stack.splice(stack.length - bc[ip + 1], bc[ip + 1]));\n          ip += 2;\n          break;\n","        case "+op.TEXT+":","          stack.push(input.substring(stack.pop(), peg$currPos));\n          ip++;\n          break;\n","        case "+op.IF+":",indent10(t("stack[stack.length - 1]",0)),"","        case "+op.IF_ERROR+":",indent10(t("stack[stack.length - 1] === peg$FAILED",0)),"","        case "+op.IF_NOT_ERROR+":",indent10(t("stack[stack.length - 1] !== peg$FAILED",0)),"","        case "+op.WHILE_NOT_ERROR+":",indent10(n("stack[stack.length - 1] !== peg$FAILED")),"","        case "+op.MATCH_ANY+":",indent10(t("input.length > peg$currPos",0)),"","        case "+op.MATCH_STRING+":",indent10(t("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length) === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_STRING_IC+":",indent10(t("input.substr(peg$currPos, peg$consts[bc[ip + 1]].length).toLowerCase() === peg$consts[bc[ip + 1]]",1)),"","        case "+op.MATCH_REGEXP+":",indent10(t("peg$consts[bc[ip + 1]].test(input.charAt(peg$currPos))",1)),"","        case "+op.ACCEPT_N+":","          stack.push(input.substr(peg$currPos, bc[ip + 1]));\n          peg$currPos += bc[ip + 1];\n          ip += 2;\n          break;\n","        case "+op.ACCEPT_STRING+":","          stack.push(peg$consts[bc[ip + 1]]);\n          peg$currPos += peg$consts[bc[ip + 1]].length;\n          ip += 2;\n          break;\n","        case "+op.FAIL+":","          stack.push(peg$FAILED);\n          if (peg$silentFails === 0) {\n            peg$fail(peg$consts[bc[ip + 1]]);\n          }\n          ip += 2;\n          break;\n","        case "+op.LOAD_SAVED_POS+":","          peg$savedPos = stack[stack.length - 1 - bc[ip + 1]];\n          ip += 2;\n          break;\n","        case "+op.UPDATE_SAVED_POS+":","          peg$savedPos = peg$currPos;\n          ip++;\n          break;\n","        case "+op.CALL+":",indent10(r()),"","        case "+op.RULE+":","          stack.push(peg$parseRule(bc[ip + 1]));\n          ip += 2;\n          break;\n","        case "+op.SILENT_FAILS_ON+":","          peg$silentFails++;\n          ip++;\n          break;\n","        case "+op.SILENT_FAILS_OFF+":",'          peg$silentFails--;\n          ip++;\n          break;\n\n        default:\n          throw new Error("Invalid opcode: " + bc[ip] + ".");\n      }\n    }\n\n    if (ends.length > 0) {\n      end = ends.pop();\n      ip = ips.pop();\n    } else {\n      break;\n    }\n  }'].join("\n")),e.push(indent2(generateRuleFooter("peg$ruleNames[index]","stack[0]"))),e.push("}"),e.join("\n")}function generateRuleFunction(rule){var code,parts=[];function c(e){return"peg$c"+e}function s(e){return"s"+e}var stack={sp:-1,maxSp:-1,push:function(e){var t=s(++this.sp)+" = "+e+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),t},pop:function(e){var t;return void 0===e?s(this.sp--):(t=arrays.map(arrays.range(this.sp-e+1,this.sp+1),s),this.sp-=e,t)},top:function(){return s(this.sp)},index:function(e){return s(this.sp-e)}};function compile(bc){var value,ip=0,end=bc.length,parts=[];function compileCondition(e,t){var n,r,o,u,i=t+3,a=bc[ip+i-2],s=bc[ip+i-1],l=stack.sp;if(ip+=i,n=compile(bc.slice(ip,ip+a)),o=stack.sp,ip+=a,s>0&&(stack.sp=l,r=compile(bc.slice(ip,ip+s)),u=stack.sp,ip+=s,o!==u))throw Error("Branches of a condition must move the stack pointer in the same way.");parts.push("if ("+e+") {"),parts.push(indent2(n)),s>0&&(parts.push("} else {"),parts.push(indent2(r))),parts.push("}")}function compileLoop(e){var t,n,r=2,o=bc[ip+2-1],u=stack.sp;if(ip+=r,t=compile(bc.slice(ip,ip+o)),n=stack.sp,ip+=o,n!==u)throw Error("Body of a loop can't move the stack pointer.");parts.push("while ("+e+") {"),parts.push(indent2(t)),parts.push("}")}function compileCall(){var e=4,t=bc[ip+4-1],n=c(bc[ip+1])+"("+arrays.map(bc.slice(ip+e,ip+e+t),function(e){return stack.index(e)}).join(", ")+")";stack.pop(bc[ip+2]),parts.push(stack.push(n)),ip+=e+t}for(;ip<end;)switch(bc[ip]){case op.PUSH:parts.push(stack.push(c(bc[ip+1]))),ip+=2;break;case op.PUSH_CURR_POS:parts.push(stack.push("peg$currPos")),ip++;break;case op.PUSH_UNDEFINED:parts.push(stack.push("void 0")),ip++;break;case op.PUSH_NULL:parts.push(stack.push("null")),ip++;break;case op.PUSH_FAILED:parts.push(stack.push("peg$FAILED")),ip++;break;case op.PUSH_EMPTY_ARRAY:parts.push(stack.push("[]")),ip++;break;case op.POP:stack.pop(),ip++;break;case op.POP_CURR_POS:parts.push("peg$currPos = "+stack.pop()+";"),ip++;break;case op.POP_N:stack.pop(bc[ip+1]),ip+=2;break;case op.NIP:value=stack.pop(),stack.pop(),parts.push(stack.push(value)),ip++;break;case op.APPEND:value=stack.pop(),parts.push(stack.top()+".push("+value+");"),ip++;break;case op.WRAP:parts.push(stack.push("["+stack.pop(bc[ip+1]).join(", ")+"]")),ip+=2;break;case op.TEXT:parts.push(stack.push("input.substring("+stack.pop()+", peg$currPos)")),ip++;break;case op.IF:compileCondition(stack.top(),0);break;case op.IF_ERROR:compileCondition(stack.top()+" === peg$FAILED",0);break;case op.IF_NOT_ERROR:compileCondition(stack.top()+" !== peg$FAILED",0);break;case op.WHILE_NOT_ERROR:compileLoop(stack.top()+" !== peg$FAILED",0);break;case op.MATCH_ANY:compileCondition("input.length > peg$currPos",0);break;case op.MATCH_STRING:compileCondition(eval(ast.consts[bc[ip+1]]).length>1?"input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+") === "+c(bc[ip+1]):"input.charCodeAt(peg$currPos) === "+eval(ast.consts[bc[ip+1]]).charCodeAt(0),1);break;case op.MATCH_STRING_IC:compileCondition("input.substr(peg$currPos, "+eval(ast.consts[bc[ip+1]]).length+").toLowerCase() === "+c(bc[ip+1]),1);break;case op.MATCH_REGEXP:compileCondition(c(bc[ip+1])+".test(input.charAt(peg$currPos))",1);break;case op.ACCEPT_N:parts.push(stack.push(bc[ip+1]>1?"input.substr(peg$currPos, "+bc[ip+1]+")":"input.charAt(peg$currPos)")),parts.push(bc[ip+1]>1?"peg$currPos += "+bc[ip+1]+";":"peg$currPos++;"),ip+=2;break;case op.ACCEPT_STRING:parts.push(stack.push(c(bc[ip+1]))),parts.push(eval(ast.consts[bc[ip+1]]).length>1?"peg$currPos += "+eval(ast.consts[bc[ip+1]]).length+";":"peg$currPos++;"),ip+=2;break;case op.FAIL:parts.push(stack.push("peg$FAILED")),parts.push("if (peg$silentFails === 0) { peg$fail("+c(bc[ip+1])+"); }"),ip+=2;break;case op.LOAD_SAVED_POS:parts.push("peg$savedPos = "+stack.index(bc[ip+1])+";"),ip+=2;break;case op.UPDATE_SAVED_POS:parts.push("peg$savedPos = peg$currPos;"),ip++;break;case op.CALL:compileCall();break;case op.RULE:parts.push(stack.push("peg$parse"+ast.rules[bc[ip+1]].name+"()")),ip+=2;break;case op.SILENT_FAILS_ON:parts.push("peg$silentFails++;"),ip++;break;case op.SILENT_FAILS_OFF:parts.push("peg$silentFails--;"),ip++;break;default:throw Error("Invalid opcode: "+bc[ip]+".")}return parts.join("\n")}return code=compile(rule.bytecode),parts.push("function peg$parse"+rule.name+"() {"),options.trace?parts.push(["  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+",","      startPos = peg$currPos;"].join("\n")):parts.push("  var "+arrays.map(arrays.range(0,stack.maxSp+1),s).join(", ")+";"),parts.push(indent2(generateRuleHeader('"'+js.stringEscape(rule.name)+'"',asts.indexOfRule(ast,rule.name)))),parts.push(indent2(code)),parts.push(indent2(generateRuleFooter('"'+js.stringEscape(rule.name)+'"',s(0)))),parts.push("}"),parts.join("\n")}function generateToplevel(){var e,t,n,r,o,u=[];return u.push('function peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = "SyntaxError";\n\n  if (typeof Error.captureStackTrace === "function") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return "\\"" + literalEscape(expectation.text) + "\\"";\n        },\n\n        "class": function(expectation) {\n          var escapedParts = "",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + "-" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return "[" + (expectation.inverted ? "^" : "") + escapedParts + "]";\n        },\n\n        any: function(expectation) {\n          return "any character";\n        },\n\n        end: function(expectation) {\n          return "end of input";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, \'\\\\\\\\\')\n      .replace(/"/g,  \'\\\\"\')\n      .replace(/\\0/g, \'\\\\0\')\n      .replace(/\\t/g, \'\\\\t\')\n      .replace(/\\n/g, \'\\\\n\')\n      .replace(/\\r/g, \'\\\\r\')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \'\\\\x0\' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \'\\\\x\'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, \'\\\\\\\\\')\n      .replace(/\\]/g, \'\\\\]\')\n      .replace(/\\^/g, \'\\\\^\')\n      .replace(/-/g,  \'\\\\-\')\n      .replace(/\\0/g, \'\\\\0\')\n      .replace(/\\t/g, \'\\\\t\')\n      .replace(/\\n/g, \'\\\\n\')\n      .replace(/\\r/g, \'\\\\r\')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return \'\\\\x0\' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return \'\\\\x\'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + " or " + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(", ")\n          + ", or "\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";\n  }\n\n  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";\n};\n'),options.trace&&u.push('function peg$DefaultTracer() {\n  this.indentLevel = 0;\n}\n\npeg$DefaultTracer.prototype.trace = function(event) {\n  var that = this;\n\n  function log(event) {\n    function repeat(string, n) {\n       var result = "", i;\n\n       for (i = 0; i < n; i++) {\n         result += string;\n       }\n\n       return result;\n    }\n\n    function pad(string, length) {\n      return string + repeat(" ", length - string.length);\n    }\n\n    if (typeof console === "object") {\n      console.log(\n        event.location.start.line + ":" + event.location.start.column + "-"\n          + event.location.end.line + ":" + event.location.end.column + " "\n          + pad(event.type, 10) + " "\n          + repeat("  ", that.indentLevel) + event.rule\n      );\n    }\n  }\n\n  switch (event.type) {\n    case "rule.enter":\n      log(event);\n      this.indentLevel++;\n      break;\n\n    case "rule.match":\n      this.indentLevel--;\n      log(event);\n      break;\n\n    case "rule.fail":\n      this.indentLevel--;\n      log(event);\n      break;\n\n    default:\n      throw new Error("Invalid event type: " + event.type + ".");\n  }\n};\n'),u.push("function peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n"),"size"===options.optimize?(e="{ "+arrays.map(options.allowedStartRules,function(e){return e+": "+asts.indexOfRule(ast,e)}).join(", ")+" }",t=asts.indexOfRule(ast,options.allowedStartRules[0]),u.push(["      peg$startRuleIndices = "+e+",","      peg$startRuleIndex   = "+t+","].join("\n"))):(n="{ "+arrays.map(options.allowedStartRules,function(e){return e+": peg$parse"+e}).join(", ")+" }",r="peg$parse"+options.allowedStartRules[0],u.push(["      peg$startRuleFunctions = "+n+",","      peg$startRuleFunction  = "+r+","].join("\n"))),u.push(""),u.push(indent6(generateTables())),u.push("\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n"),options.cache&&u.push("      peg$resultsCache = {},\n"),options.trace&&("size"===options.optimize&&(o="["+arrays.map(ast.rules,function(e){return'"'+js.stringEscape(e.name)+'"'}).join(", ")+"]",u.push(["      peg$ruleNames = "+o+",",""].join("\n"))),u.push('      peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer(),\n')),u.push("      peg$result;\n"),"size"===options.optimize?u.push('  if ("startRule" in options) {\n    if (!(options.startRule in peg$startRuleIndices)) {\n      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");\n    }\n\n    peg$startRuleIndex = peg$startRuleIndices[options.startRule];\n  }'):u.push('  if ("startRule" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error("Can\'t start parsing from rule \\"" + options.startRule + "\\".");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }'),u.push('\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: "literal", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: "any" };\n  }\n\n  function peg$endExpectation() {\n    return { type: "end" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: "other", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n'),"size"===options.optimize?(u.push(indent2(generateInterpreter())),u.push("")):arrays.each(ast.rules,function(e){u.push(indent2(generateRuleFunction(e))),u.push("")}),ast.initializer&&(u.push(indent2(ast.initializer.code)),u.push("")),"size"===options.optimize?u.push("  peg$result = peg$parseRule(peg$startRuleIndex);"):u.push("  peg$result = peg$startRuleFunction();"),u.push("\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}"),u.join("\n")}function generateWrapper(e){function t(){return"/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */"}function n(){return options.trace?"{\n  SyntaxError:   peg$SyntaxError,\n  DefaultTracer: peg$DefaultTracer,\n  parse:         peg$parse\n}":"{\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n}"}return({bare:function(){return[t(),'(function() {\n  "use strict";\n',indent2(e),"",indent2("return "+n()+";"),"})()"].join("\n")},commonjs:function(){var r=[],o=objects.keys(options.dependencies),u=arrays.map(o,function(e){return e+' = require("'+js.stringEscape(options.dependencies[e])+'")'});return r.push([t(),'\n"use strict";\n'].join("\n")),u.length>0&&(r.push("var "+u.join(", ")+";"),r.push("")),r.push([e,"","module.exports = "+n()+";",""].join("\n")),r.join("\n")},amd:function(){var r=objects.values(options.dependencies),o=objects.keys(options.dependencies),u="["+arrays.map(r,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",i=o.join(", ");return[t(),"define("+u+", function("+i+") {",'  "use strict";\n',indent2(e),"",indent2("return "+n()+";"),"});\n"].join("\n")},globals:function(){return[t(),'(function(root) {\n  "use strict";\n',indent2(e),"",indent2("root."+options.exportVar+" = "+n()+";"),"})(this);\n"].join("\n")},umd:function(){var r=[],o=objects.values(options.dependencies),u=objects.keys(options.dependencies),i="["+arrays.map(o,function(e){return'"'+js.stringEscape(e)+'"'}).join(", ")+"]",a=arrays.map(o,function(e){return'require("'+js.stringEscape(e)+'")'}).join(", "),s=u.join(", ");return r.push([t(),'(function(root, factory) {\n  if (typeof define === "function" && define.amd) {',"    define("+i+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+a+");"].join("\n")),null!==options.exportVar&&r.push(["  } else {","    root."+options.exportVar+" = factory();"].join("\n")),r.push(["  }","})(this, function("+s+") {",'  "use strict";\n',indent2(e),"",indent2("return "+n()+";"),"});\n"].join("\n")),r.join("\n")}})[options.format]()}ast.code=generateWrapper(generateToplevel())}module.exports=generateJS},"./node_modules/pegjs/lib/compiler/passes/remove-proxy-rules.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/arrays.js"),o=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e,t){function n(e){return"rule"===e.type&&"rule_ref"===e.expression.type}function u(e,t,n){o.build({rule_ref:function(e){e.name===t&&(e.name=n)}})(e)}var i=[];r.each(e.rules,function(o,a){n(o)&&(u(e,o.name,o.expression.name),r.contains(t.allowedStartRules,o.name)||i.push(a))}),i.reverse(),r.each(i,function(t){e.rules.splice(t,1)})}},"./node_modules/pegjs/lib/compiler/passes/report-duplicate-labels.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/grammar-error.js"),o=n("./node_modules/pegjs/lib/utils/arrays.js"),u=n("./node_modules/pegjs/lib/utils/objects.js"),i=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e){function t(e,t){n(e.expression,u.clone(t))}var n=i.build({rule:function(e){n(e.expression,{})},choice:function(e,t){o.each(e.alternatives,function(e){n(e,u.clone(t))})},action:t,labeled:function(e,t){if(t.hasOwnProperty(e.label))throw new r('Label "'+e.label+'" is already defined at line '+t[e.label].start.line+", column "+t[e.label].start.column+".",e.location);n(e.expression,t),t[e.label]=e.location},text:t,simple_and:t,simple_not:t,optional:t,zero_or_more:t,one_or_more:t,group:t});n(e)}},"./node_modules/pegjs/lib/compiler/passes/report-duplicate-rules.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/grammar-error.js"),o=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e){var t={};o.build({rule:function(e){if(t.hasOwnProperty(e.name))throw new r('Rule "'+e.name+'" is already defined at line '+t[e.name].start.line+", column "+t[e.name].start.column+".",e.location);t[e.name]=e.location}})(e)}},"./node_modules/pegjs/lib/compiler/passes/report-infinite-recursion.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/arrays.js"),o=n("./node_modules/pegjs/lib/grammar-error.js"),u=n("./node_modules/pegjs/lib/compiler/asts.js"),i=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e){var t=[],n=i.build({rule:function(e){t.push(e.name),n(e.expression),t.pop(e.name)},sequence:function(t){r.every(t.elements,function(t){return n(t),!u.alwaysConsumesOnSuccess(e,t)})},rule_ref:function(i){if(r.contains(t,i.name))throw t.push(i.name),new o("Possible infinite loop when parsing (left recursion: "+t.join(" -> ")+").",i.location);n(u.findRule(e,i.name))}});n(e)}},"./node_modules/pegjs/lib/compiler/passes/report-infinite-repetition.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/grammar-error.js"),o=n("./node_modules/pegjs/lib/compiler/asts.js"),u=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e){u.build({zero_or_more:function(t){if(!o.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)},one_or_more:function(t){if(!o.alwaysConsumesOnSuccess(e,t.expression))throw new r("Possible infinite loop when parsing (repetition used with an expression that may not consume any input).",t.location)}})(e)}},"./node_modules/pegjs/lib/compiler/passes/report-undefined-rules.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/grammar-error.js"),o=n("./node_modules/pegjs/lib/compiler/asts.js"),u=n("./node_modules/pegjs/lib/compiler/visitor.js");e.exports=function(e){u.build({rule_ref:function(t){if(!o.findRule(e,t.name))throw new r('Rule "'+t.name+'" is not defined.',t.location)}})(e)}},"./node_modules/pegjs/lib/compiler/visitor.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/objects.js"),o=n("./node_modules/pegjs/lib/utils/arrays.js");e.exports={build:function(e){function t(t){return e[t.type].apply(null,arguments)}function n(){}function u(e){var n=Array.prototype.slice.call(arguments,1);t.apply(null,[e.expression].concat(n))}function i(e){return function(n){var r=Array.prototype.slice.call(arguments,1);o.each(n[e],function(e){t.apply(null,[e].concat(r))})}}var a={grammar:function(e){var n=Array.prototype.slice.call(arguments,1);e.initializer&&t.apply(null,[e.initializer].concat(n)),o.each(e.rules,function(e){t.apply(null,[e].concat(n))})},initializer:n,rule:u,named:u,choice:i("alternatives"),action:u,sequence:i("elements"),labeled:u,text:u,simple_and:u,simple_not:u,optional:u,zero_or_more:u,one_or_more:u,group:u,semantic_and:n,semantic_not:n,rule_ref:n,literal:n,class:n,any:n};return r.defaults(e,a),t}}},"./node_modules/pegjs/lib/grammar-error.js":(e,t,n)=>{"use strict";function r(e,t){this.name="GrammarError",this.message=e,this.location=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}n("./node_modules/pegjs/lib/utils/classes.js").subclass(r,Error),e.exports=r},"./node_modules/pegjs/lib/parser.js":e=>{"use strict";function t(e,n,r,o){this.message=e,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function n(e,n){n=void 0!==n?n:{};var r,o={},u={Grammar:rE},i=rE,a=function(e,t){return{type:"grammar",initializer:ue(e,0),rules:ut(t,0),location:rs()}},s=function(e){return{type:"initializer",code:e,location:rs()}},l="=",c=rc("=",!1),d=function(e,t,n){return{type:"rule",name:e,expression:null!==t?{type:"named",name:t[0],expression:n,location:rs()}:n,location:rs()}},f="/",h=rc("/",!1),p=function(e,t){return t.length>0?{type:"choice",alternatives:un(e,t,3),location:rs()}:e},g=function(e,t){return null!==t?{type:"action",expression:e,code:t[1],location:rs()}:e},v=function(e,t){return t.length>0?{type:"sequence",elements:un(e,t,1),location:rs()}:e},m=":",y=rc(":",!1),b=function(e,t){return{type:"labeled",label:e,expression:t,location:rs()}},E=function(e,t){return{type:o4[e],expression:t,location:rs()}},_="$",A=rc("$",!1),x="&",C=rc("&",!1),w="!",S=rc("!",!1),k=function(e,t){return{type:o7[t],expression:e,location:rs()}},F="?",D=rc("?",!1),B="*",P=rc("*",!1),j="+",N=rc("+",!1),M="(",O=rc("(",!1),$=")",R=rc(")",!1),I=function(e){return"labeled"===e.type||"sequence"===e.type?{type:"group",expression:e}:e},L=function(e){return{type:"rule_ref",name:e,location:rs()}},T=function(e,t){return{type:o8[e],code:t,location:rs()}},z=rf(),U=rp("whitespace"),H="	",q=rc("	",!1),K="\v",V=rc("\v",!1),W="\f",G=rc("\f",!1),X=" ",Y=rc(" ",!1),Z=" ",Q=rc(" ",!1),J="\uFEFF",ee=rc("\uFEFF",!1),et=/^[\n\r\u2028\u2029]/,en=rd(["\n","\r","\u2028","\u2029"],!1,!1),er=rp("end of line"),eo="\n",eu=rc("\n",!1),ei="\r\n",ea=rc("\r\n",!1),es="\r",el=rc("\r",!1),ec="\u2028",ed=rc("\u2028",!1),ef="\u2029",eh=rc("\u2029",!1),ep=rp("comment"),eg="/*",ev=rc("/*",!1),em="*/",ey=rc("*/",!1),eb="//",eE=rc("//",!1),e_=function(e){return e},eA=rp("identifier"),ex=function(e,t){return e+t.join("")},eC="_",ew=rc("_",!1),eS="\\",ek=rc("\\",!1),eF=function(e){return e},eD="‌",eB=rc("‌",!1),eP="‍",ej=rc("‍",!1),eN=rp("literal"),eM="i",eO=rc("i",!1),e$=function(e,t){return{type:"literal",value:e,ignoreCase:null!==t,location:rs()}},eR=rp("string"),eI='"',eL=rc('"',!1),eT=function(e){return e.join("")},ez="'",eU=rc("'",!1),eH=function(){return ra()},eq=rp("character class"),eK="[",eV=rc("[",!1),eW="^",eG=rc("^",!1),eX="]",eY=rc("]",!1),eZ=function(e,t,n){return{type:"class",parts:o9(t),inverted:null!==e,ignoreCase:null!==n,location:rs()}},eQ="-",eJ=rc("-",!1),e0=function(e,t){return e.charCodeAt(0)>t.charCodeAt(0)&&rl("Invalid character range: "+ra()+"."),[e,t]},e1=function(){return""},e2="0",e6=rc("0",!1),e3=function(){return"\0"},e5="b",e4=rc("b",!1),e7=function(){return"\b"},e8="f",e9=rc("f",!1),te=function(){return"\f"},tt="n",tn=rc("n",!1),tr=function(){return"\n"},to="r",tu=rc("r",!1),ti=function(){return"\r"},ta="t",ts=rc("t",!1),tl=function(){return"	"},tc="v",td=rc("v",!1),tf=function(){return"\v"},th="x",tp=rc("x",!1),tg="u",tv=rc("u",!1),tm=function(e){return String.fromCharCode(parseInt(e,16))},ty=/^[0-9]/,tb=rd([["0","9"]],!1,!1),tE=/^[0-9a-f]/i,t_=rd([["0","9"],["a","f"]],!1,!0),tA=".",tx=rc(".",!1),tC=function(){return{type:"any",location:rs()}},tw=rp("code block"),tS="{",tk=rc("{",!1),tF="}",tD=rc("}",!1),tB=function(e){return e},tP=/^[{}]/,tj=rd(["{","}"],!1,!1),tN=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,tM=rd([["a","z"],"µ",["ß","ö"],["ø","ÿ"],"ā","ă","ą","ć","ĉ","ċ","č","ď","đ","ē","ĕ","ė","ę","ě","ĝ","ğ","ġ","ģ","ĥ","ħ","ĩ","ī","ĭ","į","ı","ĳ","ĵ",["ķ","ĸ"],"ĺ","ļ","ľ","ŀ","ł","ń","ņ",["ň","ŉ"],"ŋ","ō","ŏ","ő","œ","ŕ","ŗ","ř","ś","ŝ","ş","š","ţ","ť","ŧ","ũ","ū","ŭ","ů","ű","ų","ŵ","ŷ","ź","ż",["ž","ƀ"],"ƃ","ƅ","ƈ",["ƌ","ƍ"],"ƒ","ƕ",["ƙ","ƛ"],"ƞ","ơ","ƣ","ƥ","ƨ",["ƪ","ƫ"],"ƭ","ư","ƴ","ƶ",["ƹ","ƺ"],["ƽ","ƿ"],"ǆ","ǉ","ǌ","ǎ","ǐ","ǒ","ǔ","ǖ","ǘ","ǚ",["ǜ","ǝ"],"ǟ","ǡ","ǣ","ǥ","ǧ","ǩ","ǫ","ǭ",["ǯ","ǰ"],"ǳ","ǵ","ǹ","ǻ","ǽ","ǿ","ȁ","ȃ","ȅ","ȇ","ȉ","ȋ","ȍ","ȏ","ȑ","ȓ","ȕ","ȗ","ș","ț","ȝ","ȟ","ȡ","ȣ","ȥ","ȧ","ȩ","ȫ","ȭ","ȯ","ȱ",["ȳ","ȹ"],"ȼ",["ȿ","ɀ"],"ɂ","ɇ","ɉ","ɋ","ɍ",["ɏ","ʓ"],["ʕ","ʯ"],"ͱ","ͳ","ͷ",["ͻ","ͽ"],"ΐ",["ά","ώ"],["ϐ","ϑ"],["ϕ","ϗ"],"ϙ","ϛ","ϝ","ϟ","ϡ","ϣ","ϥ","ϧ","ϩ","ϫ","ϭ",["ϯ","ϳ"],"ϵ","ϸ",["ϻ","ϼ"],["а","џ"],"ѡ","ѣ","ѥ","ѧ","ѩ","ѫ","ѭ","ѯ","ѱ","ѳ","ѵ","ѷ","ѹ","ѻ","ѽ","ѿ","ҁ","ҋ","ҍ","ҏ","ґ","ғ","ҕ","җ","ҙ","қ","ҝ","ҟ","ҡ","ң","ҥ","ҧ","ҩ","ҫ","ҭ","ү","ұ","ҳ","ҵ","ҷ","ҹ","һ","ҽ","ҿ","ӂ","ӄ","ӆ","ӈ","ӊ","ӌ",["ӎ","ӏ"],"ӑ","ӓ","ӕ","ӗ","ә","ӛ","ӝ","ӟ","ӡ","ӣ","ӥ","ӧ","ө","ӫ","ӭ","ӯ","ӱ","ӳ","ӵ","ӷ","ӹ","ӻ","ӽ","ӿ","ԁ","ԃ","ԅ","ԇ","ԉ","ԋ","ԍ","ԏ","ԑ","ԓ","ԕ","ԗ","ԙ","ԛ","ԝ","ԟ","ԡ","ԣ","ԥ","ԧ","ԩ","ԫ","ԭ","ԯ",["ա","և"],["ᏸ","ᏽ"],["ᴀ","ᴫ"],["ᵫ","ᵷ"],["ᵹ","ᶚ"],"ḁ","ḃ","ḅ","ḇ","ḉ","ḋ","ḍ","ḏ","ḑ","ḓ","ḕ","ḗ","ḙ","ḛ","ḝ","ḟ","ḡ","ḣ","ḥ","ḧ","ḩ","ḫ","ḭ","ḯ","ḱ","ḳ","ḵ","ḷ","ḹ","ḻ","ḽ","ḿ","ṁ","ṃ","ṅ","ṇ","ṉ","ṋ","ṍ","ṏ","ṑ","ṓ","ṕ","ṗ","ṙ","ṛ","ṝ","ṟ","ṡ","ṣ","ṥ","ṧ","ṩ","ṫ","ṭ","ṯ","ṱ","ṳ","ṵ","ṷ","ṹ","ṻ","ṽ","ṿ","ẁ","ẃ","ẅ","ẇ","ẉ","ẋ","ẍ","ẏ","ẑ","ẓ",["ẕ","ẝ"],"ẟ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ỉ","ị","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ụ","ủ","ứ","ừ","ử","ữ","ự","ỳ","ỵ","ỷ","ỹ","ỻ","ỽ",["ỿ","ἇ"],["ἐ","ἕ"],["ἠ","ἧ"],["ἰ","ἷ"],["ὀ","ὅ"],["ὐ","ὗ"],["ὠ","ὧ"],["ὰ","ώ"],["ᾀ","ᾇ"],["ᾐ","ᾗ"],["ᾠ","ᾧ"],["ᾰ","ᾴ"],["ᾶ","ᾷ"],"ι",["ῂ","ῄ"],["ῆ","ῇ"],["ῐ","ΐ"],["ῖ","ῗ"],["ῠ","ῧ"],["ῲ","ῴ"],["ῶ","ῷ"],"ℊ",["ℎ","ℏ"],"ℓ","ℯ","ℴ","ℹ",["ℼ","ℽ"],["ⅆ","ⅉ"],"ⅎ","ↄ",["ⰰ","ⱞ"],"ⱡ",["ⱥ","ⱦ"],"ⱨ","ⱪ","ⱬ","ⱱ",["ⱳ","ⱴ"],["ⱶ","ⱻ"],"ⲁ","ⲃ","ⲅ","ⲇ","ⲉ","ⲋ","ⲍ","ⲏ","ⲑ","ⲓ","ⲕ","ⲗ","ⲙ","ⲛ","ⲝ","ⲟ","ⲡ","ⲣ","ⲥ","ⲧ","ⲩ","ⲫ","ⲭ","ⲯ","ⲱ","ⲳ","ⲵ","ⲷ","ⲹ","ⲻ","ⲽ","ⲿ","ⳁ","ⳃ","ⳅ","ⳇ","ⳉ","ⳋ","ⳍ","ⳏ","ⳑ","ⳓ","ⳕ","ⳗ","ⳙ","ⳛ","ⳝ","ⳟ","ⳡ",["ⳣ","ⳤ"],"ⳬ","ⳮ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ","ꙁ","ꙃ","ꙅ","ꙇ","ꙉ","ꙋ","ꙍ","ꙏ","ꙑ","ꙓ","ꙕ","ꙗ","ꙙ","ꙛ","ꙝ","ꙟ","ꙡ","ꙣ","ꙥ","ꙧ","ꙩ","ꙫ","ꙭ","ꚁ","ꚃ","ꚅ","ꚇ","ꚉ","ꚋ","ꚍ","ꚏ","ꚑ","ꚓ","ꚕ","ꚗ","ꚙ","ꚛ","ꜣ","ꜥ","ꜧ","ꜩ","ꜫ","ꜭ",["ꜯ","ꜱ"],"ꜳ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ꜿ","ꝁ","ꝃ","ꝅ","ꝇ","ꝉ","ꝋ","ꝍ","ꝏ","ꝑ","ꝓ","ꝕ","ꝗ","ꝙ","ꝛ","ꝝ","ꝟ","ꝡ","ꝣ","ꝥ","ꝧ","ꝩ","ꝫ","ꝭ","ꝯ",["ꝱ","ꝸ"],"ꝺ","ꝼ","ꝿ","ꞁ","ꞃ","ꞅ","ꞇ","ꞌ","ꞎ","ꞑ",["ꞓ","ꞕ"],"ꞗ","ꞙ","ꞛ","ꞝ","ꞟ","ꞡ","ꞣ","ꞥ","ꞧ","ꞩ","ꞵ","ꞷ","ꟺ",["ꬰ","ꭚ"],["ꭠ","ꭥ"],["ꭰ","ꮿ"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],["ａ","ｚ"]],!1,!1),tO=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,t$=rd([["ʰ","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ","ʹ","ͺ","ՙ","ـ",["ۥ","ۦ"],["ߴ","ߵ"],"ߺ","ࠚ","ࠤ","ࠨ","ॱ","ๆ","ໆ","ჼ","ៗ","ᡃ","ᪧ",["ᱸ","ᱽ"],["ᴬ","ᵪ"],"ᵸ",["ᶛ","ᶿ"],"ⁱ","ⁿ",["ₐ","ₜ"],["ⱼ","ⱽ"],"ⵯ","ⸯ","々",["〱","〵"],"〻",["ゝ","ゞ"],["ー","ヾ"],"ꀕ",["ꓸ","ꓽ"],"ꘌ","ꙿ",["ꚜ","ꚝ"],["ꜗ","ꜟ"],"ꝰ","ꞈ",["ꟸ","ꟹ"],"ꧏ","ꧦ","ꩰ","ꫝ",["ꫳ","ꫴ"],["ꭜ","ꭟ"],"ｰ",["ﾞ","ﾟ"]],!1,!1),tR=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,tI=rd(["ª","º","ƻ",["ǀ","ǃ"],"ʔ",["א","ת"],["װ","ײ"],["ؠ","ؿ"],["ف","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ࠀ","ࠕ"],["ࡀ","ࡘ"],["ࢠ","ࢴ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॲ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๅ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["ა","ჺ"],["ჽ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛱ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៜ",["ᠠ","ᡂ"],["ᡄ","ᡷ"],["ᢀ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱷ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ℵ","ℸ"],["ⴰ","ⵧ"],["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"〆","〼",["ぁ","ゖ"],"ゟ",["ァ","ヺ"],"ヿ",["ㄅ","ㄭ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿕"],["ꀀ","ꀔ"],["ꀖ","ꒌ"],["ꓐ","ꓷ"],["ꔀ","ꘋ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],"ꙮ",["ꚠ","ꛥ"],"ꞏ","ꟷ",["ꟻ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ","ꣽ",["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],["ꧠ","ꧤ"],["ꧧ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩯ"],["ꩱ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫜ"],["ꫠ","ꫪ"],"ꫲ",["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["ｦ","ｯ"],["ｱ","ﾝ"],["ﾠ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),tL=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,tT=rd(["ǅ","ǈ","ǋ","ǲ",["ᾈ","ᾏ"],["ᾘ","ᾟ"],["ᾨ","ᾯ"],"ᾼ","ῌ","ῼ"],!1,!1),tz=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,tU=rd([["A","Z"],["À","Ö"],["Ø","Þ"],"Ā","Ă","Ą","Ć","Ĉ","Ċ","Č","Ď","Đ","Ē","Ĕ","Ė","Ę","Ě","Ĝ","Ğ","Ġ","Ģ","Ĥ","Ħ","Ĩ","Ī","Ĭ","Į","İ","Ĳ","Ĵ","Ķ","Ĺ","Ļ","Ľ","Ŀ","Ł","Ń","Ņ","Ň","Ŋ","Ō","Ŏ","Ő","Œ","Ŕ","Ŗ","Ř","Ś","Ŝ","Ş","Š","Ţ","Ť","Ŧ","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ŵ","Ŷ",["Ÿ","Ź"],"Ż","Ž",["Ɓ","Ƃ"],"Ƅ",["Ɔ","Ƈ"],["Ɖ","Ƌ"],["Ǝ","Ƒ"],["Ɠ","Ɣ"],["Ɩ","Ƙ"],["Ɯ","Ɲ"],["Ɵ","Ơ"],"Ƣ","Ƥ",["Ʀ","Ƨ"],"Ʃ","Ƭ",["Ʈ","Ư"],["Ʊ","Ƴ"],"Ƶ",["Ʒ","Ƹ"],"Ƽ","Ǆ","Ǉ","Ǌ","Ǎ","Ǐ","Ǒ","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ǟ","Ǡ","Ǣ","Ǥ","Ǧ","Ǩ","Ǫ","Ǭ","Ǯ","Ǳ","Ǵ",["Ƕ","Ǹ"],"Ǻ","Ǽ","Ǿ","Ȁ","Ȃ","Ȅ","Ȇ","Ȉ","Ȋ","Ȍ","Ȏ","Ȑ","Ȓ","Ȕ","Ȗ","Ș","Ț","Ȝ","Ȟ","Ƞ","Ȣ","Ȥ","Ȧ","Ȩ","Ȫ","Ȭ","Ȯ","Ȱ","Ȳ",["Ⱥ","Ȼ"],["Ƚ","Ⱦ"],"Ɂ",["Ƀ","Ɇ"],"Ɉ","Ɋ","Ɍ","Ɏ","Ͱ","Ͳ","Ͷ","Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ώ"],["Α","Ρ"],["Σ","Ϋ"],"Ϗ",["ϒ","ϔ"],"Ϙ","Ϛ","Ϝ","Ϟ","Ϡ","Ϣ","Ϥ","Ϧ","Ϩ","Ϫ","Ϭ","Ϯ","ϴ","Ϸ",["Ϲ","Ϻ"],["Ͻ","Я"],"Ѡ","Ѣ","Ѥ","Ѧ","Ѩ","Ѫ","Ѭ","Ѯ","Ѱ","Ѳ","Ѵ","Ѷ","Ѹ","Ѻ","Ѽ","Ѿ","Ҁ","Ҋ","Ҍ","Ҏ","Ґ","Ғ","Ҕ","Җ","Ҙ","Қ","Ҝ","Ҟ","Ҡ","Ң","Ҥ","Ҧ","Ҩ","Ҫ","Ҭ","Ү","Ұ","Ҳ","Ҵ","Ҷ","Ҹ","Һ","Ҽ","Ҿ",["Ӏ","Ӂ"],"Ӄ","Ӆ","Ӈ","Ӊ","Ӌ","Ӎ","Ӑ","Ӓ","Ӕ","Ӗ","Ә","Ӛ","Ӝ","Ӟ","Ӡ","Ӣ","Ӥ","Ӧ","Ө","Ӫ","Ӭ","Ӯ","Ӱ","Ӳ","Ӵ","Ӷ","Ӹ","Ӻ","Ӽ","Ӿ","Ԁ","Ԃ","Ԅ","Ԇ","Ԉ","Ԋ","Ԍ","Ԏ","Ԑ","Ԓ","Ԕ","Ԗ","Ԙ","Ԛ","Ԝ","Ԟ","Ԡ","Ԣ","Ԥ","Ԧ","Ԩ","Ԫ","Ԭ","Ԯ",["Ա","Ֆ"],["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["Ꭰ","Ᏽ"],"Ḁ","Ḃ","Ḅ","Ḇ","Ḉ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ḟ","Ḡ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ḭ","Ḯ","Ḱ","Ḳ","Ḵ","Ḷ","Ḹ","Ḻ","Ḽ","Ḿ","Ṁ","Ṃ","Ṅ","Ṇ","Ṉ","Ṋ","Ṍ","Ṏ","Ṑ","Ṓ","Ṕ","Ṗ","Ṙ","Ṛ","Ṝ","Ṟ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ṫ","Ṭ","Ṯ","Ṱ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ṽ","Ṿ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ẋ","Ẍ","Ẏ","Ẑ","Ẓ","Ẕ","ẞ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ỉ","Ị","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ỳ","Ỵ","Ỷ","Ỹ","Ỻ","Ỽ","Ỿ",["Ἀ","Ἇ"],["Ἐ","Ἕ"],["Ἠ","Ἧ"],["Ἰ","Ἷ"],["Ὀ","Ὅ"],"Ὑ","Ὓ","Ὕ","Ὗ",["Ὠ","Ὧ"],["Ᾰ","Ά"],["Ὲ","Ή"],["Ῐ","Ί"],["Ῠ","Ῥ"],["Ὸ","Ώ"],"ℂ","ℇ",["ℋ","ℍ"],["ℐ","ℒ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℰ","ℳ"],["ℾ","ℿ"],"ⅅ","Ↄ",["Ⰰ","Ⱞ"],"Ⱡ",["Ɫ","Ɽ"],"Ⱨ","Ⱪ","Ⱬ",["Ɑ","Ɒ"],"Ⱳ","Ⱶ",["Ȿ","Ⲁ"],"Ⲃ","Ⲅ","Ⲇ","Ⲉ","Ⲋ","Ⲍ","Ⲏ","Ⲑ","Ⲓ","Ⲕ","Ⲗ","Ⲙ","Ⲛ","Ⲝ","Ⲟ","Ⲡ","Ⲣ","Ⲥ","Ⲧ","Ⲩ","Ⲫ","Ⲭ","Ⲯ","Ⲱ","Ⲳ","Ⲵ","Ⲷ","Ⲹ","Ⲻ","Ⲽ","Ⲿ","Ⳁ","Ⳃ","Ⳅ","Ⳇ","Ⳉ","Ⳋ","Ⳍ","Ⳏ","Ⳑ","Ⳓ","Ⳕ","Ⳗ","Ⳙ","Ⳛ","Ⳝ","Ⳟ","Ⳡ","Ⳣ","Ⳬ","Ⳮ","Ⳳ","Ꙁ","Ꙃ","Ꙅ","Ꙇ","Ꙉ","Ꙋ","Ꙍ","Ꙏ","Ꙑ","Ꙓ","Ꙕ","Ꙗ","Ꙙ","Ꙛ","Ꙝ","Ꙟ","Ꙡ","Ꙣ","Ꙥ","Ꙧ","Ꙩ","Ꙫ","Ꙭ","Ꚁ","Ꚃ","Ꚅ","Ꚇ","Ꚉ","Ꚋ","Ꚍ","Ꚏ","Ꚑ","Ꚓ","Ꚕ","Ꚗ","Ꚙ","Ꚛ","Ꜣ","Ꜥ","Ꜧ","Ꜩ","Ꜫ","Ꜭ","Ꜯ","Ꜳ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ꜿ","Ꝁ","Ꝃ","Ꝅ","Ꝇ","Ꝉ","Ꝋ","Ꝍ","Ꝏ","Ꝑ","Ꝓ","Ꝕ","Ꝗ","Ꝙ","Ꝛ","Ꝝ","Ꝟ","Ꝡ","Ꝣ","Ꝥ","Ꝧ","Ꝩ","Ꝫ","Ꝭ","Ꝯ","Ꝺ","Ꝼ",["Ᵹ","Ꝿ"],"Ꞁ","Ꞃ","Ꞅ","Ꞇ","Ꞌ","Ɥ","Ꞑ","Ꞓ","Ꞗ","Ꞙ","Ꞛ","Ꞝ","Ꞟ","Ꞡ","Ꞣ","Ꞥ","Ꞧ","Ꞩ",["Ɦ","Ɬ"],["Ʞ","Ꞵ"],"Ꞷ",["Ａ","Ｚ"]],!1,!1),tH=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,tq=rd(["ः","ऻ",["ा","ी"],["ॉ","ौ"],["ॎ","ॏ"],["ং","ঃ"],["া","ী"],["ে","ৈ"],["ো","ৌ"],"ৗ","ਃ",["ਾ","ੀ"],"ઃ",["ા","ી"],"ૉ",["ો","ૌ"],["ଂ","ଃ"],"ା","ୀ",["େ","ୈ"],["ୋ","ୌ"],"ୗ",["ா","ி"],["ு","ூ"],["ெ","ை"],["ொ","ௌ"],"ௗ",["ఁ","ః"],["ు","ౄ"],["ಂ","ಃ"],"ಾ",["ೀ","ೄ"],["ೇ","ೈ"],["ೊ","ೋ"],["ೕ","ೖ"],["ം","ഃ"],["ാ","ീ"],["െ","ൈ"],["ൊ","ൌ"],"ൗ",["ං","ඃ"],["ා","ෑ"],["ෘ","ෟ"],["ෲ","ෳ"],["༾","༿"],"ཿ",["ါ","ာ"],"ေ","း",["ျ","ြ"],["ၖ","ၗ"],["ၢ","ၤ"],["ၧ","ၭ"],["ႃ","ႄ"],["ႇ","ႌ"],"ႏ",["ႚ","ႜ"],"ា",["ើ","ៅ"],["ះ","ៈ"],["ᤣ","ᤦ"],["ᤩ","ᤫ"],["ᤰ","ᤱ"],["ᤳ","ᤸ"],["ᨙ","ᨚ"],"ᩕ","ᩗ","ᩡ",["ᩣ","ᩤ"],["ᩭ","ᩲ"],"ᬄ","ᬵ","ᬻ",["ᬽ","ᭁ"],["ᭃ","᭄"],"ᮂ","ᮡ",["ᮦ","ᮧ"],"᮪","ᯧ",["ᯪ","ᯬ"],"ᯮ",["᯲","᯳"],["ᰤ","ᰫ"],["ᰴ","ᰵ"],"᳡",["ᳲ","ᳳ"],["〮","〯"],["ꠣ","ꠤ"],"ꠧ",["ꢀ","ꢁ"],["ꢴ","ꣃ"],["ꥒ","꥓"],"ꦃ",["ꦴ","ꦵ"],["ꦺ","ꦻ"],["ꦽ","꧀"],["ꨯ","ꨰ"],["ꨳ","ꨴ"],"ꩍ","ꩻ","ꩽ","ꫫ",["ꫮ","ꫯ"],"ꫵ",["ꯣ","ꯤ"],["ꯦ","ꯧ"],["ꯩ","ꯪ"],"꯬"],!1,!1),tK=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,tV=rd([["̀","ͯ"],["҃","҇"],["֑","ֽ"],"ֿ",["ׁ","ׂ"],["ׄ","ׅ"],"ׇ",["ؐ","ؚ"],["ً","ٟ"],"ٰ",["ۖ","ۜ"],["۟","ۤ"],["ۧ","ۨ"],["۪","ۭ"],"ܑ",["ܰ","݊"],["ަ","ް"],["߫","߳"],["ࠖ","࠙"],["ࠛ","ࠣ"],["ࠥ","ࠧ"],["ࠩ","࠭"],["࡙","࡛"],["ࣣ","ं"],"ऺ","़",["ु","ै"],"्",["॑","ॗ"],["ॢ","ॣ"],"ঁ","়",["ু","ৄ"],"্",["ৢ","ৣ"],["ਁ","ਂ"],"਼",["ੁ","ੂ"],["ੇ","ੈ"],["ੋ","੍"],"ੑ",["ੰ","ੱ"],"ੵ",["ઁ","ં"],"઼",["ુ","ૅ"],["ે","ૈ"],"્",["ૢ","ૣ"],"ଁ","଼","ି",["ୁ","ୄ"],"୍","ୖ",["ୢ","ୣ"],"ஂ","ீ","்","ఀ",["ా","ీ"],["ె","ై"],["ొ","్"],["ౕ","ౖ"],["ౢ","ౣ"],"ಁ","಼","ಿ","ೆ",["ೌ","್"],["ೢ","ೣ"],"ഁ",["ു","ൄ"],"്",["ൢ","ൣ"],"්",["ි","ු"],"ූ","ั",["ิ","ฺ"],["็","๎"],"ັ",["ິ","ູ"],["ົ","ຼ"],["່","ໍ"],["༘","༙"],"༵","༷","༹",["ཱ","ཾ"],["ྀ","྄"],["྆","྇"],["ྍ","ྗ"],["ྙ","ྼ"],"࿆",["ိ","ူ"],["ဲ","့"],["္","်"],["ွ","ှ"],["ၘ","ၙ"],["ၞ","ၠ"],["ၱ","ၴ"],"ႂ",["ႅ","ႆ"],"ႍ","ႝ",["፝","፟"],["ᜒ","᜔"],["ᜲ","᜴"],["ᝒ","ᝓ"],["ᝲ","ᝳ"],["឴","឵"],["ិ","ួ"],"ំ",["៉","៓"],"៝",["᠋","᠍"],"ᢩ",["ᤠ","ᤢ"],["ᤧ","ᤨ"],"ᤲ",["᤹","᤻"],["ᨗ","ᨘ"],"ᨛ","ᩖ",["ᩘ","ᩞ"],"᩠","ᩢ",["ᩥ","ᩬ"],["ᩳ","᩼"],"᩿",["᪰","᪽"],["ᬀ","ᬃ"],"᬴",["ᬶ","ᬺ"],"ᬼ","ᭂ",["᭫","᭳"],["ᮀ","ᮁ"],["ᮢ","ᮥ"],["ᮨ","ᮩ"],["᮫","ᮭ"],"᯦",["ᯨ","ᯩ"],"ᯭ",["ᯯ","ᯱ"],["ᰬ","ᰳ"],["ᰶ","᰷"],["᳐","᳒"],["᳔","᳠"],["᳢","᳨"],"᳭","᳴",["᳸","᳹"],["᷀","᷵"],["᷼","᷿"],["⃐","⃜"],"⃡",["⃥","⃰"],["⳯","⳱"],"⵿",["ⷠ","ⷿ"],["〪","〭"],["゙","゚"],"꙯",["ꙴ","꙽"],["ꚞ","ꚟ"],["꛰","꛱"],"ꠂ","꠆","ꠋ",["ꠥ","ꠦ"],"꣄",["꣠","꣱"],["ꤦ","꤭"],["ꥇ","ꥑ"],["ꦀ","ꦂ"],"꦳",["ꦶ","ꦹ"],"ꦼ","ꧥ",["ꨩ","ꨮ"],["ꨱ","ꨲ"],["ꨵ","ꨶ"],"ꩃ","ꩌ","ꩼ","ꪰ",["ꪲ","ꪴ"],["ꪷ","ꪸ"],["ꪾ","꪿"],"꫁",["ꫬ","ꫭ"],"꫶","ꯥ","ꯨ","꯭","ﬞ",["︀","️"],["︠","︯"]],!1,!1),tW=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,tG=rd([["0","9"],["٠","٩"],["۰","۹"],["߀","߉"],["०","९"],["০","৯"],["੦","੯"],["૦","૯"],["୦","୯"],["௦","௯"],["౦","౯"],["೦","೯"],["൦","൯"],["෦","෯"],["๐","๙"],["໐","໙"],["༠","༩"],["၀","၉"],["႐","႙"],["០","៩"],["᠐","᠙"],["᥆","᥏"],["᧐","᧙"],["᪀","᪉"],["᪐","᪙"],["᭐","᭙"],["᮰","᮹"],["᱀","᱉"],["᱐","᱙"],["꘠","꘩"],["꣐","꣙"],["꤀","꤉"],["꧐","꧙"],["꧰","꧹"],["꩐","꩙"],["꯰","꯹"],["０","９"]],!1,!1),tX=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,tY=rd([["ᛮ","ᛰ"],["Ⅰ","ↂ"],["ↅ","ↈ"],"〇",["〡","〩"],["〸","〺"],["ꛦ","ꛯ"]],!1,!1),tZ=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,tQ=rd(["_",["‿","⁀"],"⁔",["︳","︴"],["﹍","﹏"],"＿"],!1,!1),tJ=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,t0=rd([" "," "," ",[" "," "]," "," ","　"],!1,!1),t1="break",t2=rc("break",!1),t6="case",t3=rc("case",!1),t5="catch",t4=rc("catch",!1),t7="class",t8=rc("class",!1),t9="const",ne=rc("const",!1),nt="continue",nn=rc("continue",!1),nr="debugger",no=rc("debugger",!1),nu="default",ni=rc("default",!1),na="delete",ns=rc("delete",!1),nl="do",nc=rc("do",!1),nd="else",nf=rc("else",!1),nh="enum",np=rc("enum",!1),ng="export",nv=rc("export",!1),nm="extends",ny=rc("extends",!1),nb="false",nE=rc("false",!1),n_="finally",nA=rc("finally",!1),nx="for",nC=rc("for",!1),nw="function",nS=rc("function",!1),nk="if",nF=rc("if",!1),nD="import",nB=rc("import",!1),nP="instanceof",nj=rc("instanceof",!1),nN="in",nM=rc("in",!1),nO="new",n$=rc("new",!1),nR="null",nI=rc("null",!1),nL="return",nT=rc("return",!1),nz="super",nU=rc("super",!1),nH="switch",nq=rc("switch",!1),nK="this",nV=rc("this",!1),nW="throw",nG=rc("throw",!1),nX="true",nY=rc("true",!1),nZ="try",nQ=rc("try",!1),nJ="typeof",n0=rc("typeof",!1),n1="var",n2=rc("var",!1),n6="void",n3=rc("void",!1),n5="while",n4=rc("while",!1),n7="with",n8=rc("with",!1),n9=";",re=rc(";",!1),rt=0,rn=0,rr=[{line:1,column:1}],ro=0,ru=[],ri=0;if("startRule"in n){if(!(n.startRule in u))throw Error("Can't start parsing from rule \""+n.startRule+'".');i=u[n.startRule]}function ra(){return e.substring(rn,rt)}function rs(){return rv(rn,rt)}function rl(e,t){throw ry(e,t=void 0!==t?t:rv(rn,rt))}function rc(e,t){return{type:"literal",text:e,ignoreCase:t}}function rd(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function rf(){return{type:"any"}}function rh(){return{type:"end"}}function rp(e){return{type:"other",description:e}}function rg(t){var n,r=rr[t];if(r)return r;for(n=t-1;!rr[n];)n--;for(r={line:(r=rr[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return rr[t]=r,r}function rv(e,t){var n=rg(e),r=rg(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function rm(e){rt<ro||(rt>ro&&(ro=rt,ru=[]),ru.push(e))}function ry(e,n){return new t(e,null,null,n)}function rb(e,n,r){return new t(t.buildMessage(e,n),e,n,r)}function rE(){var e,t,n,r,u,i,s;if(e=rt,(t=o2())!==o)if(n=rt,(r=r_())!==o&&(u=o2())!==o?n=r=[r,u]:(rt=n,n=o),n===o&&(n=null),n!==o){if(r=[],u=rt,(i=rA())!==o&&(s=o2())!==o?u=i=[i,s]:(rt=u,u=o),u!==o)for(;u!==o;)r.push(u),u=rt,(i=rA())!==o&&(s=o2())!==o?u=i=[i,s]:(rt=u,u=o);else r=o;r!==o?(rn=e,e=t=a(n,r)):(rt=e,e=o)}else rt=e,e=o;else rt=e,e=o;return e}function r_(){var e,t;return e=rt,(t=oa())!==o&&o3()!==o?(rn=e,e=t=s(t)):(rt=e,e=o),e}function rA(){var t,n,r,u,i,a;return t=rt,(n=rq())!==o&&o2()!==o?(r=rt,(u=r0())!==o&&(i=o2())!==o?r=u=[u,i]:(rt=r,r=o),r===o&&(r=null),r!==o?(61===e.charCodeAt(rt)?(u=l,rt++):(u=o,0===ri&&rm(c)),u!==o&&(i=o2())!==o&&(a=rx())!==o&&o3()!==o?(rn=t,t=n=d(n,r,a)):(rt=t,t=o)):(rt=t,t=o)):(rt=t,t=o),t}function rx(){var t,n,r,u,i,a,s,l;if(t=rt,(n=rC())!==o){for(r=[],u=rt,(i=o2())!==o?(47===e.charCodeAt(rt)?(a=f,rt++):(a=o,0===ri&&rm(h)),a!==o&&(s=o2())!==o&&(l=rC())!==o?u=i=[i,a,s,l]:(rt=u,u=o)):(rt=u,u=o);u!==o;)r.push(u),u=rt,(i=o2())!==o?(47===e.charCodeAt(rt)?(a=f,rt++):(a=o,0===ri&&rm(h)),a!==o&&(s=o2())!==o&&(l=rC())!==o?u=i=[i,a,s,l]:(rt=u,u=o)):(rt=u,u=o);r!==o?(rn=t,t=n=p(n,r)):(rt=t,t=o)}else rt=t,t=o;return t}function rC(){var e,t,n,r,u;return e=rt,(t=rw())!==o?(n=rt,(r=o2())!==o&&(u=oa())!==o?n=r=[r,u]:(rt=n,n=o),n===o&&(n=null),n!==o?(rn=e,e=t=g(t,n)):(rt=e,e=o)):(rt=e,e=o),e}function rw(){var e,t,n,r,u,i;if(e=rt,(t=rS())!==o){for(n=[],r=rt,(u=o2())!==o&&(i=rS())!==o?r=u=[u,i]:(rt=r,r=o);r!==o;)n.push(r),r=rt,(u=o2())!==o&&(i=rS())!==o?r=u=[u,i]:(rt=r,r=o);n!==o?(rn=e,e=t=v(t,n)):(rt=e,e=o)}else rt=e,e=o;return e}function rS(){var t,n,r,u;return t=rt,(n=rH())!==o&&o2()!==o?(58===e.charCodeAt(rt)?(r=m,rt++):(r=o,0===ri&&rm(y)),r!==o&&o2()!==o&&(u=rk())!==o?(rn=t,t=n=b(n,u)):(rt=t,t=o)):(rt=t,t=o),t===o&&(t=rk()),t}function rk(){var e,t,n;return e=rt,(t=rF())!==o&&o2()!==o&&(n=rD())!==o?(rn=e,e=t=E(t,n)):(rt=e,e=o),e===o&&(e=rD()),e}function rF(){var t;return 36===e.charCodeAt(rt)?(t=_,rt++):(t=o,0===ri&&rm(A)),t===o&&(38===e.charCodeAt(rt)?(t=x,rt++):(t=o,0===ri&&rm(C)),t===o&&(33===e.charCodeAt(rt)?(t=w,rt++):(t=o,0===ri&&rm(S)))),t}function rD(){var e,t,n;return e=rt,(t=rP())!==o&&o2()!==o&&(n=rB())!==o?(rn=e,e=t=k(t,n)):(rt=e,e=o),e===o&&(e=rP()),e}function rB(){var t;return 63===e.charCodeAt(rt)?(t=F,rt++):(t=o,0===ri&&rm(D)),t===o&&(42===e.charCodeAt(rt)?(t=B,rt++):(t=o,0===ri&&rm(P)),t===o&&(43===e.charCodeAt(rt)?(t=j,rt++):(t=o,0===ri&&rm(N)))),t}function rP(){var t,n,r,u;return(t=rJ())===o&&(t=r6())===o&&(t=oi())===o&&(t=rj())===o&&(t=rN())===o&&(t=rt,40===e.charCodeAt(rt)?(n=M,rt++):(n=o,0===ri&&rm(O)),n!==o&&o2()!==o&&(r=rx())!==o&&o2()!==o?(41===e.charCodeAt(rt)?(u=$,rt++):(u=o,0===ri&&rm(R)),u!==o?(rn=t,t=n=I(r)):(rt=t,t=o)):(rt=t,t=o)),t}function rj(){var t,n,r,u,i,a,s,d;return t=rt,(n=rq())!==o?(r=rt,ri++,u=rt,(i=o2())!==o?(a=rt,(s=r0())!==o&&(d=o2())!==o?a=s=[s,d]:(rt=a,a=o),a===o&&(a=null),a!==o?(61===e.charCodeAt(rt)?(s=l,rt++):(s=o,0===ri&&rm(c)),s!==o?u=i=[i,a,s]:(rt=u,u=o)):(rt=u,u=o)):(rt=u,u=o),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?(rn=t,t=n=L(n)):(rt=t,t=o)):(rt=t,t=o),t}function rN(){var e,t,n;return e=rt,(t=rM())!==o&&o2()!==o&&(n=oa())!==o?(rn=e,e=t=T(t,n)):(rt=e,e=o),e}function rM(){var t;return 38===e.charCodeAt(rt)?(t=x,rt++):(t=o,0===ri&&rm(C)),t===o&&(33===e.charCodeAt(rt)?(t=w,rt++):(t=o,0===ri&&rm(S))),t}function rO(){var t;return e.length>rt?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(z)),t}function r$(){var t,n;return ri++,9===e.charCodeAt(rt)?(t=H,rt++):(t=o,0===ri&&rm(q)),t===o&&(11===e.charCodeAt(rt)?(t=K,rt++):(t=o,0===ri&&rm(V)),t===o&&(12===e.charCodeAt(rt)?(t=W,rt++):(t=o,0===ri&&rm(G)),t===o&&(32===e.charCodeAt(rt)?(t=X,rt++):(t=o,0===ri&&rm(Y)),t===o&&(160===e.charCodeAt(rt)?(t=Z,rt++):(t=o,0===ri&&rm(Q)),t===o&&(65279===e.charCodeAt(rt)?(t=J,rt++):(t=o,0===ri&&rm(ee)),t===o&&(t=ob())))))),ri--,t===o&&(n=o,0===ri&&rm(U)),t}function rR(){var t;return et.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(en)),t}function rI(){var t,n;return ri++,10===e.charCodeAt(rt)?(t=eo,rt++):(t=o,0===ri&&rm(eu)),t===o&&(e.substr(rt,2)===ei?(t=ei,rt+=2):(t=o,0===ri&&rm(ea)),t===o&&(13===e.charCodeAt(rt)?(t=es,rt++):(t=o,0===ri&&rm(el)),t===o&&(8232===e.charCodeAt(rt)?(t=ec,rt++):(t=o,0===ri&&rm(ed)),t===o&&(8233===e.charCodeAt(rt)?(t=ef,rt++):(t=o,0===ri&&rm(eh)))))),ri--,t===o&&(n=o,0===ri&&rm(er)),t}function rL(){var e,t;return ri++,(e=rT())===o&&(e=rU()),ri--,e===o&&(t=o,0===ri&&rm(ep)),e}function rT(){var t,n,r,u,i,a;if(t=rt,e.substr(rt,2)===eg?(n=eg,rt+=2):(n=o,0===ri&&rm(ev)),n!==o){for(r=[],u=rt,i=rt,ri++,e.substr(rt,2)===em?(a=em,rt+=2):(a=o,0===ri&&rm(ey)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);u!==o;)r.push(u),u=rt,i=rt,ri++,e.substr(rt,2)===em?(a=em,rt+=2):(a=o,0===ri&&rm(ey)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);r!==o?(e.substr(rt,2)===em?(u=em,rt+=2):(u=o,0===ri&&rm(ey)),u!==o?t=n=[n,r,u]:(rt=t,t=o)):(rt=t,t=o)}else rt=t,t=o;return t}function rz(){var t,n,r,u,i,a;if(t=rt,e.substr(rt,2)===eg?(n=eg,rt+=2):(n=o,0===ri&&rm(ev)),n!==o){for(r=[],u=rt,i=rt,ri++,e.substr(rt,2)===em?(a=em,rt+=2):(a=o,0===ri&&rm(ey)),a===o&&(a=rR()),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);u!==o;)r.push(u),u=rt,i=rt,ri++,e.substr(rt,2)===em?(a=em,rt+=2):(a=o,0===ri&&rm(ey)),a===o&&(a=rR()),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);r!==o?(e.substr(rt,2)===em?(u=em,rt+=2):(u=o,0===ri&&rm(ey)),u!==o?t=n=[n,r,u]:(rt=t,t=o)):(rt=t,t=o)}else rt=t,t=o;return t}function rU(){var t,n,r,u,i,a;if(t=rt,e.substr(rt,2)===eb?(n=eb,rt+=2):(n=o,0===ri&&rm(eE)),n!==o){for(r=[],u=rt,i=rt,ri++,a=rR(),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);u!==o;)r.push(u),u=rt,i=rt,ri++,a=rR(),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);r!==o?t=n=[n,r]:(rt=t,t=o)}else rt=t,t=o;return t}function rH(){var e,t,n;return e=rt,t=rt,ri++,n=rX(),ri--,n===o?t=void 0:(rt=t,t=o),t!==o&&(n=rq())!==o?(rn=e,e=t=e_(n)):(rt=e,e=o),e}function rq(){var e,t,n,r;if(ri++,e=rt,(t=rK())!==o){for(n=[],r=rV();r!==o;)n.push(r),r=rV();n!==o?(rn=e,e=t=ex(t,n)):(rt=e,e=o)}else rt=e,e=o;return ri--,e===o&&(t=o,0===ri&&rm(eA)),e}function rK(){var t,n,r;return(t=rW())===o&&(36===e.charCodeAt(rt)?(t=_,rt++):(t=o,0===ri&&rm(A)),t===o&&(95===e.charCodeAt(rt)?(t=eC,rt++):(t=o,0===ri&&rm(ew)),t===o&&(t=rt,92===e.charCodeAt(rt)?(n=eS,rt++):(n=o,0===ri&&rm(ek)),n!==o&&(r=or())!==o?(rn=t,t=n=eF(r)):(rt=t,t=o)))),t}function rV(){var t;return(t=rK())===o&&(t=rG())===o&&(t=ov())===o&&(t=oy())===o&&(8204===e.charCodeAt(rt)?(t=eD,rt++):(t=o,0===ri&&rm(eB)),t===o&&(8205===e.charCodeAt(rt)?(t=eP,rt++):(t=o,0===ri&&rm(ej)))),t}function rW(){var e;return(e=oh())===o&&(e=ol())===o&&(e=of())===o&&(e=oc())===o&&(e=od())===o&&(e=om()),e}function rG(){var e;return(e=og())===o&&(e=op()),e}function rX(){var e;return(e=rY())===o&&(e=rZ())===o&&(e=oH())===o&&(e=rQ()),e}function rY(){var e;return(e=oE())===o&&(e=o_())===o&&(e=oA())===o&&(e=ow())===o&&(e=oS())===o&&(e=ok())===o&&(e=oF())===o&&(e=oD())===o&&(e=oB())===o&&(e=oO())===o&&(e=o$())===o&&(e=oR())===o&&(e=oI())===o&&(e=oT())===o&&(e=oz())===o&&(e=oU())===o&&(e=oq())===o&&(e=oV())===o&&(e=oW())===o&&(e=oG())===o&&(e=oY())===o&&(e=oZ())===o&&(e=oQ())===o&&(e=oJ())===o&&(e=o0())===o&&(e=o1()),e}function rZ(){var e;return(e=ox())===o&&(e=oC())===o&&(e=oP())===o&&(e=oj())===o&&(e=oN())===o&&(e=oL())===o&&(e=oK()),e}function rQ(){var e;return(e=oX())===o&&(e=oM()),e}function rJ(){var t,n,r;return ri++,t=rt,(n=r0())!==o?(105===e.charCodeAt(rt)?(r=eM,rt++):(r=o,0===ri&&rm(eO)),r===o&&(r=null),r!==o?(rn=t,t=n=e$(n,r)):(rt=t,t=o)):(rt=t,t=o),ri--,t===o&&(n=o,0===ri&&rm(eN)),t}function r0(){var t,n,r,u;if(ri++,t=rt,34===e.charCodeAt(rt)?(n=eI,rt++):(n=o,0===ri&&rm(eL)),n!==o){for(r=[],u=r1();u!==o;)r.push(u),u=r1();r!==o?(34===e.charCodeAt(rt)?(u=eI,rt++):(u=o,0===ri&&rm(eL)),u!==o?(rn=t,t=n=eT(r)):(rt=t,t=o)):(rt=t,t=o)}else rt=t,t=o;if(t===o)if(t=rt,39===e.charCodeAt(rt)?(n=ez,rt++):(n=o,0===ri&&rm(eU)),n!==o){for(r=[],u=r2();u!==o;)r.push(u),u=r2();r!==o?(39===e.charCodeAt(rt)?(u=ez,rt++):(u=o,0===ri&&rm(eU)),u!==o?(rn=t,t=n=eT(r)):(rt=t,t=o)):(rt=t,t=o)}else rt=t,t=o;return ri--,t===o&&(n=o,0===ri&&rm(eR)),t}function r1(){var t,n,r;return t=rt,n=rt,ri++,34===e.charCodeAt(rt)?(r=eI,rt++):(r=o,0===ri&&rm(eL)),r===o&&(92===e.charCodeAt(rt)?(r=eS,rt++):(r=o,0===ri&&rm(ek)),r===o&&(r=rR())),ri--,r===o?n=void 0:(rt=n,n=o),n!==o&&(r=rO())!==o?(rn=t,t=n=eH()):(rt=t,t=o),t===o&&(t=rt,92===e.charCodeAt(rt)?(n=eS,rt++):(n=o,0===ri&&rm(ek)),n!==o&&(r=r7())!==o?(rn=t,t=n=eF(r)):(rt=t,t=o),t===o&&(t=r4())),t}function r2(){var t,n,r;return t=rt,n=rt,ri++,39===e.charCodeAt(rt)?(r=ez,rt++):(r=o,0===ri&&rm(eU)),r===o&&(92===e.charCodeAt(rt)?(r=eS,rt++):(r=o,0===ri&&rm(ek)),r===o&&(r=rR())),ri--,r===o?n=void 0:(rt=n,n=o),n!==o&&(r=rO())!==o?(rn=t,t=n=eH()):(rt=t,t=o),t===o&&(t=rt,92===e.charCodeAt(rt)?(n=eS,rt++):(n=o,0===ri&&rm(ek)),n!==o&&(r=r7())!==o?(rn=t,t=n=eF(r)):(rt=t,t=o),t===o&&(t=r4())),t}function r6(){var t,n,r,u,i,a;if(ri++,t=rt,91===e.charCodeAt(rt)?(n=eK,rt++):(n=o,0===ri&&rm(eV)),n!==o)if(94===e.charCodeAt(rt)?(r=eW,rt++):(r=o,0===ri&&rm(eG)),r===o&&(r=null),r!==o){for(u=[],(i=r3())===o&&(i=r5());i!==o;)u.push(i),(i=r3())===o&&(i=r5());u!==o?(93===e.charCodeAt(rt)?(i=eX,rt++):(i=o,0===ri&&rm(eY)),i!==o?(105===e.charCodeAt(rt)?(a=eM,rt++):(a=o,0===ri&&rm(eO)),a===o&&(a=null),a!==o?(rn=t,t=n=eZ(r,u,a)):(rt=t,t=o)):(rt=t,t=o)):(rt=t,t=o)}else rt=t,t=o;else rt=t,t=o;return ri--,t===o&&(n=o,0===ri&&rm(eq)),t}function r3(){var t,n,r,u;return t=rt,(n=r5())!==o?(45===e.charCodeAt(rt)?(r=eQ,rt++):(r=o,0===ri&&rm(eJ)),r!==o&&(u=r5())!==o?(rn=t,t=n=e0(n,u)):(rt=t,t=o)):(rt=t,t=o),t}function r5(){var t,n,r;return t=rt,n=rt,ri++,93===e.charCodeAt(rt)?(r=eX,rt++):(r=o,0===ri&&rm(eY)),r===o&&(92===e.charCodeAt(rt)?(r=eS,rt++):(r=o,0===ri&&rm(ek)),r===o&&(r=rR())),ri--,r===o?n=void 0:(rt=n,n=o),n!==o&&(r=rO())!==o?(rn=t,t=n=eH()):(rt=t,t=o),t===o&&(t=rt,92===e.charCodeAt(rt)?(n=eS,rt++):(n=o,0===ri&&rm(ek)),n!==o&&(r=r7())!==o?(rn=t,t=n=eF(r)):(rt=t,t=o),t===o&&(t=r4())),t}function r4(){var t,n;return t=rt,92===e.charCodeAt(rt)?(n=eS,rt++):(n=o,0===ri&&rm(ek)),n!==o&&rI()!==o?(rn=t,t=n=e1()):(rt=t,t=o),t}function r7(){var t,n,r,u;return(t=r8())===o&&(t=rt,48===e.charCodeAt(rt)?(n=e2,rt++):(n=o,0===ri&&rm(e6)),n!==o?(r=rt,ri++,u=oo(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?(rn=t,t=n=e3()):(rt=t,t=o)):(rt=t,t=o),t===o&&(t=on())===o&&(t=or())),t}function r8(){var e;return(e=r9())===o&&(e=oe()),e}function r9(){var t,n;return 39===e.charCodeAt(rt)?(t=ez,rt++):(t=o,0===ri&&rm(eU)),t===o&&(34===e.charCodeAt(rt)?(t=eI,rt++):(t=o,0===ri&&rm(eL)),t===o&&(92===e.charCodeAt(rt)?(t=eS,rt++):(t=o,0===ri&&rm(ek)),t===o&&(t=rt,98===e.charCodeAt(rt)?(n=e5,rt++):(n=o,0===ri&&rm(e4)),n!==o&&(rn=t,n=e7()),(t=n)===o&&(t=rt,102===e.charCodeAt(rt)?(n=e8,rt++):(n=o,0===ri&&rm(e9)),n!==o&&(rn=t,n=te()),(t=n)===o&&(t=rt,110===e.charCodeAt(rt)?(n=tt,rt++):(n=o,0===ri&&rm(tn)),n!==o&&(rn=t,n=tr()),(t=n)===o&&(t=rt,114===e.charCodeAt(rt)?(n=to,rt++):(n=o,0===ri&&rm(tu)),n!==o&&(rn=t,n=ti()),(t=n)===o&&(t=rt,116===e.charCodeAt(rt)?(n=ta,rt++):(n=o,0===ri&&rm(ts)),n!==o&&(rn=t,n=tl()),(t=n)===o&&(t=rt,118===e.charCodeAt(rt)?(n=tc,rt++):(n=o,0===ri&&rm(td)),n!==o&&(rn=t,n=tf()),t=n)))))))),t}function oe(){var e,t,n;return e=rt,t=rt,ri++,(n=ot())===o&&(n=rR()),ri--,n===o?t=void 0:(rt=t,t=o),t!==o&&(n=rO())!==o?(rn=e,e=t=eH()):(rt=e,e=o),e}function ot(){var t;return(t=r9())===o&&(t=oo())===o&&(120===e.charCodeAt(rt)?(t=th,rt++):(t=o,0===ri&&rm(tp)),t===o&&(117===e.charCodeAt(rt)?(t=tg,rt++):(t=o,0===ri&&rm(tv)))),t}function on(){var t,n,r,u,i,a;return t=rt,120===e.charCodeAt(rt)?(n=th,rt++):(n=o,0===ri&&rm(tp)),n!==o?(r=rt,u=rt,(i=ou())!==o&&(a=ou())!==o?u=i=[i,a]:(rt=u,u=o),(r=u!==o?e.substring(r,rt):u)!==o?(rn=t,t=n=tm(r)):(rt=t,t=o)):(rt=t,t=o),t}function or(){var t,n,r,u,i,a,s,l;return t=rt,117===e.charCodeAt(rt)?(n=tg,rt++):(n=o,0===ri&&rm(tv)),n!==o?(r=rt,u=rt,(i=ou())!==o&&(a=ou())!==o&&(s=ou())!==o&&(l=ou())!==o?u=i=[i,a,s,l]:(rt=u,u=o),(r=u!==o?e.substring(r,rt):u)!==o?(rn=t,t=n=tm(r)):(rt=t,t=o)):(rt=t,t=o),t}function oo(){var t;return ty.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tb)),t}function ou(){var t;return tE.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(t_)),t}function oi(){var t,n;return t=rt,46===e.charCodeAt(rt)?(n=tA,rt++):(n=o,0===ri&&rm(tx)),n!==o&&(rn=t,n=tC()),t=n}function oa(){var t,n,r,u;return ri++,t=rt,123===e.charCodeAt(rt)?(n=tS,rt++):(n=o,0===ri&&rm(tk)),n!==o&&(r=os())!==o?(125===e.charCodeAt(rt)?(u=tF,rt++):(u=o,0===ri&&rm(tD)),u!==o?(rn=t,t=n=tB(r)):(rt=t,t=o)):(rt=t,t=o),ri--,t===o&&(n=o,0===ri&&rm(tw)),t}function os(){var t,n,r,u,i,a;if(t=rt,n=[],r=[],u=rt,i=rt,ri++,tP.test(e.charAt(rt))?(a=e.charAt(rt),rt++):(a=o,0===ri&&rm(tj)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o),u!==o)for(;u!==o;)r.push(u),u=rt,i=rt,ri++,tP.test(e.charAt(rt))?(a=e.charAt(rt),rt++):(a=o,0===ri&&rm(tj)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);else r=o;for(r===o&&(r=rt,123===e.charCodeAt(rt)?(u=tS,rt++):(u=o,0===ri&&rm(tk)),u!==o&&(i=os())!==o?(125===e.charCodeAt(rt)?(a=tF,rt++):(a=o,0===ri&&rm(tD)),a!==o?r=u=[u,i,a]:(rt=r,r=o)):(rt=r,r=o));r!==o;){if(n.push(r),r=[],u=rt,i=rt,ri++,tP.test(e.charAt(rt))?(a=e.charAt(rt),rt++):(a=o,0===ri&&rm(tj)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o),u!==o)for(;u!==o;)r.push(u),u=rt,i=rt,ri++,tP.test(e.charAt(rt))?(a=e.charAt(rt),rt++):(a=o,0===ri&&rm(tj)),ri--,a===o?i=void 0:(rt=i,i=o),i!==o&&(a=rO())!==o?u=i=[i,a]:(rt=u,u=o);else r=o;r===o&&(r=rt,123===e.charCodeAt(rt)?(u=tS,rt++):(u=o,0===ri&&rm(tk)),u!==o&&(i=os())!==o?(125===e.charCodeAt(rt)?(a=tF,rt++):(a=o,0===ri&&rm(tD)),a!==o?r=u=[u,i,a]:(rt=r,r=o)):(rt=r,r=o))}return n!==o?e.substring(t,rt):n}function ol(){var t;return tN.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tM)),t}function oc(){var t;return tO.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(t$)),t}function od(){var t;return tR.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tI)),t}function of(){var t;return tL.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tT)),t}function oh(){var t;return tz.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tU)),t}function op(){var t;return tH.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tq)),t}function og(){var t;return tK.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tV)),t}function ov(){var t;return tW.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tG)),t}function om(){var t;return tX.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tY)),t}function oy(){var t;return tZ.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(tQ)),t}function ob(){var t;return tJ.test(e.charAt(rt))?(t=e.charAt(rt),rt++):(t=o,0===ri&&rm(t0)),t}function oE(){var t,n,r,u;return t=rt,e.substr(rt,5)===t1?(n=t1,rt+=5):(n=o,0===ri&&rm(t2)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function o_(){var t,n,r,u;return t=rt,e.substr(rt,4)===t6?(n=t6,rt+=4):(n=o,0===ri&&rm(t3)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oA(){var t,n,r,u;return t=rt,e.substr(rt,5)===t5?(n=t5,rt+=5):(n=o,0===ri&&rm(t4)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function ox(){var t,n,r,u;return t=rt,e.substr(rt,5)===t7?(n=t7,rt+=5):(n=o,0===ri&&rm(t8)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oC(){var t,n,r,u;return t=rt,e.substr(rt,5)===t9?(n=t9,rt+=5):(n=o,0===ri&&rm(ne)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function ow(){var t,n,r,u;return t=rt,e.substr(rt,8)===nt?(n=nt,rt+=8):(n=o,0===ri&&rm(nn)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oS(){var t,n,r,u;return t=rt,e.substr(rt,8)===nr?(n=nr,rt+=8):(n=o,0===ri&&rm(no)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function ok(){var t,n,r,u;return t=rt,e.substr(rt,7)===nu?(n=nu,rt+=7):(n=o,0===ri&&rm(ni)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oF(){var t,n,r,u;return t=rt,e.substr(rt,6)===na?(n=na,rt+=6):(n=o,0===ri&&rm(ns)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oD(){var t,n,r,u;return t=rt,e.substr(rt,2)===nl?(n=nl,rt+=2):(n=o,0===ri&&rm(nc)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oB(){var t,n,r,u;return t=rt,e.substr(rt,4)===nd?(n=nd,rt+=4):(n=o,0===ri&&rm(nf)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oP(){var t,n,r,u;return t=rt,e.substr(rt,4)===nh?(n=nh,rt+=4):(n=o,0===ri&&rm(np)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oj(){var t,n,r,u;return t=rt,e.substr(rt,6)===ng?(n=ng,rt+=6):(n=o,0===ri&&rm(nv)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oN(){var t,n,r,u;return t=rt,e.substr(rt,7)===nm?(n=nm,rt+=7):(n=o,0===ri&&rm(ny)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oM(){var t,n,r,u;return t=rt,e.substr(rt,5)===nb?(n=nb,rt+=5):(n=o,0===ri&&rm(nE)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oO(){var t,n,r,u;return t=rt,e.substr(rt,7)===n_?(n=n_,rt+=7):(n=o,0===ri&&rm(nA)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function o$(){var t,n,r,u;return t=rt,e.substr(rt,3)===nx?(n=nx,rt+=3):(n=o,0===ri&&rm(nC)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oR(){var t,n,r,u;return t=rt,e.substr(rt,8)===nw?(n=nw,rt+=8):(n=o,0===ri&&rm(nS)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oI(){var t,n,r,u;return t=rt,e.substr(rt,2)===nk?(n=nk,rt+=2):(n=o,0===ri&&rm(nF)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oL(){var t,n,r,u;return t=rt,e.substr(rt,6)===nD?(n=nD,rt+=6):(n=o,0===ri&&rm(nB)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oT(){var t,n,r,u;return t=rt,e.substr(rt,10)===nP?(n=nP,rt+=10):(n=o,0===ri&&rm(nj)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oz(){var t,n,r,u;return t=rt,e.substr(rt,2)===nN?(n=nN,rt+=2):(n=o,0===ri&&rm(nM)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oU(){var t,n,r,u;return t=rt,e.substr(rt,3)===nO?(n=nO,rt+=3):(n=o,0===ri&&rm(n$)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oH(){var t,n,r,u;return t=rt,e.substr(rt,4)===nR?(n=nR,rt+=4):(n=o,0===ri&&rm(nI)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oq(){var t,n,r,u;return t=rt,e.substr(rt,6)===nL?(n=nL,rt+=6):(n=o,0===ri&&rm(nT)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oK(){var t,n,r,u;return t=rt,e.substr(rt,5)===nz?(n=nz,rt+=5):(n=o,0===ri&&rm(nU)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oV(){var t,n,r,u;return t=rt,e.substr(rt,6)===nH?(n=nH,rt+=6):(n=o,0===ri&&rm(nq)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oW(){var t,n,r,u;return t=rt,e.substr(rt,4)===nK?(n=nK,rt+=4):(n=o,0===ri&&rm(nV)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oG(){var t,n,r,u;return t=rt,e.substr(rt,5)===nW?(n=nW,rt+=5):(n=o,0===ri&&rm(nG)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oX(){var t,n,r,u;return t=rt,e.substr(rt,4)===nX?(n=nX,rt+=4):(n=o,0===ri&&rm(nY)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oY(){var t,n,r,u;return t=rt,e.substr(rt,3)===nZ?(n=nZ,rt+=3):(n=o,0===ri&&rm(nQ)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oZ(){var t,n,r,u;return t=rt,e.substr(rt,6)===nJ?(n=nJ,rt+=6):(n=o,0===ri&&rm(n0)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oQ(){var t,n,r,u;return t=rt,e.substr(rt,3)===n1?(n=n1,rt+=3):(n=o,0===ri&&rm(n2)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function oJ(){var t,n,r,u;return t=rt,e.substr(rt,4)===n6?(n=n6,rt+=4):(n=o,0===ri&&rm(n3)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function o0(){var t,n,r,u;return t=rt,e.substr(rt,5)===n5?(n=n5,rt+=5):(n=o,0===ri&&rm(n4)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function o1(){var t,n,r,u;return t=rt,e.substr(rt,4)===n7?(n=n7,rt+=4):(n=o,0===ri&&rm(n8)),n!==o?(r=rt,ri++,u=rV(),ri--,u===o?r=void 0:(rt=r,r=o),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t}function o2(){var e,t;for(e=[],(t=r$())===o&&(t=rI())===o&&(t=rL());t!==o;)e.push(t),(t=r$())===o&&(t=rI())===o&&(t=rL());return e}function o6(){var e,t;for(e=[],(t=r$())===o&&(t=rz());t!==o;)e.push(t),(t=r$())===o&&(t=rz());return e}function o3(){var t,n,r,u;return t=rt,(n=o2())!==o?(59===e.charCodeAt(rt)?(r=n9,rt++):(r=o,0===ri&&rm(re)),r!==o?t=n=[n,r]:(rt=t,t=o)):(rt=t,t=o),t===o&&(t=rt,(n=o6())!==o?((r=rU())===o&&(r=null),r!==o&&(u=rI())!==o?t=n=[n,r,u]:(rt=t,t=o)):(rt=t,t=o),t===o&&(t=rt,(n=o2())!==o&&(r=o5())!==o?t=n=[n,r]:(rt=t,t=o))),t}function o5(){var t,n;return t=rt,ri++,e.length>rt?(n=e.charAt(rt),rt++):(n=o,0===ri&&rm(z)),ri--,n===o?t=void 0:(rt=t,t=o),t}var o4={$:"text","&":"simple_and","!":"simple_not"},o7={"?":"optional","*":"zero_or_more","+":"one_or_more"},o8={"&":"semantic_and","!":"semantic_not"};function o9(e){var t,n=[];for(t=0;t<e.length;t++)""!==e[t]&&n.push(e[t]);return n}function ue(e,t){return e?e[t]:null}function ut(e,t){var n,r=Array(e.length);for(n=0;n<e.length;n++)r[n]=e[n][t];return r}function un(e,t,n){return[e].concat(ut(t,n))}if((r=i())!==o&&rt===e.length)return r;throw r!==o&&rt<e.length&&rm(rh()),rb(ru,ro<e.length?e.charAt(ro):null,ro<e.length?rv(ro,ro+1):rv(ro,ro))}(function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n})(t,Error),t.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?u(e.parts[t][0])+"-"+u(e.parts[t][1]):u(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return n[e.type](e)}function a(e){return e?'"'+o(e)+'"':"end of input"}return"Expected "+function(e){var t,n,r=Array(e.length);for(t=0;t<e.length;t++)r[t]=i(e[t]);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+a(t)+" found."},e.exports={SyntaxError:t,parse:n}},"./node_modules/pegjs/lib/peg.js":(e,t,n)=>{"use strict";var r=n("./node_modules/pegjs/lib/utils/arrays.js"),o=n("./node_modules/pegjs/lib/utils/objects.js"),u={VERSION:"0.10.0",GrammarError:n("./node_modules/pegjs/lib/grammar-error.js"),parser:n("./node_modules/pegjs/lib/parser.js"),compiler:n("./node_modules/pegjs/lib/compiler/index.js"),generate:function(e,t){function n(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=o.values(e[t]));return n}t=void 0!==t?t:{};var i="plugins"in(t=o.clone(t))?t.plugins:[],a={parser:u.parser,passes:n(u.compiler.passes)};return r.each(i,function(e){e.use(a,t)}),u.compiler.compile(a.parser.parse(e),a.passes,t)}};e.exports=u},"./node_modules/pegjs/lib/utils/arrays.js":e=>{"use strict";var t={range:function(e,t){var n,r,o=t-e,u=Array(o);for(n=0,r=e;n<o;n++,r++)u[n]=r;return u},find:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return e[n]}else for(n=0;n<r;n++)if(e[n]===t)return e[n]},indexOf:function(e,t){var n,r=e.length;if("function"==typeof t){for(n=0;n<r;n++)if(t(e[n]))return n}else for(n=0;n<r;n++)if(e[n]===t)return n;return -1},contains:function(e,n){return -1!==t.indexOf(e,n)},each:function(e,t){var n,r=e.length;for(n=0;n<r;n++)t(e[n],n)},map:function(e,t){var n,r=e.length,o=Array(r);for(n=0;n<r;n++)o[n]=t(e[n],n);return o},pluck:function(e,n){return t.map(e,function(e){return e[n]})},every:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(!t(e[n]))return!1;return!0},some:function(e,t){var n,r=e.length;for(n=0;n<r;n++)if(t(e[n]))return!0;return!1}};e.exports=t},"./node_modules/pegjs/lib/utils/classes.js":e=>{"use strict";e.exports={subclass:function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}}},"./node_modules/pegjs/lib/utils/objects.js":e=>{"use strict";e.exports={keys:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},values:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},defaults:function(e,t){var n;for(n in t)!t.hasOwnProperty(n)||n in e||(e[n]=t[n])}}},"./src/grammar.peg":e=>{e.exports="{\r\n    function flatten(a, acc = []) {\r\n        for (var i = 0; i < a.length; i++) {\r\n            if (Array.isArray(a[i])) {\r\n                flatten(a[i], acc);\r\n            } else {\r\n                acc.push(a[i]);\r\n            }\r\n        }\r\n        return acc;\r\n    }\r\n    function make_header(hn,hv) {\r\n        return {\r\n            name: hn,\r\n            value: hv\r\n        };\r\n    }\r\n    function make_move(move_number, move, nags, ravs, comments) {\r\n        var m = {};\r\n        if (move_number) m.move_number = move_number;\r\n        if (move) m.move = move;\r\n        if (nags && nags.length) m.nags = nags;\r\n        if (ravs && ravs.length) m.ravs = ravs;\r\n        if (comments) m.comments = comments;\r\n        return m;\r\n    }\r\n    function make_rav(comments, moves, result) {\r\n        return {\r\n            comments: flatten(comments),\r\n            moves, \r\n            result\r\n        };\r\n    }\r\n    function make_game(c0, hs, c1, m, r) {\r\n        return {\r\n            comments_above_header: c0,\r\n            headers: hs, \r\n            comments: c1,\r\n            moves: m || [],\r\n            result: r\r\n        };\r\n    }\r\n}\r\n\r\nstart = gs:(game newline*)* EOF {return gs.map(function(g) { return g[0]})}\r\n\r\ngame = \r\n    whitespace*\r\n    c0:comments?\r\n    whitespace*\r\n    h:headers? \r\n    c1:comments? \r\n    whitespace* \r\n    mr:(m:movetext whitespace+ r:result {return [m, r]} / r:result {return [null, r]}) \r\n    whitespace* {return make_game(c0, h, c1, mr[0], mr[1])}\r\n\r\nEOF = !.\r\ndouble_quote = '\"'\r\nstring = double_quote str:[^\"]* double_quote {return str.join('')}\r\ninteger = a:[1-9] b:[0-9]* {return parseInt(a+b.join(''), 10)}\r\nsymbol = chars:[A-Za-z0-9_-]+ {return chars.join('')}\r\nblank = ' '\r\nform_feed = '\\f'\r\ntab = '\\t'\r\ncarriage_return = '\\r'\r\nline_feed = '\\n'\r\nws = blank / form_feed / tab / carriage_return\r\nwhitespace = ws / newline\r\nnewline = line_feed\r\n\r\nheader = '[' hn:symbol ws+ hv:string ']' whitespace* { return make_header(hn,hv) }\r\nheaders = hs:header+ {return hs}\r\n\r\npiece = [NKQRB]\r\nrank = [a-h-]\r\nfile = [1-8-]\r\ncheck = \"+\"\r\ncheckmate = \"#\"\r\ncapture = \"x\"\r\nperiod = \".\"\r\nresult = \"1-0\" / \"0-1\" / \"*\" / \"1/2-1/2\"\r\nmove_number = mn:integer period? (period period)? {return mn}\r\nsquare = r:rank f:file {return r+f}\r\npromotion = \"=\"? [QRBN]\r\nnag = chars:(\"$\" integer) {return chars.join('')}\r\nnag_alts = \"!!\" / \"??\" / \"!?\" / \"?!\" / \"!\" / \"?\"\r\ncontinuation = period period period\r\ndisambiguation = (rank file) / rank / file\r\n\r\nmulti_line_comment_chars = [^}]\r\nmulti_line_comment = \"{\" cc:multi_line_comment_chars* \"}\" {return cc.join('');}\r\nsingle_line_comment_chars = [^\\n]\r\nsingle_line_comment = \";\" cc:single_line_comment_chars* newline {return cc.join('');}\r\ncommand_comment = '{' whitespace* cs:command+ whitespace* '}' {return cs;}\r\ncommand = '[%' key:command_key whitespace+ values:command_values ']' {return {key, values};}\r\ncommand_key = k:[a-zA-Z]+ {return k.join('');}\r\ncommand_value = v:[^,\\]]+ {return v.join('');}\r\ncommand_values = first:command_value rest:(',' command_value)* {return rest ? [first, ...flatten(rest).filter(function (cv) { return cv !== ','})] : [first];}\r\ncomment = c:(command_comment / multi_line_comment / single_line_comment) {return typeof c === 'string' ? {text: c} : {commands: c};}\r\ncomments = (whitespace* cs:comment {return cs;})+\r\n\r\npawn_half_move = (r:rank c:capture)? square promotion?\r\npiece_half_move = piece capture? square\r\npiece_disambiguation_half_move = piece disambiguation capture? square\r\ncastle_half_move = (\"O-O-O\" / \"O-O\")\r\n\r\nhalf_move = m:(continuation? \r\n    whitespace*\r\n    (castle_half_move / \r\n     piece_disambiguation_half_move / \r\n     piece_half_move / \r\n     pawn_half_move) \r\n    (check / checkmate)? \r\n    nag_alts?) {return flatten(m).join('');}\r\n\r\nmove = mn:move_number? \r\n       whitespace*\r\n       m:half_move \r\n       nags:(whitespace+ n:nag {return n})*\r\n       com:(whitespace+ c2:comment {return c2})* \r\n       ravs:(whitespace* r:rav {return r})*\r\n       {return make_move(mn, m, nags, ravs, com)}\r\n\r\nmovetext = first:move rest:(whitespace* move)* {return first ? [first].concat(rest.map(function(m) {return m[1]})) : []}\r\n\r\nrav = \"(\" \r\n    whitespace* \r\n    c:comments*\r\n    whitespace* \r\n    m:movetext \r\n    whitespace* \r\n    r:result?\r\n    whitespace*\r\n    \")\" {return make_rav(c, m, r)}\r\n"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}(()=>{__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t}})(),(()=>{__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})();var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>i,parse:()=>u});var e=__webpack_require__("./node_modules/pegjs/lib/peg.js"),t=__webpack_require__.n(e),n=__webpack_require__("./src/grammar.peg"),r=__webpack_require__.n(n);let o=t().generate(r()),u=e=>o.parse(e),i={parse:u}})(),__webpack_exports__})())},35165,e=>{e.v({board:"ChessBoard-module__yhzm_G__board",boardContainer:"ChessBoard-module__yhzm_G__boardContainer"})},70305,(e,t,n)=>{"use strict";var r=e.r(89762);function o(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var u="function"==typeof Object.is?Object.is:o,i=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return s(function(){o.value=n,o.getSnapshot=t,d(o)&&u({inst:o})},[e,n,t]),a(function(){return d(o)&&u({inst:o}),e(function(){d(o)&&u({inst:o})})},[e]),l(n),n}function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!u(e,n)}catch(e){return!0}}function f(e,t){return t()}var h="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?f:c;n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:h},34960,(e,t,n)=>{"use strict";t.exports=e.r(70305)},21665,(e,t,n)=>{"use strict";var r=e.r(89762),o=e.r(34960);function u(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var i="function"==typeof Object.is?Object.is:u,a=o.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,d=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var u=s(null);if(null===u.current){var f={hasValue:!1,value:null};u.current=f}else f=u.current;var h=a(e,(u=c(function(){function e(e){if(!s){if(s=!0,u=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return a=t}return a=e}if(t=a,i(u,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(u=e,t):(u=e,a=n)}var u,a,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,o]))[0],u[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),d(h),h}},96177,(e,t,n)=>{"use strict";t.exports=e.r(21665)},79381,(e,t,n)=>{t.exports=function(){this.__data__=[],this.size=0}},78744,(e,t,n)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},56755,(e,t,n)=>{var r=e.r(78744);t.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},66612,(e,t,n)=>{var r=e.r(56755),o=Array.prototype.splice;t.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},80256,(e,t,n)=>{var r=e.r(56755);t.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},52641,(e,t,n)=>{var r=e.r(56755);t.exports=function(e){return r(this.__data__,e)>-1}},26145,(e,t,n)=>{var r=e.r(56755);t.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},22416,(e,t,n)=>{var r=e.r(79381),o=e.r(66612),u=e.r(80256),i=e.r(52641),a=e.r(26145);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=u,s.prototype.has=i,s.prototype.set=a,t.exports=s},8027,(e,t,n)=>{var r=e.r(22416);t.exports=function(){this.__data__=new r,this.size=0}},5153,(e,t,n)=>{t.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},41364,(e,t,n)=>{t.exports=function(e){return this.__data__.get(e)}},89631,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},72668,(e,t,n)=>{t.exports=e.g&&e.g.Object===Object&&e.g},18408,(e,t,n)=>{var r=e.r(72668),o="object"==typeof self&&self&&self.Object===Object&&self;t.exports=r||o||Function("return this")()},7667,(e,t,n)=>{t.exports=e.r(18408).Symbol},52930,(e,t,n)=>{var r=e.r(7667),o=Object.prototype,u=o.hasOwnProperty,i=o.toString,a=r?r.toStringTag:void 0;t.exports=function(e){var t=u.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=i.call(e);return r&&(t?e[a]=n:delete e[a]),o}},21955,(e,t,n)=>{var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},23748,(e,t,n)=>{var r=e.r(7667),o=e.r(52930),u=e.r(21955),i="[object Null]",a="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?a:i:s&&s in Object(e)?o(e):u(e)}},91606,(e,t,n)=>{t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},63883,(e,t,n)=>{var r=e.r(23748),o=e.r(91606),u="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(e){if(!o(e))return!1;var t=r(e);return t==i||t==a||t==u||t==s}},56921,(e,t,n)=>{t.exports=e.r(18408)["__core-js_shared__"]},63803,(e,t,n)=>{var r=e.r(56921),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=function(e){return!!o&&o in e}},95331,(e,t,n)=>{var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},32150,(e,t,n)=>{var r=e.r(63883),o=e.r(63803),u=e.r(91606),i=e.r(95331),a=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,l=Object.prototype,c=Function.prototype.toString,d=l.hasOwnProperty,f=RegExp("^"+c.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!u(e)||o(e))&&(r(e)?f:s).test(i(e))}},61686,(e,t,n)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},22280,(e,t,n)=>{var r=e.r(32150),o=e.r(61686);t.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},74136,(e,t,n)=>{t.exports=e.r(22280)(e.r(18408),"Map")},95269,(e,t,n)=>{t.exports=e.r(22280)(Object,"create")},14640,(e,t,n)=>{var r=e.r(95269);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2814,(e,t,n)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},20134,(e,t,n)=>{var r=e.r(95269),o="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return u.call(t,e)?t[e]:void 0}},2951,(e,t,n)=>{var r=e.r(95269),o=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},79981,(e,t,n)=>{var r=e.r(95269),o="__lodash_hash_undefined__";t.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?o:t,this}},4937,(e,t,n)=>{var r=e.r(14640),o=e.r(2814),u=e.r(20134),i=e.r(2951),a=e.r(79981);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=u,s.prototype.has=i,s.prototype.set=a,t.exports=s},20895,(e,t,n)=>{var r=e.r(4937),o=e.r(22416),u=e.r(74136);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(u||o),string:new r}}},68725,(e,t,n)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},48365,(e,t,n)=>{var r=e.r(68725);t.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},91270,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},87911,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){return r(this,e).get(e)}},23680,(e,t,n)=>{var r=e.r(48365);t.exports=function(e){return r(this,e).has(e)}},27495,(e,t,n)=>{var r=e.r(48365);t.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=+(n.size!=o),this}},41177,(e,t,n)=>{var r=e.r(20895),o=e.r(91270),u=e.r(87911),i=e.r(23680),a=e.r(27495);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=u,s.prototype.has=i,s.prototype.set=a,t.exports=s},27270,(e,t,n)=>{var r=e.r(22416),o=e.r(74136),u=e.r(41177),i=200;t.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<i-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new u(a)}return n.set(e,t),this.size=n.size,this}},75266,(e,t,n)=>{var r=e.r(22416),o=e.r(8027),u=e.r(5153),i=e.r(41364),a=e.r(89631),s=e.r(27270);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=u,l.prototype.get=i,l.prototype.has=a,l.prototype.set=s,t.exports=l},39372,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},47474,(e,t,n)=>{var r=e.r(22280);t.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},30215,(e,t,n)=>{var r=e.r(47474);t.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},63217,(e,t,n)=>{var r=e.r(30215),o=e.r(78744),u=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){var i=e[t];u.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},6227,(e,t,n)=>{var r=e.r(63217),o=e.r(30215);t.exports=function(e,t,n,u){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=u?u(n[l],e[l],l,n,e):void 0;void 0===c&&(c=e[l]),i?o(n,l,c):r(n,l,c)}return n}},45203,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},19674,(e,t,n)=>{t.exports=function(e){return null!=e&&"object"==typeof e}},48313,(e,t,n)=>{var r=e.r(23748),o=e.r(19674),u="[object Arguments]";t.exports=function(e){return o(e)&&r(e)==u}},17288,(e,t,n)=>{var r=e.r(48313),o=e.r(19674),u=Object.prototype,i=u.hasOwnProperty,a=u.propertyIsEnumerable;t.exports=r(function(){return arguments}())?r:function(e){return o(e)&&i.call(e,"callee")&&!a.call(e,"callee")}},72098,(e,t,n)=>{t.exports=Array.isArray},24019,(e,t,n)=>{t.exports=function(){return!1}},85370,(e,t,n)=>{var r=e.r(18408),o=e.r(24019),u=n&&!n.nodeType&&n,i=u&&t&&!t.nodeType&&t,a=i&&i.exports===u?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||o},29582,(e,t,n)=>{var r=0x1fffffffffffff,o=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&o.test(e))&&e>-1&&e%1==0&&e<t}},45373,(e,t,n)=>{var r=0x1fffffffffffff;t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}},19575,(e,t,n)=>{var r=e.r(23748),o=e.r(45373),u=e.r(19674),i="[object Arguments]",a="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",E="[object DataView]",_="[object Float64Array]",A="[object Int8Array]",x="[object Int16Array]",C="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",k="[object Uint16Array]",F="[object Uint32Array]",D={};D["[object Float32Array]"]=D[_]=D[A]=D[x]=D[C]=D[w]=D[S]=D[k]=D[F]=!0,D[i]=D[a]=D[b]=D[s]=D[E]=D[l]=D[c]=D[d]=D[f]=D[h]=D[p]=D[g]=D[v]=D[m]=D[y]=!1,t.exports=function(e){return u(e)&&o(e.length)&&!!D[r(e)]}},32900,(e,t,n)=>{t.exports=function(e){return function(t){return e(t)}}},45361,(e,t,n)=>{var r=e.r(72668),o=n&&!n.nodeType&&n,u=o&&t&&!t.nodeType&&t,i=u&&u.exports===o&&r.process;t.exports=function(){try{var e=u&&u.require&&u.require("util").types;if(e)return e;return i&&i.binding&&i.binding("util")}catch(e){}}()},13376,(e,t,n)=>{var r=e.r(19575),o=e.r(32900),u=e.r(45361),i=u&&u.isTypedArray;t.exports=i?o(i):r},27424,(e,t,n)=>{var r=e.r(45203),o=e.r(17288),u=e.r(72098),i=e.r(85370),a=e.r(29582),s=e.r(13376),l=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=u(e),c=!n&&o(e),d=!n&&!c&&i(e),f=!n&&!c&&!d&&s(e),h=n||c||d||f,p=h?r(e.length,String):[],g=p.length;for(var v in e)(t||l.call(e,v))&&!(h&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g)))&&p.push(v);return p}},70795,(e,t,n)=>{var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},91915,(e,t,n)=>{t.exports=function(e,t){return function(n){return e(t(n))}}},42918,(e,t,n)=>{t.exports=e.r(91915)(Object.keys,Object)},3114,(e,t,n)=>{var r=e.r(70795),o=e.r(42918),u=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))u.call(e,n)&&"constructor"!=n&&t.push(n);return t}},7850,(e,t,n)=>{var r=e.r(63883),o=e.r(45373);t.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},33089,(e,t,n)=>{var r=e.r(27424),o=e.r(3114),u=e.r(7850);t.exports=function(e){return u(e)?r(e):o(e)}},8687,(e,t,n)=>{var r=e.r(6227),o=e.r(33089);t.exports=function(e,t){return e&&r(t,o(t),e)}},42151,(e,t,n)=>{t.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},6645,(e,t,n)=>{var r=e.r(91606),o=e.r(70795),u=e.r(42151),i=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return u(e);var t=o(e),n=[];for(var a in e)"constructor"==a&&(t||!i.call(e,a))||n.push(a);return n}},75419,(e,t,n)=>{var r=e.r(27424),o=e.r(6645),u=e.r(7850);t.exports=function(e){return u(e)?r(e,!0):o(e)}},20341,(e,t,n)=>{var r=e.r(6227),o=e.r(75419);t.exports=function(e,t){return e&&r(t,o(t),e)}},44242,(e,t,n)=>{var r=e.r(18408),o=n&&!n.nodeType&&n,u=o&&t&&!t.nodeType&&t,i=u&&u.exports===o?r.Buffer:void 0,a=i?i.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},33442,(e,t,n)=>{t.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},19519,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,u=[];++n<r;){var i=e[n];t(i,n,e)&&(u[o++]=i)}return u}},87024,(e,t,n)=>{t.exports=function(){return[]}},96852,(e,t,n)=>{var r=e.r(19519),o=e.r(87024),u=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;t.exports=i?function(e){return null==e?[]:r(i(e=Object(e)),function(t){return u.call(e,t)})}:o},3332,(e,t,n)=>{var r=e.r(6227),o=e.r(96852);t.exports=function(e,t){return r(e,o(e),t)}},34666,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},30968,(e,t,n)=>{t.exports=e.r(91915)(Object.getPrototypeOf,Object)},29830,(e,t,n)=>{var r=e.r(34666),o=e.r(30968),u=e.r(96852),i=e.r(87024);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,u(e)),e=o(e);return t}:i},83664,(e,t,n)=>{var r=e.r(6227),o=e.r(29830);t.exports=function(e,t){return r(e,o(e),t)}},41612,(e,t,n)=>{var r=e.r(34666),o=e.r(72098);t.exports=function(e,t,n){var u=t(e);return o(e)?u:r(u,n(e))}},28423,(e,t,n)=>{var r=e.r(41612),o=e.r(96852),u=e.r(33089);t.exports=function(e){return r(e,u,o)}},26640,(e,t,n)=>{var r=e.r(41612),o=e.r(29830),u=e.r(75419);t.exports=function(e){return r(e,u,o)}},31751,(e,t,n)=>{t.exports=e.r(22280)(e.r(18408),"DataView")},31337,(e,t,n)=>{t.exports=e.r(22280)(e.r(18408),"Promise")},11524,(e,t,n)=>{t.exports=e.r(22280)(e.r(18408),"Set")},15942,(e,t,n)=>{t.exports=e.r(22280)(e.r(18408),"WeakMap")},26568,(e,t,n)=>{var r=e.r(31751),o=e.r(74136),u=e.r(31337),i=e.r(11524),a=e.r(15942),s=e.r(23748),l=e.r(95331),c="[object Map]",d="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",v=l(r),m=l(o),y=l(u),b=l(i),E=l(a),_=s;(r&&_(new r(new ArrayBuffer(1)))!=g||o&&_(new o)!=c||u&&_(u.resolve())!=f||i&&_(new i)!=h||a&&_(new a)!=p)&&(_=function(e){var t=s(e),n=t==d?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case v:return g;case m:return c;case y:return f;case b:return h;case E:return p}return t}),t.exports=_},37208,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},33576,(e,t,n)=>{t.exports=e.r(18408).Uint8Array},88187,(e,t,n)=>{var r=e.r(33576);t.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},55438,(e,t,n)=>{var r=e.r(88187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},97169,(e,t,n)=>{var r=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},90793,(e,t,n)=>{var r=e.r(7667),o=r?r.prototype:void 0,u=o?o.valueOf:void 0;t.exports=function(e){return u?Object(u.call(e)):{}}},51235,(e,t,n)=>{var r=e.r(88187);t.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},99513,(e,t,n)=>{var r=e.r(88187),o=e.r(55438),u=e.r(97169),i=e.r(90793),a=e.r(51235),s="[object Boolean]",l="[object Date]",c="[object Map]",d="[object Number]",f="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",m="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",E="[object Int8Array]",_="[object Int16Array]",A="[object Int32Array]",x="[object Uint8Array]",C="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]";t.exports=function(e,t,n){var k=e.constructor;switch(t){case v:return r(e);case s:case l:return new k(+e);case m:return o(e,n);case y:case b:case E:case _:case A:case x:case C:case w:case S:return a(e,n);case c:return new k;case d:case p:return new k(e);case f:return u(e);case h:return new k;case g:return i(e)}}},69416,(e,t,n)=>{var r=e.r(91606),o=Object.create;t.exports=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},7299,(e,t,n)=>{var r=e.r(69416),o=e.r(30968),u=e.r(70795);t.exports=function(e){return"function"!=typeof e.constructor||u(e)?{}:r(o(e))}},44732,(e,t,n)=>{var r=e.r(26568),o=e.r(19674),u="[object Map]";t.exports=function(e){return o(e)&&r(e)==u}},49084,(e,t,n)=>{var r=e.r(44732),o=e.r(32900),u=e.r(45361),i=u&&u.isMap;t.exports=i?o(i):r},92596,(e,t,n)=>{var r=e.r(26568),o=e.r(19674),u="[object Set]";t.exports=function(e){return o(e)&&r(e)==u}},91316,(e,t,n)=>{var r=e.r(92596),o=e.r(32900),u=e.r(45361),i=u&&u.isSet;t.exports=i?o(i):r},16543,(e,t,n)=>{var r=e.r(75266),o=e.r(39372),u=e.r(63217),i=e.r(8687),a=e.r(20341),s=e.r(44242),l=e.r(33442),c=e.r(3332),d=e.r(83664),f=e.r(28423),h=e.r(26640),p=e.r(26568),g=e.r(37208),v=e.r(99513),m=e.r(7299),y=e.r(72098),b=e.r(85370),E=e.r(49084),_=e.r(91606),A=e.r(91316),x=e.r(33089),C=e.r(75419),w=1,S=2,k=4,F="[object Arguments]",D="[object Array]",B="[object Boolean]",P="[object Date]",j="[object Error]",N="[object Function]",M="[object GeneratorFunction]",O="[object Map]",$="[object Number]",R="[object Object]",I="[object RegExp]",L="[object Set]",T="[object String]",z="[object Symbol]",U="[object WeakMap]",H="[object ArrayBuffer]",q="[object DataView]",K="[object Float32Array]",V="[object Float64Array]",W="[object Int8Array]",G="[object Int16Array]",X="[object Int32Array]",Y="[object Uint8Array]",Z="[object Uint8ClampedArray]",Q="[object Uint16Array]",J="[object Uint32Array]",ee={};function et(e,t,n,D,B,P){var j,O=t&w,$=t&S,I=t&k;if(n&&(j=B?n(e,D,B,P):n(e)),void 0!==j)return j;if(!_(e))return e;var L=y(e);if(L){if(j=g(e),!O)return l(e,j)}else{var T=p(e),z=T==N||T==M;if(b(e))return s(e,O);if(T==R||T==F||z&&!B){if(j=$||z?{}:m(e),!O)return $?d(e,a(j,e)):c(e,i(j,e))}else{if(!ee[T])return B?e:{};j=v(e,T,O)}}P||(P=new r);var U=P.get(e);if(U)return U;P.set(e,j),A(e)?e.forEach(function(r){j.add(et(r,t,n,r,e,P))}):E(e)&&e.forEach(function(r,o){j.set(o,et(r,t,n,o,e,P))});var H=I?$?h:f:$?C:x,q=L?void 0:H(e);return o(q||e,function(r,o){q&&(r=e[o=r]),u(j,o,et(r,t,n,o,e,P))}),j}ee[F]=ee[D]=ee[H]=ee[q]=ee[B]=ee[P]=ee[K]=ee[V]=ee[W]=ee[G]=ee[X]=ee[O]=ee[$]=ee[R]=ee[I]=ee[L]=ee[T]=ee[z]=ee[Y]=ee[Z]=ee[Q]=ee[J]=!0,ee[j]=ee[N]=ee[U]=!1,t.exports=et},84886,(e,t,n)=>{var r=e.r(16543),o=4;t.exports=function(e){return r(e,o)}},60220,(e,t,n)=>{t.exports=function(e){return function(){return e}}},2327,(e,t,n)=>{t.exports=function(e){return function(t,n,r){for(var o=-1,u=Object(t),i=r(t),a=i.length;a--;){var s=i[e?a:++o];if(!1===n(u[s],s,u))break}return t}}},10673,(e,t,n)=>{t.exports=e.r(2327)()},88607,(e,t,n)=>{var r=e.r(10673),o=e.r(33089);t.exports=function(e,t){return e&&r(e,t,o)}},37390,(e,t,n)=>{var r=e.r(7850);t.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var u=n.length,i=t?u:-1,a=Object(n);(t?i--:++i<u)&&!1!==o(a[i],i,a););return n}}},35496,(e,t,n)=>{var r=e.r(88607);t.exports=e.r(37390)(r)},13870,(e,t,n)=>{t.exports=function(e){return e}},35310,(e,t,n)=>{var r=e.r(13870);t.exports=function(e){return"function"==typeof e?e:r}},7059,(e,t,n)=>{var r=e.r(39372),o=e.r(35496),u=e.r(35310),i=e.r(72098);t.exports=function(e,t){return(i(e)?r:o)(e,u(t))}},33763,(e,t,n)=>{t.exports=e.r(7059)},17164,(e,t,n)=>{var r=e.r(35496);t.exports=function(e,t){var n=[];return r(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}},47370,(e,t,n)=>{var r="__lodash_hash_undefined__";t.exports=function(e){return this.__data__.set(e,r),this}},3852,(e,t,n)=>{t.exports=function(e){return this.__data__.has(e)}},25964,(e,t,n)=>{var r=e.r(41177),o=e.r(47370),u=e.r(3852);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=u,t.exports=i},77484,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},89808,(e,t,n)=>{t.exports=function(e,t){return e.has(t)}},75483,(e,t,n)=>{var r=e.r(25964),o=e.r(77484),u=e.r(89808),i=1,a=2;t.exports=function(e,t,n,s,l,c){var d=n&i,f=e.length,h=t.length;if(f!=h&&!(d&&h>f))return!1;var p=c.get(e),g=c.get(t);if(p&&g)return p==t&&g==e;var v=-1,m=!0,y=n&a?new r:void 0;for(c.set(e,t),c.set(t,e);++v<f;){var b=e[v],E=t[v];if(s)var _=d?s(E,b,v,t,e,c):s(b,E,v,e,t,c);if(void 0!==_){if(_)continue;m=!1;break}if(y){if(!o(t,function(e,t){if(!u(y,t)&&(b===e||l(b,e,n,s,c)))return y.push(t)})){m=!1;break}}else if(!(b===E||l(b,E,n,s,c))){m=!1;break}}return c.delete(e),c.delete(t),m}},80060,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},49123,(e,t,n)=>{t.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},39965,(e,t,n)=>{var r=e.r(7667),o=e.r(33576),u=e.r(78744),i=e.r(75483),a=e.r(80060),s=e.r(49123),l=1,c=2,d="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",v="[object RegExp]",m="[object Set]",y="[object String]",b="[object Symbol]",E="[object ArrayBuffer]",_="[object DataView]",A=r?r.prototype:void 0,x=A?A.valueOf:void 0;t.exports=function(e,t,n,r,A,C,w){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case E:if(e.byteLength!=t.byteLength||!C(new o(e),new o(t)))break;return!0;case d:case f:case g:return u(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case y:return e==t+"";case p:var S=a;case m:var k=r&l;if(S||(S=s),e.size!=t.size&&!k)break;var F=w.get(e);if(F)return F==t;r|=c,w.set(e,t);var D=i(S(e),S(t),r,A,C,w);return w.delete(e),D;case b:if(x)return x.call(e)==x.call(t)}return!1}},3206,(e,t,n)=>{var r=e.r(28423),o=1,u=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,i,a,s){var l=n&o,c=r(e),d=c.length;if(d!=r(t).length&&!l)return!1;for(var f=d;f--;){var h=c[f];if(!(l?h in t:u.call(t,h)))return!1}var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=l;++f<d;){var y=e[h=c[f]],b=t[h];if(i)var E=l?i(b,y,h,t,e,s):i(y,b,h,e,t,s);if(!(void 0===E?y===b||a(y,b,n,i,s):E)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=e.constructor,A=t.constructor;_!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof A&&A instanceof A)&&(v=!1)}return s.delete(e),s.delete(t),v}},54525,(e,t,n)=>{var r=e.r(75266),o=e.r(75483),u=e.r(39965),i=e.r(3206),a=e.r(26568),s=e.r(72098),l=e.r(85370),c=e.r(13376),d=1,f="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(e,t,n,v,m,y){var b=s(e),E=s(t),_=b?h:a(e),A=E?h:a(t);_=_==f?p:_,A=A==f?p:A;var x=_==p,C=A==p,w=_==A;if(w&&l(e)){if(!l(t))return!1;b=!0,x=!1}if(w&&!x)return y||(y=new r),b||c(e)?o(e,t,n,v,m,y):u(e,t,_,n,v,m,y);if(!(n&d)){var S=x&&g.call(e,"__wrapped__"),k=C&&g.call(t,"__wrapped__");if(S||k){var F=S?e.value():e,D=k?t.value():t;return y||(y=new r),m(F,D,n,v,y)}}return!!w&&(y||(y=new r),i(e,t,n,v,m,y))}},33698,(e,t,n)=>{var r=e.r(54525),o=e.r(19674);function u(e,t,n,i,a){return e===t||(null!=e&&null!=t&&(o(e)||o(t))?r(e,t,n,i,u,a):e!=e&&t!=t)}t.exports=u},20868,(e,t,n)=>{var r=e.r(75266),o=e.r(33698),u=1,i=2;t.exports=function(e,t,n,a){var s=n.length,l=s,c=!a;if(null==e)return!l;for(e=Object(e);s--;){var d=n[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<l;){var f=(d=n[s])[0],h=e[f],p=d[1];if(c&&d[2]){if(void 0===h&&!(f in e))return!1}else{var g=new r;if(a)var v=a(h,p,f,e,t,g);if(!(void 0===v?o(p,h,u|i,a,g):v))return!1}}return!0}},10150,(e,t,n)=>{var r=e.r(91606);t.exports=function(e){return e==e&&!r(e)}},48736,(e,t,n)=>{var r=e.r(10150),o=e.r(33089);t.exports=function(e){for(var t=o(e),n=t.length;n--;){var u=t[n],i=e[u];t[n]=[u,i,r(i)]}return t}},6400,(e,t,n)=>{t.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},30828,(e,t,n)=>{var r=e.r(20868),o=e.r(48736),u=e.r(6400);t.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?u(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},48664,(e,t,n)=>{var r=e.r(23748),o=e.r(19674),u="[object Symbol]";t.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==u}},62931,(e,t,n)=>{var r=e.r(72098),o=e.r(48664),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;t.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||o(e))||i.test(e)||!u.test(e)||null!=t&&e in Object(t)}},97230,(e,t,n)=>{var r=e.r(41177),o="Expected a function";function u(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],u=n.cache;if(u.has(o))return u.get(o);var i=e.apply(this,r);return n.cache=u.set(o,i)||u,i};return n.cache=new(u.Cache||r),n}u.Cache=r,t.exports=u},43096,(e,t,n)=>{var r=e.r(97230),o=500;t.exports=function(e){var t=r(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}},59461,(e,t,n)=>{var r=e.r(43096),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g;t.exports=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(u,"$1"):n||e)}),t})},66536,(e,t,n)=>{t.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},1596,(e,t,n)=>{var r=e.r(7667),o=e.r(66536),u=e.r(72098),i=e.r(48664),a=1/0,s=r?r.prototype:void 0,l=s?s.toString:void 0;function c(e){if("string"==typeof e)return e;if(u(e))return o(e,c)+"";if(i(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-a?"-0":t}t.exports=c},84016,(e,t,n)=>{var r=e.r(1596);t.exports=function(e){return null==e?"":r(e)}},60575,(e,t,n)=>{var r=e.r(72098),o=e.r(62931),u=e.r(59461),i=e.r(84016);t.exports=function(e,t){return r(e)?e:o(e,t)?[e]:u(i(e))}},28359,(e,t,n)=>{var r=e.r(48664),o=1/0;t.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},47449,(e,t,n)=>{var r=e.r(60575),o=e.r(28359);t.exports=function(e,t){t=r(t,e);for(var n=0,u=t.length;null!=e&&n<u;)e=e[o(t[n++])];return n&&n==u?e:void 0}},61317,(e,t,n)=>{var r=e.r(47449);t.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},7831,(e,t,n)=>{t.exports=function(e,t){return null!=e&&t in Object(e)}},60492,(e,t,n)=>{var r=e.r(60575),o=e.r(17288),u=e.r(72098),i=e.r(29582),a=e.r(45373),s=e.r(28359);t.exports=function(e,t,n){t=r(t,e);for(var l=-1,c=t.length,d=!1;++l<c;){var f=s(t[l]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++l!=c?d:!!(c=null==e?0:e.length)&&a(c)&&i(f,c)&&(u(e)||o(e))}},98814,(e,t,n)=>{var r=e.r(7831),o=e.r(60492);t.exports=function(e,t){return null!=e&&o(e,t,r)}},92764,(e,t,n)=>{var r=e.r(33698),o=e.r(61317),u=e.r(98814),i=e.r(62931),a=e.r(10150),s=e.r(6400),l=e.r(28359),c=1,d=2;t.exports=function(e,t){return i(e)&&a(t)?s(l(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?u(n,e):r(t,i,c|d)}}},18114,(e,t,n)=>{t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},49286,(e,t,n)=>{var r=e.r(47449);t.exports=function(e){return function(t){return r(t,e)}}},71318,(e,t,n)=>{var r=e.r(18114),o=e.r(49286),u=e.r(62931),i=e.r(28359);t.exports=function(e){return u(e)?r(i(e)):o(e)}},57529,(e,t,n)=>{var r=e.r(30828),o=e.r(92764),u=e.r(13870),i=e.r(72098),a=e.r(71318);t.exports=function(e){return"function"==typeof e?e:null==e?u:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):a(e)}},58862,(e,t,n)=>{var r=e.r(19519),o=e.r(17164),u=e.r(57529),i=e.r(72098);t.exports=function(e,t){return(i(e)?r:o)(e,u(t,3))}},94110,(e,t,n)=>{var r=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&r.call(e,t)}},41054,(e,t,n)=>{var r=e.r(94110),o=e.r(60492);t.exports=function(e,t){return null!=e&&o(e,t,r)}},20686,(e,t,n)=>{var r=e.r(3114),o=e.r(26568),u=e.r(17288),i=e.r(72098),a=e.r(7850),s=e.r(85370),l=e.r(70795),c=e.r(13376),d="[object Map]",f="[object Set]",h=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(a(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||c(e)||u(e)))return!e.length;var t=o(e);if(t==d||t==f)return!e.size;if(l(e))return!r(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},19597,(e,t,n)=>{t.exports=function(e){return void 0===e}},92255,(e,t,n)=>{var r=e.r(35496),o=e.r(7850);t.exports=function(e,t){var n=-1,u=o(e)?Array(e.length):[];return r(e,function(e,r,o){u[++n]=t(e,r,o)}),u}},85773,(e,t,n)=>{var r=e.r(66536),o=e.r(57529),u=e.r(92255),i=e.r(72098);t.exports=function(e,t){return(i(e)?r:u)(e,o(t,3))}},48625,(e,t,n)=>{t.exports=function(e,t,n,r){var o=-1,u=null==e?0:e.length;for(r&&u&&(n=e[++o]);++o<u;)n=t(n,e[o],o,e);return n}},51488,(e,t,n)=>{t.exports=function(e,t,n,r,o){return o(e,function(e,o,u){n=r?(r=!1,e):t(n,e,o,u)}),n}},2516,(e,t,n)=>{var r=e.r(48625),o=e.r(35496),u=e.r(57529),i=e.r(51488),a=e.r(72098);t.exports=function(e,t,n){var s=a(e)?r:i,l=arguments.length<3;return s(e,u(t,4),n,l,o)}},55221,(e,t,n)=>{var r=e.r(23748),o=e.r(72098),u=e.r(19674),i="[object String]";t.exports=function(e){return"string"==typeof e||!o(e)&&u(e)&&r(e)==i}},61436,(e,t,n)=>{t.exports=e.r(18114)("length")},26970,(e,t,n)=>{var r=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return r.test(e)}},7812,(e,t,n)=>{var r="\ud800-\udfff",o="["+r+"]",u="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\ud83c[\udffb-\udfff]",a="[^"+r+"]",s="(?:\ud83c[\udde6-\uddff]){2}",l="[\ud800-\udbff][\udc00-\udfff]",c="(?:"+u+"|"+i+")?",d="[\\ufe0e\\ufe0f]?",f="(?:\\u200d(?:"+[a,s,l].join("|")+")"+d+c+")*",h=d+c+f,p=RegExp(i+"(?="+i+")|"+("(?:"+[a+u+"?",u,s,l,o].join("|"))+")"+h,"g");t.exports=function(e){for(var t=p.lastIndex=0;p.test(e);)++t;return t}},50166,(e,t,n)=>{var r=e.r(61436),o=e.r(26970),u=e.r(7812);t.exports=function(e){return o(e)?u(e):r(e)}},25184,(e,t,n)=>{var r=e.r(3114),o=e.r(26568),u=e.r(7850),i=e.r(55221),a=e.r(50166),s="[object Map]",l="[object Set]";t.exports=function(e){if(null==e)return 0;if(u(e))return i(e)?a(e):e.length;var t=o(e);return t==s||t==l?e.size:r(e).length}},65867,(e,t,n)=>{var r=e.r(39372),o=e.r(69416),u=e.r(88607),i=e.r(57529),a=e.r(30968),s=e.r(72098),l=e.r(85370),c=e.r(63883),d=e.r(91606),f=e.r(13376);t.exports=function(e,t,n){var h=s(e),p=h||l(e)||f(e);if(t=i(t,4),null==n){var g=e&&e.constructor;n=p?h?new g:[]:d(e)&&c(g)?o(a(e)):{}}return(p?r:u)(e,function(e,r,o){return t(n,e,r,o)}),n}},25980,(e,t,n)=>{var r=e.r(7667),o=e.r(17288),u=e.r(72098),i=r?r.isConcatSpreadable:void 0;t.exports=function(e){return u(e)||o(e)||!!(i&&e&&e[i])}},77735,(e,t,n)=>{var r=e.r(34666),o=e.r(25980);function u(e,t,n,i,a){var s=-1,l=e.length;for(n||(n=o),a||(a=[]);++s<l;){var c=e[s];t>0&&n(c)?t>1?u(c,t-1,n,i,a):r(a,c):i||(a[a.length]=c)}return a}t.exports=u},4653,(e,t,n)=>{t.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},76255,(e,t,n)=>{var r=e.r(4653),o=Math.max;t.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var u=arguments,i=-1,a=o(u.length-t,0),s=Array(a);++i<a;)s[i]=u[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=u[i];return l[t]=n(s),r(e,this,l)}}},27001,(e,t,n)=>{var r=e.r(60220),o=e.r(47474),u=e.r(13870);t.exports=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:u},87094,(e,t,n)=>{var r=800,o=16,u=Date.now;t.exports=function(e){var t=0,n=0;return function(){var i=u(),a=o-(i-n);if(n=i,a>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},89463,(e,t,n)=>{var r=e.r(27001);t.exports=e.r(87094)(r)},86521,(e,t,n)=>{var r=e.r(13870),o=e.r(76255),u=e.r(89463);t.exports=function(e,t){return u(o(e,t,r),e+"")}},33245,(e,t,n)=>{t.exports=function(e,t,n,r){for(var o=e.length,u=n+(r?1:-1);r?u--:++u<o;)if(t(e[u],u,e))return u;return -1}},31623,(e,t,n)=>{t.exports=function(e){return e!=e}},79656,(e,t,n)=>{t.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return -1}},47235,(e,t,n)=>{var r=e.r(33245),o=e.r(31623),u=e.r(79656);t.exports=function(e,t,n){return t==t?u(e,t,n):r(e,o,n)}},7873,(e,t,n)=>{var r=e.r(47235);t.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},76780,(e,t,n)=>{t.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},23169,(e,t,n)=>{t.exports=function(){}},56741,(e,t,n)=>{var r=e.r(11524),o=e.r(23169),u=e.r(49123),i=1/0;t.exports=r&&1/u(new r([,-0]))[1]==i?function(e){return new r(e)}:o},62952,(e,t,n)=>{var r=e.r(25964),o=e.r(7873),u=e.r(76780),i=e.r(89808),a=e.r(56741),s=e.r(49123),l=200;t.exports=function(e,t,n){var c=-1,d=o,f=e.length,h=!0,p=[],g=p;if(n)h=!1,d=u;else if(f>=l){var v=t?null:a(e);if(v)return s(v);h=!1,d=i,g=new r}else g=t?[]:p;e:for(;++c<f;){var m=e[c],y=t?t(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var b=g.length;b--;)if(g[b]===y)continue e;t&&g.push(y),p.push(m)}else d(g,y,n)||(g!==p&&g.push(y),p.push(m))}return p}},36526,(e,t,n)=>{var r=e.r(7850),o=e.r(19674);t.exports=function(e){return o(e)&&r(e)}},39236,(e,t,n)=>{var r=e.r(77735),o=e.r(86521),u=e.r(62952),i=e.r(36526);t.exports=o(function(e){return u(r(e,1,i,!0))})},87891,(e,t,n)=>{var r=e.r(66536);t.exports=function(e,t){return r(t,function(t){return e[t]})}},28315,(e,t,n)=>{var r=e.r(87891),o=e.r(33089);t.exports=function(e){return null==e?[]:r(e,o(e))}},46276,(e,t,n)=>{var r;try{r={clone:e.r(84886),constant:e.r(60220),each:e.r(33763),filter:e.r(58862),has:e.r(41054),isArray:e.r(72098),isEmpty:e.r(20686),isFunction:e.r(63883),isUndefined:e.r(19597),keys:e.r(33089),map:e.r(85773),reduce:e.r(2516),size:e.r(25184),transform:e.r(65867),union:e.r(39236),values:e.r(28315)}}catch(e){}r||(r=window._),t.exports=r},34269,(e,t,n)=>{"use strict";var r=e.r(46276);t.exports=a;var o="\0",u="\0",i="\x01";function a(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[u]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(e,t){e[t]?e[t]++:e[t]=1}function l(e,t){--e[t]||delete e[t]}function c(e,t,n,u){var a=""+t,s=""+n;if(!e&&a>s){var l=a;a=s,s=l}return a+i+s+i+(r.isUndefined(u)?o:u)}function d(e,t,n,r){var o=""+t,u=""+n;if(!e&&o>u){var i=o;o=u,u=i}var a={v:o,w:u};return r&&(a.name=r),a}function f(e,t){return c(e,t.v,t.w,t.name)}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(e){return this._label=e,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return r.keys(this._nodes)},a.prototype.sources=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._in[t])})},a.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),function(t){return r.isEmpty(e._out[t])})},a.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,function(e){n.length>1?o.setNode(e,t):o.setNode(e)}),this},a.prototype.setNode=function(e,t){return r.has(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=u,this._children[e]={},this._children[u][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},a.prototype.node=function(e){return this._nodes[e]},a.prototype.hasNode=function(e){return r.has(this._nodes,e)},a.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},a.prototype.setParent=function(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t=u;else{t+="";for(var n=t;!r.isUndefined(n);n=this.parent(n))if(n===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},a.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},a.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==u)return t}},a.prototype.children=function(e){if(r.isUndefined(e)&&(e=u),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else if(e===u)return this.nodes();else if(this.hasNode(e))return[]},a.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},a.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},a.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},a.prototype.isLeaf=function(e){var t;return 0===(t=this.isDirected()?this.successors(e):this.neighbors(e)).length},a.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){e(r)&&t.setNode(r,n)}),r.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});var o={};function u(e){var r=n.parent(e);return void 0===r||t.hasNode(r)?(o[e]=r,r):r in o?o[r]:u(r)}return this._isCompound&&r.each(t.nodes(),function(e){t.setParent(e,u(e))}),t},a.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return r.values(this._edgeObjs)},a.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r}),this},a.prototype.setEdge=function(){var e,t,n,o,u=!1,i=arguments[0];"object"==typeof i&&null!==i&&"v"in i?(e=i.v,t=i.w,n=i.name,2==arguments.length&&(o=arguments[1],u=!0)):(e=i,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],u=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var a=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,a))return u&&(this._edgeLabels[a]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=u?o:this._defaultEdgeLabelFn(e,t,n);var l=d(this._isDirected,e,t,n);return e=l.v,t=l.w,Object.freeze(l),this._edgeObjs[a]=l,s(this._preds[t],e),s(this._sucs[e],t),this._in[t][a]=l,this._out[e][a]=l,this._edgeCount++,this},a.prototype.edge=function(e,t,n){var r=1==arguments.length?f(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},a.prototype.hasEdge=function(e,t,n){var o=1==arguments.length?f(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},a.prototype.removeEdge=function(e,t,n){var r=1==arguments.length?f(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],l(this._preds[t],e),l(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},a.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,function(e){return e.v===t}):o}},a.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,function(e){return e.w===t}):o}},a.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},60831,(e,t,n)=>{t.exports="2.1.8"},7924,(e,t,n)=>{t.exports={Graph:e.r(34269),version:e.r(60831)}},85305,(e,t,n)=>{var r=e.r(46276),o=e.r(34269);function u(e){return r.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),u={v:t};return r.isUndefined(n)||(u.value=n),r.isUndefined(o)||(u.parent=o),u})}function i(e){return r.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o})}t.exports={write:function e(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:u(e),edges:i(e)};return r.isUndefined(e.graph())||(t.value=r.clone(e.graph())),t},read:function e(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),r.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},9992,(e,t,n)=>{var r=e.r(46276);t.exports=function e(e){var t,n={},o=[];function u(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),u),r.each(e.predecessors(o),u))}return r.each(e.nodes(),function(e){t=[],u(e),t.length&&o.push(t)}),o}},59757,(e,t,n)=>{var r=e.r(46276);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map(function(e){return e.key})},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,u=o.length;return n[e]=u,o.push({key:e,priority:t}),this._decrease(u),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],u=n[t];n[e]=u,n[t]=o,r[u.key]=e,r[o.key]=t}},35767,(e,t,n)=>{var r=e.r(46276),o=e.r(59757);t.exports=i;var u=r.constant(1);function i(e,t,n,r){return a(e,String(t),n||u,r||function(t){return e.outEdges(t)})}function a(e,t,n,r){var u,i,a={},s=new o,l=function(e){var t=e.v!==u?e.v:e.w,r=a[t],o=n(e),l=i.distance+o;if(o<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=u,s.decrease(t,l))};for(e.nodes().forEach(function(e){var n=e===t?0:1/0;a[e]={distance:n},s.add(e,n)});s.size()>0&&(i=a[u=s.removeMin()]).distance!==1/0;)r(u).forEach(l);return a}},39340,(e,t,n)=>{var r=e.r(35767),o=e.r(46276);t.exports=function e(e,t,n){return o.transform(e.nodes(),function(o,u){o[u]=r(e,u,t,n)},{})}},24036,(e,t,n)=>{var r=e.r(46276);t.exports=function e(e){var t=0,n=[],o={},u=[];function i(a){var s=o[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach(function(e){r.has(o,e)?o[e].onStack&&(s.lowlink=Math.min(s.lowlink,o[e].index)):(i(e),s.lowlink=Math.min(s.lowlink,o[e].lowlink))}),s.lowlink===s.index){var l,c=[];do o[l=n.pop()].onStack=!1,c.push(l);while(a!==l)u.push(c)}}return e.nodes().forEach(function(e){r.has(o,e)||i(e)}),u}},25585,(e,t,n)=>{var r=e.r(46276),o=e.r(24036);t.exports=function e(e){return r.filter(o(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},46753,(e,t,n)=>{var r=e.r(46276);t.exports=u;var o=r.constant(1);function u(e,t,n){return i(e,t||o,n||function(t){return e.outEdges(t)})}function i(e,t,n){var r={},o=e.nodes();return o.forEach(function(e){r[e]={},r[e][e]={distance:0},o.forEach(function(t){e!==t&&(r[e][t]={distance:1/0})}),n(e).forEach(function(n){var o=n.v===e?n.w:n.v,u=t(n);r[e][o]={distance:u,predecessor:e}})}),o.forEach(function(e){var t=r[e];o.forEach(function(n){var u=r[n];o.forEach(function(n){var r=u[e],o=t[n],i=u[n],a=r.distance+o.distance;a<i.distance&&(i.distance=a,i.predecessor=o.predecessor)})})}),r}},95090,(e,t,n)=>{var r=e.r(46276);function o(e){var t={},n={},o=[];function i(a){if(r.has(n,a))throw new u;r.has(t,a)||(n[a]=!0,t[a]=!0,r.each(e.predecessors(a),i),delete n[a],o.push(a))}if(r.each(e.sinks(),i),r.size(t)!==e.nodeCount())throw new u;return o}function u(){}t.exports=o,o.CycleException=u,u.prototype=Error()},96224,(e,t,n)=>{var r=e.r(95090);t.exports=function e(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},95378,(e,t,n)=>{var r=e.r(46276);function o(e,t,n,u,i,a){!r.has(u,t)&&(u[t]=!0,n||a.push(t),r.each(i(t),function(t){o(e,t,n,u,i,a)}),n&&a.push(t))}t.exports=function e(e,t,n){r.isArray(t)||(t=[t]);var u=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],a={};return r.each(t,function(t){if(!e.hasNode(t))throw Error("Graph does not have node: "+t);o(e,t,"post"===n,a,u,i)}),i}},90360,(e,t,n)=>{var r=e.r(95378);t.exports=function e(e,t){return r(e,t,"post")}},59711,(e,t,n)=>{var r=e.r(95378);t.exports=function e(e,t){return r(e,t,"pre")}},6643,(e,t,n)=>{var r=e.r(46276),o=e.r(34269),u=e.r(59757);t.exports=function e(e,t){var n,i=new o,a={},s=new u;function l(e){var r=e.v===n?e.w:e.v,o=s.priority(r);if(void 0!==o){var u=t(e);u<o&&(a[r]=n,s.decrease(r,u))}}if(0===e.nodeCount())return i;r.each(e.nodes(),function(e){s.add(e,1/0),i.setNode(e)}),s.decrease(e.nodes()[0],0);for(var c=!1;s.size()>0;){if(n=s.removeMin(),r.has(a,n))i.setEdge(n,a[n]);else if(c)throw Error("Input graph is not connected: "+e);else c=!0;e.nodeEdges(n).forEach(l)}return i}},24499,(e,t,n)=>{t.exports={components:e.r(9992),dijkstra:e.r(35767),dijkstraAll:e.r(39340),findCycles:e.r(25585),floydWarshall:e.r(46753),isAcyclic:e.r(96224),postorder:e.r(90360),preorder:e.r(59711),prim:e.r(6643),tarjan:e.r(24036),topsort:e.r(95090)}},46053,(e,t,n)=>{var r=e.r(7924);t.exports={Graph:r.Graph,json:e.r(85305),alg:e.r(24499),version:r.version}},55587,(e,t,n)=>{var r;try{r=e.r(46053)}catch(e){}r||(r=window.graphlib),t.exports=r},20311,(e,t,n)=>{var r=e.r(16543),o=1,u=4;t.exports=function(e){return r(e,o|u)}},16110,(e,t,n)=>{var r=e.r(78744),o=e.r(7850),u=e.r(29582),i=e.r(91606);t.exports=function(e,t,n){if(!i(n))return!1;var a=typeof t;return("number"==a?!!(o(n)&&u(t,n.length)):"string"==a&&t in n)&&r(n[t],e)}},83338,(e,t,n)=>{var r=e.r(86521),o=e.r(78744),u=e.r(16110),i=e.r(75419),a=Object.prototype,s=a.hasOwnProperty;t.exports=r(function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&u(t[0],t[1],l)&&(r=1);++n<r;)for(var c=t[n],d=i(c),f=-1,h=d.length;++f<h;){var p=d[f],g=e[p];(void 0===g||o(g,a[p])&&!s.call(e,p))&&(e[p]=c[p])}return e})},62023,(e,t,n)=>{var r=e.r(57529),o=e.r(7850),u=e.r(33089);t.exports=function(e){return function(t,n,i){var a=Object(t);if(!o(t)){var s=r(n,3);t=u(t),n=function(e){return s(a[e],e,a)}}var l=e(t,n,i);return l>-1?a[s?t[l]:l]:void 0}}},93912,(e,t,n)=>{var r=/\s/;t.exports=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},86716,(e,t,n)=>{var r=e.r(93912),o=/^\s+/;t.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},94370,(e,t,n)=>{var r=e.r(86716),o=e.r(91606),u=e.r(48664),i=0/0,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(u(e))return i;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?i:+e}},89781,(e,t,n)=>{var r=e.r(94370),o=1/0,u=17976931348623157e292;t.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*u:e==e?e:0:0===e?e:0}},97125,(e,t,n)=>{var r=e.r(89781);t.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},64962,(e,t,n)=>{var r=e.r(33245),o=e.r(57529),u=e.r(97125),i=Math.max;t.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return -1;var s=null==n?0:u(n);return s<0&&(s=i(a+s,0)),r(e,o(t,3),s)}},21569,(e,t,n)=>{t.exports=e.r(62023)(e.r(64962))},35677,(e,t,n)=>{var r=e.r(77735);t.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},13721,(e,t,n)=>{var r=e.r(10673),o=e.r(35310),u=e.r(75419);t.exports=function(e,t){return null==e?e:r(e,o(t),u)}},94786,(e,t,n)=>{t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},54888,(e,t,n)=>{var r=e.r(30215),o=e.r(88607),u=e.r(57529);t.exports=function(e,t){var n={};return t=u(t,3),o(e,function(e,o,u){r(n,o,t(e,o,u))}),n}},59318,(e,t,n)=>{var r=e.r(48664);t.exports=function(e,t,n){for(var o=-1,u=e.length;++o<u;){var i=e[o],a=t(i);if(null!=a&&(void 0===s?a==a&&!r(a):n(a,s)))var s=a,l=i}return l}},80393,(e,t,n)=>{t.exports=function(e,t){return e>t}},87768,(e,t,n)=>{var r=e.r(59318),o=e.r(80393),u=e.r(13870);t.exports=function(e){return e&&e.length?r(e,u,o):void 0}},69859,(e,t,n)=>{var r=e.r(30215),o=e.r(78744);t.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},17307,(e,t,n)=>{var r=e.r(23748),o=e.r(30968),u=e.r(19674),i="[object Object]",a=Object.prototype,s=Function.prototype.toString,l=a.hasOwnProperty,c=s.call(Object);t.exports=function(e){if(!u(e)||r(e)!=i)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==c}},26089,(e,t,n)=>{t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},9971,(e,t,n)=>{var r=e.r(6227),o=e.r(75419);t.exports=function(e){return r(e,o(e))}},79200,(e,t,n)=>{var r=e.r(69859),o=e.r(44242),u=e.r(51235),i=e.r(33442),a=e.r(7299),s=e.r(17288),l=e.r(72098),c=e.r(36526),d=e.r(85370),f=e.r(63883),h=e.r(91606),p=e.r(17307),g=e.r(13376),v=e.r(26089),m=e.r(9971);t.exports=function(e,t,n,y,b,E,_){var A=v(e,n),x=v(t,n),C=_.get(x);if(C)return void r(e,n,C);var w=E?E(A,x,n+"",e,t,_):void 0,S=void 0===w;if(S){var k=l(x),F=!k&&d(x),D=!k&&!F&&g(x);w=x,k||F||D?l(A)?w=A:c(A)?w=i(A):F?(S=!1,w=o(x,!0)):D?(S=!1,w=u(x,!0)):w=[]:p(x)||s(x)?(w=A,s(A)?w=m(A):(!h(A)||f(A))&&(w=a(x))):S=!1}S&&(_.set(x,w),b(w,x,y,E,_),_.delete(x)),r(e,n,w)}},96337,(e,t,n)=>{var r=e.r(75266),o=e.r(69859),u=e.r(10673),i=e.r(79200),a=e.r(91606),s=e.r(75419),l=e.r(26089);function c(e,t,n,d,f){e!==t&&u(t,function(u,s){if(f||(f=new r),a(u))i(e,t,s,n,c,d,f);else{var h=d?d(l(e,s),u,s+"",e,t,f):void 0;void 0===h&&(h=u),o(e,s,h)}},s)}t.exports=c},47101,(e,t,n)=>{var r=e.r(86521),o=e.r(16110);t.exports=function(e){return r(function(t,n){var r=-1,u=n.length,i=u>1?n[u-1]:void 0,a=u>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(u--,i):void 0,a&&o(n[0],n[1],a)&&(i=u<3?void 0:i,u=1),t=Object(t);++r<u;){var s=n[r];s&&e(t,s,r,i)}return t})}},4023,(e,t,n)=>{var r=e.r(96337);t.exports=e.r(47101)(function(e,t,n){r(e,t,n)})},89286,(e,t,n)=>{t.exports=function(e,t){return e<t}},19017,(e,t,n)=>{var r=e.r(59318),o=e.r(89286),u=e.r(13870);t.exports=function(e){return e&&e.length?r(e,u,o):void 0}},51555,(e,t,n)=>{var r=e.r(59318),o=e.r(57529),u=e.r(89286);t.exports=function(e,t){return e&&e.length?r(e,o(t,2),u):void 0}},2272,(e,t,n)=>{var r=e.r(18408);t.exports=function(){return r.Date.now()}},19719,(e,t,n)=>{var r=e.r(63217),o=e.r(60575),u=e.r(29582),i=e.r(91606),a=e.r(28359);t.exports=function(e,t,n,s){if(!i(e))return e;t=o(t,e);for(var l=-1,c=t.length,d=c-1,f=e;null!=f&&++l<c;){var h=a(t[l]),p=n;if("__proto__"===h||"constructor"===h||"prototype"===h)break;if(l!=d){var g=f[h];void 0===(p=s?s(g,h,f):void 0)&&(p=i(g)?g:u(t[l+1])?[]:{})}r(f,h,p),f=f[h]}return e}},55387,(e,t,n)=>{var r=e.r(47449),o=e.r(19719),u=e.r(60575);t.exports=function(e,t,n){for(var i=-1,a=t.length,s={};++i<a;){var l=t[i],c=r(e,l);n(c,l)&&o(s,u(l,e),c)}return s}},47895,(e,t,n)=>{var r=e.r(55387),o=e.r(98814);t.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},91637,(e,t,n)=>{var r=e.r(35677),o=e.r(76255),u=e.r(89463);t.exports=function(e){return u(o(e,void 0,r),e+"")}},69422,(e,t,n)=>{var r=e.r(47895);t.exports=e.r(91637)(function(e,t){return null==e?{}:r(e,t)})},1163,(e,t,n)=>{var r=Math.ceil,o=Math.max;t.exports=function(e,t,n,u){for(var i=-1,a=o(r((t-e)/(n||1)),0),s=Array(a);a--;)s[u?a:++i]=e,e+=n;return s}},6246,(e,t,n)=>{var r=e.r(1163),o=e.r(16110),u=e.r(89781);t.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=u(t),void 0===n?(n=t,t=0):n=u(n),i=void 0===i?t<n?1:-1:u(i),r(t,n,i,e)}}},8284,(e,t,n)=>{t.exports=e.r(6246)()},54178,(e,t,n)=>{t.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},82225,(e,t,n)=>{var r=e.r(48664);t.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,u=e==e,i=r(e),a=void 0!==t,s=null===t,l=t==t,c=r(t);if(!s&&!c&&!i&&e>t||i&&a&&l&&!s&&!c||o&&a&&l||!n&&l||!u)return 1;if(!o&&!i&&!c&&e<t||c&&n&&u&&!o&&!i||s&&n&&u||!a&&u||!l)return -1}return 0}},42806,(e,t,n)=>{var r=e.r(82225);t.exports=function(e,t,n){for(var o=-1,u=e.criteria,i=t.criteria,a=u.length,s=n.length;++o<a;){var l=r(u[o],i[o]);if(l){if(o>=s)return l;return l*("desc"==n[o]?-1:1)}}return e.index-t.index}},79898,(e,t,n)=>{var r=e.r(66536),o=e.r(47449),u=e.r(57529),i=e.r(92255),a=e.r(54178),s=e.r(32900),l=e.r(42806),c=e.r(13870),d=e.r(72098);t.exports=function(e,t,n){t=t.length?r(t,function(e){return d(e)?function(t){return o(t,1===e.length?e[0]:e)}:e}):[c];var f=-1;return t=r(t,s(u)),a(i(e,function(e,n,o){return{criteria:r(t,function(t){return t(e)}),index:++f,value:e}}),function(e,t){return l(e,t,n)})}},26431,(e,t,n)=>{var r=e.r(77735),o=e.r(79898),u=e.r(86521),i=e.r(16110);t.exports=u(function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])})},30165,(e,t,n)=>{var r=e.r(84016),o=0;t.exports=function(e){var t=++o;return r(e)+t}},17970,(e,t,n)=>{t.exports=function(e,t,n){for(var r=-1,o=e.length,u=t.length,i={};++r<o;){var a=r<u?t[r]:void 0;n(i,e[r],a)}return i}},4339,(e,t,n)=>{var r=e.r(63217),o=e.r(17970);t.exports=function(e,t){return o(e||[],t||[],r)}},71951,(e,t,n)=>{var r;try{r={cloneDeep:e.r(20311),constant:e.r(60220),defaults:e.r(83338),each:e.r(33763),filter:e.r(58862),find:e.r(21569),flatten:e.r(35677),forEach:e.r(7059),forIn:e.r(13721),has:e.r(41054),isUndefined:e.r(19597),last:e.r(94786),map:e.r(85773),mapValues:e.r(54888),max:e.r(87768),merge:e.r(4023),min:e.r(19017),minBy:e.r(51555),now:e.r(2272),pick:e.r(69422),range:e.r(8284),reduce:e.r(2516),sortBy:e.r(26431),uniqueId:e.r(30165),values:e.r(28315),zipObject:e.r(4339)}}catch(e){}r||(r=window._),t.exports=r},44311,(e,t,n)=>{function r(){var e={};e._next=e._prev=e,this._sentinel=e}function o(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function u(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=r,r.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return o(t),t},r.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&o(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},r.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,u)),n=n._prev;return"["+e.join(", ")+"]"}},15345,(e,t,n)=>{var r=e.r(71951),o=e.r(55587).Graph,u=e.r(44311);t.exports=a;var i=r.constant(1);function a(e,t){if(1>=e.nodeCount())return[];var n=c(e,t||i),o=s(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(o,function(t){return e.outEdges(t.v,t.w)}),!0)}function s(e,t,n){for(var r,o=[],u=t[t.length-1],i=t[0];e.nodeCount();){for(;r=i.dequeue();)l(e,t,n,r);for(;r=u.dequeue();)l(e,t,n,r);if(e.nodeCount()){for(var a=t.length-2;a>0;--a)if(r=t[a].dequeue()){o=o.concat(l(e,t,n,r,!0));break}}}return o}function l(e,t,n,o,u){var i=u?[]:void 0;return r.forEach(e.inEdges(o.v),function(r){var o=e.edge(r),a=e.node(r.v);u&&i.push({v:r.v,w:r.w}),a.out-=o,d(t,n,a)}),r.forEach(e.outEdges(o.v),function(r){var o=e.edge(r),u=r.w,i=e.node(u);i.in-=o,d(t,n,i)}),e.removeNode(o.v),i}function c(e,t){var n=new o,i=0,a=0;r.forEach(e.nodes(),function(e){n.setNode(e,{v:e,in:0,out:0})}),r.forEach(e.edges(),function(e){var r=n.edge(e.v,e.w)||0,o=t(e),u=r+o;n.setEdge(e.v,e.w,u),a=Math.max(a,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w).in+=o)});var s=r.range(a+i+3).map(function(){return new u}),l=i+1;return r.forEach(n.nodes(),function(e){d(s,l,n.node(e))}),{graph:n,buckets:s,zeroIdx:l}}function d(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},4959,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(15345);function u(e){var t=[],n={},o={};function u(i){r.has(o,i)||(o[i]=!0,n[i]=!0,r.forEach(e.outEdges(i),function(e){r.has(n,e.w)?t.push(e):u(e.w)}),delete n[i])}return r.forEach(e.nodes(),u),t}t.exports={run:function e(e){var t="greedy"===e.graph().acyclicer?o(e,n(e)):u(e);function n(e){return function(t){return e.edge(t).weight}}r.forEach(t,function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))})},undo:function e(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}}},59426,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph;function u(e,t,n,o){var u;do u=r.uniqueId(o);while(e.hasNode(u))return n.dummy=t,e.setNode(u,n),u}function i(e,t,n,r){var o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),u(e,"border",o,t)}function a(e){return r.max(r.map(e.nodes(),function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:u,simplify:function e(e){var t=new o().setGraph(e.graph());return r.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),t},asNonCompoundGraph:function e(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),r.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t},successorWeights:function e(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.outEdges(t),function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},predecessorWeights:function e(e){var t=r.map(e.nodes(),function(t){var n={};return r.forEach(e.inEdges(t),function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return r.zipObject(e.nodes(),t)},intersectRect:function e(e,t){var n,r,o=e.x,u=e.y,i=t.x-o,a=t.y-u,s=e.width/2,l=e.height/2;if(!i&&!a)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*s>Math.abs(i)*l?(a<0&&(l=-l),n=l*i/a,r=l):(i<0&&(s=-s),n=s,r=s*a/i),{x:o+n,y:u+r}},buildLayerMatrix:function e(e){var t=r.map(r.range(a(e)+1),function(){return[]});return r.forEach(e.nodes(),function(n){var o=e.node(n),u=o.rank;r.isUndefined(u)||(t[u][o.order]=n)}),t},normalizeRanks:function e(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank}));r.forEach(e.nodes(),function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)})},removeEmptyRanks:function e(e){var t=r.min(r.map(e.nodes(),function(t){return e.node(t).rank})),n=[];r.forEach(e.nodes(),function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)});var o=0,u=e.graph().nodeRankFactor;r.forEach(n,function(t,n){r.isUndefined(t)&&n%u!=0?--o:o&&r.forEach(t,function(t){e.node(t).rank+=o})})},addBorderNode:i,maxRank:a,partition:function e(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,function(e){t(e)?n.lhs.push(e):n.rhs.push(e)}),n},time:function e(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function e(e,t){return t()}}},34086,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(59426);function u(e,t){var n,r,u,i=t.v,a=e.node(i).rank,s=t.w,l=e.node(s).rank,c=t.name,d=e.edge(t),f=d.labelRank;if(l!==a+1){for(e.removeEdge(t),u=0,++a;a<l;++u,++a)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:t,rank:a},n=o.addDummyNode(e,"edge",r,"_d"),a===f&&(r.width=d.width,r.height=d.height,r.dummy="edge-label",r.labelpos=d.labelpos),e.setEdge(i,n,{weight:d.weight},c),0===u&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,s,{weight:d.weight},c)}}t.exports={run:function e(e){e.graph().dummyChains=[],r.forEach(e.edges(),function(t){u(e,t)})},undo:function e(e){r.forEach(e.graph().dummyChains,function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)})}}},8914,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports={longestPath:function e(e){var t={};function n(o){var u=e.node(o);if(r.has(t,o))return u.rank;t[o]=!0;var i=r.min(r.map(e.outEdges(o),function(t){return n(t.w)-e.edge(t).minlen}));return(i===1/0||null==i)&&(i=0),u.rank=i}r.forEach(e.sources(),n)},slack:function e(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},47931,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph,u=e.r(8914).slack;function i(e,t){function n(o){r.forEach(t.nodeEdges(o),function(r){var i=r.v,a=o===i?r.w:i;e.hasNode(a)||u(t,r)||(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})}return r.forEach(e.nodes(),n),e.nodeCount()}function a(e,t){return r.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return u(t,n)})}function s(e,t,n){r.forEach(e.nodes(),function(e){t.node(e).rank+=n})}t.exports=function e(e){var t,n,r=new o({directed:!1}),l=e.nodes()[0],c=e.nodeCount();for(r.setNode(l,{});i(r,e)<c;)t=a(r,e),n=r.hasNode(t.v)?u(e,t):-u(e,t),s(r,e,n);return r}},57363,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(47931),u=e.r(8914).slack,i=e.r(8914).longestPath,a=e.r(55587).alg.preorder,s=e.r(55587).alg.postorder,l=e.r(59426).simplify;function c(e){i(e=l(e));var t,n,r=o(e);for(p(r),d(r,e);t=v(r);)n=m(r,e,t),y(r,e,t,n)}function d(e,t){var n=s(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){f(e,t,n)})}function f(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=h(e,t,n)}function h(e,t,n){var o=e.node(n).parent,u=!0,i=t.edge(n,o),a=0;return i||(u=!1,i=t.edge(o,n)),a=i.weight,r.forEach(t.nodeEdges(n),function(r){var i=r.v===n,s=i?r.w:r.v;if(s!==o){var l=i===u,c=t.edge(r).weight;if(a+=l?c:-c,E(e,n,s)){var d=e.edge(n,s).cutvalue;a+=l?-d:d}}}),a}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),g(e,{},1,t)}function g(e,t,n,o,u){var i=n,a=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),function(u){r.has(t,u)||(n=g(e,t,n,u,o))}),a.low=i,a.lim=n++,u?a.parent=u:delete a.parent,n}function v(e){return r.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function m(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var a=e.node(o),s=e.node(i),l=a,c=!1;a.lim>s.lim&&(l=s,c=!0);var d=r.filter(t.edges(),function(t){return c===_(e,e.node(t.v),l)&&c!==_(e,e.node(t.w),l)});return r.minBy(d,function(e){return u(t,e)})}function y(e,t,n,r){var o=n.v,u=n.w;e.removeEdge(o,u),e.setEdge(r.v,r.w,{}),p(e),d(e,t),b(e,t)}function b(e,t){var n=r.find(e.nodes(),function(e){return!t.node(e).parent}),o=a(e,n);o=o.slice(1),r.forEach(o,function(n){var r=e.node(n).parent,o=t.edge(n,r),u=!1;o||(o=t.edge(r,n),u=!0),t.node(n).rank=t.node(r).rank+(u?o.minlen:-o.minlen)})}function E(e,t,n){return e.hasEdge(t,n)}function _(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}t.exports=c,c.initLowLimValues=p,c.initCutValues=d,c.calcCutValue=h,c.leaveEdge=v,c.enterEdge=m,c.exchangeEdges=y},9217,(e,t,n)=>{"use strict";var r=e.r(8914).longestPath,o=e.r(47931),u=e.r(57363);t.exports=function e(e){switch(e.graph().ranker){case"network-simplex":default:s(e);break;case"tight-tree":a(e);break;case"longest-path":i(e)}};var i=r;function a(e){r(e),o(e)}function s(e){u(e)}},34995,(e,t,n)=>{var r=e.r(71951);function o(e,t,n,r){var o,u,i=[],a=[],s=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);o=n;do i.push(o=e.parent(o));while(o&&(t[o].low>s||l>t[o].lim))for(u=o,o=r;(o=e.parent(o))!==u;)a.push(o);return{path:i.concat(a.reverse()),lca:u}}function u(e){var t={},n=0;function o(u){var i=n;r.forEach(e.children(u),o),t[u]={low:i,lim:n++}}return r.forEach(e.children(),o),t}t.exports=function e(e){var t=u(e);r.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),u=r.edgeObj,i=o(e,t,u.v,u.w),a=i.path,s=i.lca,l=0,c=a[0],d=!0;n!==u.w;){if(r=e.node(n),d){for(;(c=a[l])!==s&&e.node(c).maxRank<r.rank;)l++;c===s&&(d=!1)}if(!d){for(;l<a.length-1&&e.node(c=a[l+1]).minRank<=r.rank;)l++;c=a[l]}e.setParent(n,c),n=e.successors(n)[0]}})}},35961,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);function u(e,t,n,i,a,s,l){var c=e.children(l);if(!c.length){l!==t&&e.setEdge(t,l,{weight:0,minlen:n});return}var d=o.addBorderNode(e,"_bt"),f=o.addBorderNode(e,"_bb"),h=e.node(l);e.setParent(d,l),h.borderTop=d,e.setParent(f,l),h.borderBottom=f,r.forEach(c,function(r){u(e,t,n,i,a,s,r);var o=e.node(r),c=o.borderTop?o.borderTop:r,h=o.borderBottom?o.borderBottom:r,p=o.borderTop?i:2*i,g=c!==h?1:a-s[l]+1;e.setEdge(d,c,{weight:p,minlen:g,nestingEdge:!0}),e.setEdge(h,f,{weight:p,minlen:g,nestingEdge:!0})}),e.parent(l)||e.setEdge(t,d,{weight:0,minlen:a+s[l]})}function i(e){var t={};function n(o,u){var i=e.children(o);i&&i.length&&r.forEach(i,function(e){n(e,u+1)}),t[o]=u}return r.forEach(e.children(),function(e){n(e,1)}),t}function a(e){return r.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}t.exports={run:function e(e){var t=o.addDummyNode(e,"root",{},"_root"),n=i(e),s=r.max(r.values(n))-1,l=2*s+1;e.graph().nestingRoot=t,r.forEach(e.edges(),function(t){e.edge(t).minlen*=l});var c=a(e)+1;r.forEach(e.children(),function(r){u(e,t,l,c,s,n,r)}),e.graph().nodeRankFactor=l},cleanup:function e(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},19422,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);function u(e,t,n,r,u,i){var a={width:0,height:0,rank:i,borderType:t},s=u[t][i-1],l=o.addDummyNode(e,"border",a,n);u[t][i]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}t.exports=function e(e){function t(n){var o=e.children(n),i=e.node(n);if(o.length&&r.forEach(o,t),r.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)u(e,"borderLeft","_bl",n,i,a),u(e,"borderRight","_br",n,i,a)}}r.forEach(e.children(),t)}},64519,(e,t,n)=>{"use strict";var r=e.r(71951);function o(e){r.forEach(e.nodes(),function(t){u(e.node(t))}),r.forEach(e.edges(),function(t){u(e.edge(t))})}function u(e){var t=e.width;e.width=e.height,e.height=t}function i(e){r.forEach(e.nodes(),function(t){a(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.forEach(n.points,a),r.has(n,"y")&&a(n)})}function a(e){e.y=-e.y}function s(e){r.forEach(e.nodes(),function(t){l(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.forEach(n.points,l),r.has(n,"x")&&l(n)})}function l(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function e(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&o(e)},undo:function e(e){var t=e.graph().rankdir.toLowerCase();("bt"===t||"rl"===t)&&i(e),("lr"===t||"rl"===t)&&(s(e),o(e))}}},51318,(e,t,n)=>{"use strict";var r=e.r(71951);t.exports=function e(e){var t={},n=r.filter(e.nodes(),function(t){return!e.children(t).length}),o=r.max(r.map(n,function(t){return e.node(t).rank})),u=r.map(r.range(o+1),function(){return[]});function i(n){if(!r.has(t,n)){t[n]=!0;var o=e.node(n);u[o.rank].push(n),r.forEach(e.successors(n),i)}}var a=r.sortBy(n,function(t){return e.node(t).rank});return r.forEach(a,i),u}},31577,(e,t,n)=>{"use strict";var r=e.r(71951);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,function(e,t){return t})),u=r.flatten(r.map(t,function(t){return r.sortBy(r.map(e.outEdges(t),function(t){return{pos:o[t.w],weight:e.edge(t).weight}}),"pos")}),!0),i=1;i<n.length;)i<<=1;var a=2*i-1;i-=1;var s=r.map(Array(a),function(){return 0}),l=0;return r.forEach(u.forEach(function(e){var t=e.pos+i;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;l+=e.weight*n})),l}t.exports=function e(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},4055,(e,t,n)=>{var r=e.r(71951);t.exports=function e(e,t){return r.map(t,function(t){var n=e.inEdges(t);if(!n.length)return{v:t};var o=r.reduce(n,function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}})}},26918,(e,t,n)=>{"use strict";var r=e.r(71951);function o(e){var t=[];function n(e){return function(t){!t.merged&&(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&u(e,t)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var i=e.pop();t.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(t,function(e){return!e.merged}),function(e){return r.pick(e,["vs","i","barycenter","weight"])})}function u(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}t.exports=function e(e,t){var n={};return r.forEach(e,function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)}),r.forEach(t.edges(),function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))}),o(r.filter(n,function(e){return!e.indegree}))}},71966,(e,t,n)=>{var r=e.r(71951),o=e.r(59426);function u(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}function i(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}t.exports=function e(e,t){var n=o.partition(e,function(e){return r.has(e,"barycenter")}),a=n.lhs,s=r.sortBy(n.rhs,function(e){return-e.i}),l=[],c=0,d=0,f=0;a.sort(i(!!t)),f=u(l,s,f),r.forEach(a,function(e){f+=e.vs.length,l.push(e.vs),c+=e.barycenter*e.weight,d+=e.weight,f=u(l,s,f)});var h={vs:r.flatten(l,!0)};return d&&(h.barycenter=c/d,h.weight=d),h}},28580,(e,t,n)=>{var r=e.r(71951),o=e.r(4055),u=e.r(26918),i=e.r(71966);function a(e,t,n,c){var d=e.children(t),f=e.node(t),h=f?f.borderLeft:void 0,p=f?f.borderRight:void 0,g={};h&&(d=r.filter(d,function(e){return e!==h&&e!==p}));var v=o(e,d);r.forEach(v,function(t){if(e.children(t.v).length){var o=a(e,t.v,n,c);g[t.v]=o,r.has(o,"barycenter")&&l(t,o)}});var m=u(v,n);s(m,g);var y=i(m,c);if(h&&(y.vs=r.flatten([h,y.vs,p],!0),e.predecessors(h).length)){var b=e.node(e.predecessors(h)[0]),E=e.node(e.predecessors(p)[0]);r.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.order+E.order)/(y.weight+2),y.weight+=2}return y}function s(e,t){r.forEach(e,function(e){e.vs=r.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}function l(e,t){r.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}t.exports=a},41885,(e,t,n)=>{var r=e.r(71951),o=e.r(55587).Graph;function u(e){for(var t;e.hasNode(t=r.uniqueId("_root")););return t}t.exports=function e(e,t,n){var i=u(e),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(t){return e.node(t)});return r.forEach(e.nodes(),function(o){var u=e.node(o),s=e.parent(o);(u.rank===t||u.minRank<=t&&t<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(e[n](o),function(t){var n=t.v===o?t.w:t.v,u=a.edge(n,o),i=r.isUndefined(u)?0:u.weight;a.setEdge(n,o,{weight:e.edge(t).weight+i})}),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[t],borderRight:u.borderRight[t]}))}),a}},18716,(e,t,n)=>{var r=e.r(71951);t.exports=function e(e,t,n){var o,u={};r.forEach(n,function(n){for(var r,i,a=e.parent(n);a;){if((r=e.parent(a))?(i=u[r],u[r]=a):(i=o,o=a),i&&i!==a)return void t.setEdge(i,a);a=r}})}},64836,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(51318),u=e.r(31577),i=e.r(28580),a=e.r(41885),s=e.r(18716),l=e.r(55587).Graph,c=e.r(59426);function d(e,t,n){return r.map(t,function(t){return a(e,t,n)})}function f(e,t){var n=new l;r.forEach(e,function(e){var o=e.graph().root,u=i(e,o,n,t);r.forEach(u.vs,function(t,n){e.node(t).order=n}),s(e,n,u.vs)})}function h(e,t){r.forEach(t,function(t){r.forEach(t,function(t,n){e.node(t).order=n})})}t.exports=function e(e){var t=c.maxRank(e),n=d(e,r.range(1,t+1),"inEdges"),i=d(e,r.range(t-1,-1,-1),"outEdges"),a=o(e);h(e,a);for(var s,l=1/0,p=0,g=0;g<4;++p,++g){f(p%2?n:i,p%4>=2),a=c.buildLayerMatrix(e);var v=u(e,a);v<l&&(g=0,s=r.cloneDeep(a),l=v)}h(e,s)}},23322,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(55587).Graph,u=e.r(59426);function i(e,t){var n={};function o(t,o){var u=0,i=0,a=t.length,c=r.last(o);return r.forEach(o,function(t,d){var f=s(e,t),h=f?e.node(f).order:a;(f||t===c)&&(r.forEach(o.slice(i,d+1),function(t){r.forEach(e.predecessors(t),function(r){var o=e.node(r),i=o.order;(i<u||h<i)&&!(o.dummy&&e.node(t).dummy)&&l(n,r,t)})}),i=d+1,u=h)}),o}return r.reduce(t,o),n}function a(e,t){var n={};function o(t,o,u,i,a){var s;r.forEach(r.range(o,u),function(o){s=t[o],e.node(s).dummy&&r.forEach(e.predecessors(s),function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>a)&&l(n,t,s)})})}function u(t,n){var u,i=-1,a=0;return r.forEach(n,function(r,s){if("border"===e.node(r).dummy){var l=e.predecessors(r);l.length&&(u=e.node(l[0]).order,o(n,a,s,i,u),a=s,i=u)}o(n,a,n.length,u,t.length)}),n}return r.reduce(t,u),n}function s(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),function(t){return e.node(t).dummy})}function l(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function c(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function d(e,t,n,o){var u={},i={},a={};return r.forEach(t,function(e){r.forEach(e,function(e,t){u[e]=e,i[e]=e,a[e]=t})}),r.forEach(t,function(e){var t=-1;r.forEach(e,function(e){var s=o(e);if(s.length)for(var l=((s=r.sortBy(s,function(e){return a[e]})).length-1)/2,d=Math.floor(l),f=Math.ceil(l);d<=f;++d){var h=s[d];i[e]===e&&t<a[h]&&!c(n,e,h)&&(i[h]=e,i[e]=u[e]=u[h],t=a[h])}})}),{root:u,align:i}}function f(e,t,n,o,u){var i={},a=h(e,t,n,u),s=u?"borderLeft":"borderRight";function l(e,t){for(var n=a.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}function c(t){var n=a.outEdges(t).reduce(function(e,t){return Math.min(e,i[t.w]-a.edge(t))},1/0),r=e.node(t);n!==1/0&&r.borderType!==s&&(i[t]=Math.max(i[t],n))}return l(function(e){i[e]=a.inEdges(e).reduce(function(e,t){return Math.max(e,i[t.v]+a.edge(t))},0)},a.predecessors.bind(a)),l(c,a.successors.bind(a)),r.forEach(o,function(e){i[e]=i[n[e]]}),i}function h(e,t,n,u){var i=new o,a=e.graph(),s=m(a.nodesep,a.edgesep,u);return r.forEach(t,function(t){var o;r.forEach(t,function(t){var r=n[t];if(i.setNode(r),o){var u=n[o],a=i.edge(u,r);i.setEdge(u,r,Math.max(s(e,t,o),a||0))}o=t})}),i}function p(e,t){return r.minBy(r.values(t),function(t){var n=-1/0,o=1/0;return r.forIn(t,function(t,r){var u=y(e,r)/2;n=Math.max(t+u,n),o=Math.min(t-u,o)}),n-o})}function g(e,t){var n=r.values(t),o=r.min(n),u=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(i){var a,s=n+i,l=e[s];if(l!==t){var c=r.values(l);a="l"===i?o-r.min(c):u-r.max(c),a&&(e[s]=r.mapValues(l,function(e){return e+a}))}})})}function v(e,t){return r.mapValues(e.ul,function(n,o){if(t)return e[t.toLowerCase()][o];var u=r.sortBy(r.map(e,o));return(u[1]+u[2])/2})}function m(e,t,n){return function(o,u,i){var a,s,l=o.node(u),c=o.node(i);if(a=0+l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(a+=n?s:-s),s=0,a+=(l.dummy?t:e)/2,a+=(c.dummy?t:e)/2,a+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(a+=n?s:-s),s=0,a}}function y(e,t){return e.node(t).width}t.exports={positionX:function e(e){var t,n=u.buildLayerMatrix(e),o=r.merge(i(e,n),a(e,n)),s={};r.forEach(["u","d"],function(u){t="u"===u?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(t=r.map(t,function(e){return r.values(e).reverse()}));var i=("u"===u?e.predecessors:e.successors).bind(e),a=d(e,t,o,i),l=f(e,t,a.root,a.align,"r"===n);"r"===n&&(l=r.mapValues(l,function(e){return-e})),s[u+n]=l})});var l=p(e,s);return g(s,l),v(s,e.graph().align)},findType1Conflicts:i,findType2Conflicts:a,addConflict:l,hasConflict:c,verticalAlignment:d,horizontalCompaction:f,alignCoordinates:g,findSmallestWidthAlignment:p,balance:v}},62959,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(59426),u=e.r(23322).positionX;function i(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,u=0;r.forEach(t,function(t){var o=r.max(r.map(t,function(t){return e.node(t).height}));r.forEach(t,function(t){e.node(t).y=u+o/2}),u+=o+n})}t.exports=function e(e){i(e=o.asNonCompoundGraph(e)),r.forEach(u(e),function(t,n){e.node(n).x=t})}},39068,(e,t,n)=>{"use strict";var r=e.r(71951),o=e.r(4959),u=e.r(34086),i=e.r(9217),a=e.r(59426).normalizeRanks,s=e.r(34995),l=e.r(59426).removeEmptyRanks,c=e.r(35961),d=e.r(19422),f=e.r(64519),h=e.r(64836),p=e.r(62959),g=e.r(59426),v=e.r(55587).Graph;function m(e,t){t("    makeSpaceForEdgeLabels",function(){F(e)}),t("    removeSelfEdges",function(){R(e)}),t("    acyclic",function(){o.run(e)}),t("    nestingGraph.run",function(){c.run(e)}),t("    rank",function(){i(g.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){D(e)}),t("    removeEmptyRanks",function(){l(e)}),t("    nestingGraph.cleanup",function(){c.cleanup(e)}),t("    normalizeRanks",function(){a(e)}),t("    assignRankMinMax",function(){B(e)}),t("    removeEdgeLabelProxies",function(){P(e)}),t("    normalize.run",function(){u.run(e)}),t("    parentDummyChains",function(){s(e)}),t("    addBorderSegments",function(){d(e)}),t("    order",function(){h(e)}),t("    insertSelfEdges",function(){I(e)}),t("    adjustCoordinateSystem",function(){f.adjust(e)}),t("    position",function(){p(e)}),t("    positionSelfEdges",function(){L(e)}),t("    removeBorderNodes",function(){$(e)}),t("    normalize.undo",function(){u.undo(e)}),t("    fixupEdgeLabelCoords",function(){M(e)}),t("    undoCoordinateSystem",function(){f.undo(e)}),t("    translateGraph",function(){j(e)}),t("    assignNodeIntersects",function(){N(e)}),t("    reversePoints",function(){O(e)}),t("    acyclic.undo",function(){o.undo(e)})}function y(e,t){r.forEach(e.nodes(),function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))}),r.forEach(e.edges(),function(n){var o=e.edge(n),u=t.edge(n);o.points=u.points,r.has(u,"x")&&(o.x=u.x,o.y=u.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}t.exports=function e(e,t){var n=t&&t.debugTiming?g.time:g.notime;n("layout",function(){var t=n("  buildLayoutGraph",function(){return k(e)});n("  runLayout",function(){m(t,n)}),n("  updateInputGraph",function(){y(e,t)})})};var b=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],A=["width","height"],x={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function k(e){var t=new v({multigraph:!0,compound:!0}),n=z(e.graph());return t.setGraph(r.merge({},E,T(n,b),r.pick(n,_))),r.forEach(e.nodes(),function(n){var o=z(e.node(n));t.setNode(n,r.defaults(T(o,A),x)),t.setParent(n,e.parent(n))}),r.forEach(e.edges(),function(n){var o=z(e.edge(n));t.setEdge(n,r.merge({},w,T(o,C),r.pick(o,S)))}),t}function F(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function D(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};g.addDummyNode(e,"edge-proxy",o,"_ep")}})}function B(e){var t=0;r.forEach(e.nodes(),function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))}),e.graph().maxRank=t}function P(e){r.forEach(e.nodes(),function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function j(e){var t=1/0,n=0,o=1/0,u=0,i=e.graph(),a=i.marginx||0,s=i.marginy||0;function l(e){var r=e.x,i=e.y,a=e.width,s=e.height;t=Math.min(t,r-a/2),n=Math.max(n,r+a/2),o=Math.min(o,i-s/2),u=Math.max(u,i+s/2)}r.forEach(e.nodes(),function(t){l(e.node(t))}),r.forEach(e.edges(),function(t){var n=e.edge(t);r.has(n,"x")&&l(n)}),t-=a,o-=s,r.forEach(e.nodes(),function(n){var r=e.node(n);r.x-=t,r.y-=o}),r.forEach(e.edges(),function(n){var u=e.edge(n);r.forEach(u.points,function(e){e.x-=t,e.y-=o}),r.has(u,"x")&&(u.x-=t),r.has(u,"y")&&(u.y-=o)}),i.width=n-t+a,i.height=u-o+s}function N(e){r.forEach(e.edges(),function(t){var n,r,o=e.edge(t),u=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=u),o.points.unshift(g.intersectRect(u,n)),o.points.push(g.intersectRect(i,r))})}function M(e){r.forEach(e.edges(),function(t){var n=e.edge(t);if(r.has(n,"x"))switch(("l"===n.labelpos||"r"===n.labelpos)&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}function O(e){r.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function $(e){r.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),u=e.node(n.borderBottom),i=e.node(r.last(n.borderLeft)),a=e.node(r.last(n.borderRight));n.width=Math.abs(a.x-i.x),n.height=Math.abs(u.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}}),r.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}function R(e){r.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function I(e){var t=g.buildLayerMatrix(e);r.forEach(t,function(t){var n=0;r.forEach(t,function(t,o){var u=e.node(t);u.order=o+n,r.forEach(u.selfEdges,function(t){g.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:u.rank,order:o+ ++n,e:t.e,label:t.label},"_se")}),delete u.selfEdges})})}function L(e){r.forEach(e.nodes(),function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,u=r.y,i=n.x-o,a=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:u-a},{x:o+5*i/6,y:u-a},{x:o+i,y:u},{x:o+5*i/6,y:u+a},{x:o+2*i/3,y:u+a}],n.label.x=n.x,n.label.y=n.y}})}function T(e,t){return r.mapValues(r.pick(e,t),Number)}function z(e){var t={};return r.forEach(e,function(e,n){t[n.toLowerCase()]=e}),t}},23156,(e,t,n)=>{var r=e.r(71951),o=e.r(59426),u=e.r(55587).Graph;t.exports={debugOrdering:function e(e){var t=o.buildLayerMatrix(e),n=new u({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),r.forEach(e.edges(),function(e){n.setEdge(e.v,e.w,{},e.name)}),r.forEach(t,function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,function(e,t){return n.setEdge(e,t,{style:"invis"}),t})}),n}}},31187,(e,t,n)=>{t.exports="0.8.5"},59495,(e,t,n)=>{t.exports={graphlib:e.r(55587),layout:e.r(39068),debug:e.r(23156),util:{time:e.r(59426).time,notime:e.r(59426).notime},version:e.r(31187)}},54126,e=>{e.v({menu:"ContextMenu-module__egYIra__menu",menuItem:"ContextMenu-module__egYIra__menuItem"})},31936,e=>{e.v({graphContainer:"VariantGraph-module__Na2p5q__graphContainer"})},7194,e=>{e.v({button:"ControlPanel-module__II9h6W__button",danger:"ControlPanel-module__II9h6W__danger",divider:"ControlPanel-module__II9h6W__divider",group:"ControlPanel-module__II9h6W__group",panel:"ControlPanel-module__II9h6W__panel"})},20897,e=>{e.v({button:"page-module___8aEwW__button",leftPanel:"page-module___8aEwW__leftPanel",main:"page-module___8aEwW__main",rightPanel:"page-module___8aEwW__rightPanel",toolbar:"page-module___8aEwW__toolbar"})},52683,e=>{"use strict";let t;var n,r,o,u,i,a,s,l=e.i(32086),c=l,d=e.i(89762);let f=["white","black"],h=["a","b","c","d","e","f","g","h"],p=["1","2","3","4","5","6","7","8"],g=[...p].reverse(),v=Array.prototype.concat(...h.map(e=>p.map(t=>e+t))),m=e=>v[8*e[0]+e[1]],y=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],b=v.map(y);function E(e){let t,n=()=>(void 0===t&&(t=e()),t);return n.clear=()=>{t=void 0},n}let _=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;let t=performance.now()-e;return e=void 0,t}}},A=e=>"white"===e?"black":"white",x=(e,t)=>{let n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},C=(e,t)=>e.role===t.role&&e.color===t.color,w=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],S=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},k=(e,t,n=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},F=(e,t)=>{e.style.visibility=t?"visible":"hidden"},D=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null==(t=e.targetTouches)?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},B=e=>2===e.button,P=(e,t)=>{let n=document.createElement(e);return t&&(n.className=t),n};function j(e,t,n){let r=y(e);return t||(r[0]=7-r[0],r[1]=7-r[1]),[n.left+n.width*r[0]/8+n.width/16,n.top+n.height*(7-r[1])/8+n.height/16]}let N=(e,t)=>Math.abs(e-t),M=e=>(t,n,r,o)=>2>N(t,r)&&("white"===e?o===n+1||n<=1&&o===n+2&&t===r:o===n-1||n>=6&&o===n-2&&t===r),O=(e,t,n,r)=>{let o=N(e,n),u=N(t,r);return 1===o&&2===u||2===o&&1===u},$=(e,t,n,r)=>N(e,n)===N(t,r),R=(e,t,n,r)=>e===n||t===r,I=(e,t,n,r)=>$(e,t,n,r)||R(e,t,n,r),L=(e,t,n)=>(r,o,u,i)=>2>N(r,u)&&2>N(o,i)||n&&o===i&&o===7*("white"!==e)&&(4===r&&(2===u&&t.includes(0)||6===u&&t.includes(7))||t.includes(u));function T(e,t){let n="white"===t?"1":"8",r=[];for(let[o,u]of e)o[1]===n&&u.color===t&&"rook"===u.role&&r.push(y(o)[0]);return r}function z(e,t,n){let r=e.get(t);if(!r)return[];let o=y(t),u=r.role,i="pawn"===u?M(r.color):"knight"===u?O:"bishop"===u?$:"rook"===u?R:"queen"===u?I:L(r.color,T(e,r.color),n);return b.filter(e=>(o[0]!==e[0]||o[1]!==e[1])&&i(o[0],o[1],e[0],e[1])).map(m)}function U(e,...t){e&&setTimeout(()=>e(...t),1)}function H(e){e.orientation=A(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function q(e,t){for(let[n,r]of t)r?e.pieces.set(n,r):e.pieces.delete(n)}function K(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(let[n,r]of e.pieces)"king"===r.role&&r.color===t&&(e.check=n)}function V(e,t,n,r){X(e),e.premovable.current=[t,n],U(e.premovable.events.set,t,n,r)}function W(e){e.premovable.current&&(e.premovable.current=void 0,U(e.premovable.events.unset))}function G(e,t,n){W(e),e.predroppable.current={role:t,key:n},U(e.predroppable.events.set,t,n)}function X(e){let t=e.predroppable;t.current&&(t.current=void 0,U(t.events.unset))}function Y(e,t,n){if(!e.autoCastle)return!1;let r=e.pieces.get(t);if(!r||"king"!==r.role)return!1;let o=y(t),u=y(n);if(0!==o[1]&&7!==o[1]||o[1]!==u[1])return!1;4!==o[0]||e.pieces.has(n)||(6===u[0]?n=m([7,u[1]]):2===u[0]&&(n=m([0,u[1]])));let i=e.pieces.get(n);return!!i&&i.color===r.color&&"rook"===i.role&&(e.pieces.delete(t),e.pieces.delete(n),o[0]<u[0]?(e.pieces.set(m([6,u[1]]),r),e.pieces.set(m([5,u[1]]),i)):(e.pieces.set(m([2,u[1]]),r),e.pieces.set(m([3,u[1]]),i)),!0)}function Z(e,t,n){let r=e.pieces.get(t),o=e.pieces.get(n);if(t===n||!r)return!1;let u=o&&o.color!==r.color?o:void 0;return n===e.selected&&eo(e),U(e.events.move,t,n,u),Y(e,t,n)||(e.pieces.set(n,r),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,U(e.events.change),u||!0}function Q(e,t,n,r){if(e.pieces.has(n))if(!r)return!1;else e.pieces.delete(n);return U(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,U(e.events.change),e.movable.dests=void 0,e.turnColor=A(e.turnColor),!0}function J(e,t,n){let r=Z(e,t,n);return r&&(e.movable.dests=void 0,e.turnColor=A(e.turnColor),e.animation.current=void 0),r}function ee(e,t,n){if(ei(e,t,n)){let r=J(e,t,n);if(r){let o=e.hold.stop();eo(e);let u={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==r&&(u.captured=r),U(e.movable.events.after,t,n,u),!0}}else if(el(e,t,n))return V(e,t,n,{ctrlKey:e.stats.ctrlKey}),eo(e),!0;return eo(e),!1}function et(e,t,n,r){let o=e.pieces.get(t);o&&(ea(e,t,n)||r)?(e.pieces.delete(t),Q(e,o,n,r),U(e.movable.events.afterNewPiece,o.role,n,{premove:!1,predrop:!1})):o&&ec(e,t,n)?G(e,o.role,n):(W(e),X(e)),e.pieces.delete(t),eo(e)}function en(e,t,n){if(U(e.events.select,t),e.selected)if(e.selected!==t||e.draggable.enabled){if((e.selectable.enabled||n)&&e.selected!==t&&ee(e,e.selected,t)){e.stats.dragged=!1;return}}else{eo(e),e.hold.cancel();return}(e.selectable.enabled||e.draggable.enabled)&&(eu(e,t)||es(e,t))&&(er(e,t),e.hold.start())}function er(e,t){e.selected=t,es(e,t)?e.premovable.customDests||(e.premovable.dests=z(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function eo(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function eu(e,t){let n=e.pieces.get(t);return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}let ei=(e,t,n)=>{var r,o;return t!==n&&eu(e,t)&&(e.movable.free||!!(null==(o=null==(r=e.movable.dests)?void 0:r.get(t))?void 0:o.includes(n)))};function ea(e,t,n){let r=e.pieces.get(t);return!!r&&(t===n||!e.pieces.has(n))&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function es(e,t){let n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function el(e,t,n){var r,o;let u=null!=(o=null==(r=e.premovable.customDests)?void 0:r.get(t))?o:z(e.pieces,t,e.premovable.castle);return t!==n&&es(e,t)&&u.includes(n)}function ec(e,t,n){let r=e.pieces.get(t),o=e.pieces.get(n);return!!r&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}function ed(e,t){let n=e.pieces.get(t);return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function ef(e){let t=e.premovable.current;if(!t)return!1;let n=t[0],r=t[1],o=!1;if(ei(e,n,r)){let t=J(e,n,r);if(t){let u={premove:!0};!0!==t&&(u.captured=t),U(e.movable.events.after,n,r,u),o=!0}}return W(e),o}function eh(e,t){let n=e.predroppable.current,r=!1;if(!n)return!1;if(t(n)){let t={role:n.role,color:e.movable.color};Q(e,t,n.key)&&(U(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),r=!0)}return X(e),r}function ep(e){W(e),X(e),eo(e)}function eg(e){e.movable.color=e.movable.dests=e.animation.current=void 0,ep(e)}function ev(e,t,n){let r=Math.floor(8*(e[0]-n.left)/n.width);t||(r=7-r);let o=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(o=7-o),r>=0&&r<8&&o>=0&&o<8?m([r,o]):void 0}function em(e,t,n,r){let o=y(e),u=b.filter(e=>I(o[0],o[1],e[0],e[1])||O(o[0],o[1],e[0],e[1])),i=u.map(e=>j(m(e),n,r)).map(e=>x(t,e)),[,a]=i.reduce((e,t,n)=>e[0]<t?e:[t,n],[i[0],0]);return m(u[a])}let ey=e=>"white"===e.orientation,eb="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",eE={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},e_={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function eA(e){"start"===e&&(e=eb);let t=new Map,n=7,r=0;for(let o of e)switch(o){case" ":case"[":return t;case"/":if(--n<0)return t;r=0;break;case"~":{let e=t.get(m([r-1,n]));e&&(e.promoted=!0);break}default:{let e=o.charCodeAt(0);if(e<57)r+=e-48;else{let e=o.toLowerCase();t.set(m([r,n]),{role:eE[e],color:o===e?"black":"white"}),++r}}}return t}function ex(e){return g.map(t=>h.map(n=>{let r=e.get(n+t);if(!r)return"1";{let e=e_[r.role];return"white"===r.color&&(e=e.toUpperCase()),r.promoted&&(e+="~"),e}}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}function eC(e,t){t.animation&&(eS(e.animation,t.animation),70>(e.animation.duration||0)&&(e.animation.enabled=!1))}function ew(e,t){var n,r,o;if((null==(n=t.movable)?void 0:n.dests)&&(e.movable.dests=void 0),(null==(r=t.drawable)?void 0:r.autoShapes)&&(e.drawable.autoShapes=[]),eS(e,t),t.fen&&(e.pieces=eA(t.fen),e.drawable.shapes=(null==(o=t.drawable)?void 0:o.shapes)||[]),"check"in t&&K(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&er(e,e.selected),eC(e,t),!e.movable.rookCastle&&e.movable.dests){let t="white"===e.movable.color?"1":"8",n="e"+t,r=e.movable.dests.get(n),o=e.pieces.get(n);if(!r||!o||"king"!==o.role)return;e.movable.dests.set(n,r.filter(e=>!(e==="a"+t&&r.includes("c"+t))&&!(e==="h"+t&&r.includes("g"+t))))}}function eS(e,t){for(let n in t)"__proto__"!==n&&"constructor"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)&&ek(e[n])&&ek(t[n])?eS(e[n],t[n]):e[n]=t[n])}function ek(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}let eF=(e,t)=>t.animation.enabled?eM(e,t):eD(e,t);function eD(e,t){let n=e(t);return t.dom.redraw(),n}let eB=(e,t)=>({key:e,pos:y(e),piece:t}),eP=(e,t)=>t.sort((t,n)=>x(e.pos,t.pos)-x(e.pos,n.pos))[0];function ej(e,t){let n,r,o,u=new Map,i=[],a=new Map,s=[],l=[],c=new Map;for(let[t,n]of e)c.set(t,eB(t,n));for(let e of v)n=t.pieces.get(e),r=c.get(e),n?r?C(n,r.piece)||(s.push(r),l.push(eB(e,n))):l.push(eB(e,n)):r&&s.push(r);for(let e of l)(r=eP(e,s.filter(t=>C(e.piece,t.piece))))&&(o=[r.pos[0]-e.pos[0],r.pos[1]-e.pos[1]],u.set(e.key,o.concat(o)),i.push(r.key));for(let e of s)i.includes(e.key)||a.set(e.key,e.piece);return{anims:u,fadings:a}}function eN(e,t){let n=e.animation.current;if(void 0===n){e.dom.destroyed||e.dom.redrawNow();return}let r=1-(t-n.start)*n.frequency;if(r<=0)e.animation.current=void 0,e.dom.redrawNow();else{let t=eO(r);for(let e of n.plan.anims.values())e[2]=e[0]*t,e[3]=e[1]*t;e.dom.redrawNow(!0),requestAnimationFrame((t=performance.now())=>eN(e,t))}}function eM(e,t){let n=new Map(t.pieces),r=e(t),o=ej(n,t);if(o.anims.size||o.fadings.size){let e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:o},e||eN(t,performance.now())}else t.dom.redraw();return r}let eO=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,e$=["green","red","blue","yellow"];function eR(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?eo(e):ep(e);let n=D(t),r=ev(n,ey(e),e.dom.bounds());r&&(e.drawable.current={orig:r,pos:n,brush:eH(t),snapToValidMove:e.drawable.defaultSnapToValidMove},eI(e))}function eI(e){requestAnimationFrame(()=>{let t=e.drawable.current;if(t){let n=ev(t.pos,ey(e),e.dom.bounds());n||(t.snapToValidMove=!1);let r=t.snapToValidMove?em(t.orig,t.pos,ey(e),e.dom.bounds()):n;r!==t.mouseSq&&(t.mouseSq=r,t.dest=r!==t.orig?r:void 0,e.dom.redrawNow()),eI(e)}})}function eL(e,t){e.drawable.current&&(e.drawable.current.pos=D(t))}function eT(e){let t=e.drawable.current;t&&(t.mouseSq&&eq(e.drawable,t),ez(e))}function ez(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function eU(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),eK(e.drawable))}function eH(e){var t;return e$[+!!((e.shiftKey||e.ctrlKey)&&B(e))+2*!!(e.altKey||e.metaKey||(null==(t=e.getModifierState)?void 0:t.call(e,"AltGraph")))]}function eq(e,t){let n=e=>e.orig===t.orig&&e.dest===t.dest,r=e.shapes.find(n);r&&(e.shapes=e.shapes.filter(e=>!n(e))),r&&r.brush===t.brush||e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),eK(e)}function eK(e){e.onChange&&e.onChange(e.shapes)}function eV(e,t){if(!(e.trustAllEvents||t.isTrusted)||void 0!==t.buttons&&t.buttons>1||t.touches&&t.touches.length>1)return;let n=e.dom.bounds(),r=D(t),o=ev(r,ey(e),n);if(!o)return;let u=e.pieces.get(o),i=e.selected;if(!i&&e.drawable.enabled&&(e.drawable.eraseOnClick||!u||u.color!==e.turnColor)&&eU(e),!1!==t.cancelable&&(!t.touches||e.blockTouchScroll||u||i||eW(e,r)))t.preventDefault();else if(t.touches)return;let a=!!e.premovable.current,s=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&ei(e,e.selected,o)?eF(e=>en(e,o),e):en(e,o);let l=e.selected===o,c=e0(e,o);if(u&&c&&l&&ed(e,o)){e.draggable.current={orig:o,piece:u,origPos:r,pos:r,started:e.draggable.autoDistance&&e.stats.dragged,element:c,previouslySelected:i,originTarget:t.target,keyHasChanged:!1},c.cgDragging=!0,c.classList.add("dragging");let a=e.dom.elements.ghost;a&&(a.className=`ghost ${u.color} ${u.role}`,S(a,w(n)(y(o),ey(e))),F(a,!0)),eX(e)}else a&&W(e),s&&X(e);e.dom.redraw()}function eW(e,t){let n=ey(e),r=e.dom.bounds(),o=Math.pow(r.width/8,2);for(let u of e.pieces.keys())if(x(j(u,n,r),t)<=o)return!0;return!1}function eG(e,t,n,r){let o="a0";e.pieces.set(o,t),e.dom.redraw();let u=D(n);e.draggable.current={orig:o,piece:t,origPos:u,pos:u,started:!0,element:()=>e0(e,o),originTarget:n.target,newPiece:!0,force:!!r,keyHasChanged:!1},eX(e)}function eX(e){requestAnimationFrame(()=>{var t;let n=e.draggable.current;if(!n)return;(null==(t=e.animation.current)?void 0:t.plan.anims.has(n.orig))&&(e.animation.current=void 0);let r=e.pieces.get(n.orig);if(r&&C(r,n.piece)){if(!n.started&&x(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if("function"==typeof n.element){let e=n.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),n.element=e}let t=e.dom.bounds();S(n.element,[n.pos[0]-t.left-t.width/16,n.pos[1]-t.top-t.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==ev(n.pos,ey(e),t))}}else eQ(e);eX(e)})}function eY(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=D(t))}function eZ(e,t){let n=e.draggable.current;if(!n)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&n.originTarget!==t.target&&!n.newPiece){e.draggable.current=void 0;return}W(e),X(e);let r=ev(D(t)||n.pos,ey(e),e.dom.bounds());r&&n.started&&n.orig!==r?n.newPiece?et(e,n.orig,r,n.force):(e.stats.ctrlKey=t.ctrlKey,ee(e,n.orig,r)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!r&&(e.pieces.delete(n.orig),U(e.events.change)),(n.orig===n.previouslySelected||n.keyHasChanged)&&(n.orig===r||!r)?eo(e):e.selectable.enabled||eo(e),eJ(e),e.draggable.current=void 0,e.dom.redraw()}function eQ(e){let t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,eo(e),eJ(e),e.dom.redraw())}function eJ(e){let t=e.dom.elements;t.ghost&&F(t.ghost,!1)}function e0(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}function e1(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{e2(e,2),setTimeout(()=>e2(e,void 0),120)},120)}function e2(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function e6(e,t){function n(){H(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&n(),eC(e,t),(t.fen?eF:eD)(e=>ew(e,t),e)},state:e,getFen:()=>ex(e.pieces),toggleOrientation:n,setPieces(t){eF(e=>q(e,t),e)},selectSquare(t,n){t?eF(e=>en(e,t,n),e):e.selected&&(eo(e),e.dom.redraw())},move(t,n){eF(e=>Z(e,t,n),e)},newPiece(t,n){eF(e=>Q(e,t,n),e)},playPremove(){if(e.premovable.current){if(eF(ef,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){let n=eh(e,t);return e.dom.redraw(),n}return!1},cancelPremove(){eD(W,e)},cancelPredrop(){eD(X,e)},cancelMove(){eD(e=>{ep(e),eQ(e)},e)},stop(){eD(e=>{eg(e),eQ(e)},e)},explode(t){e1(e,t)},setAutoShapes(t){eD(e=>e.drawable.autoShapes=t,e)},setShapes(t){eD(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>ev(t,ey(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,n,r){eG(e,t,n,r)},destroy(){eg(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function e3(){return{pieces:eA(eb),orientation:"white",turnColor:"white",coordinates:!0,coordinatesOnSquares:!1,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purple",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},white:{key:"white",color:"white",opacity:1,lineWidth:10}},prevSvgHash:""},hold:_()}}let e5={key:"hilitePrimary",color:"#3291ff",opacity:1,lineWidth:1},e4={key:"hiliteWhite",color:"#ffffff",opacity:1,lineWidth:1};function e7(){let e=th("defs"),t=tp(th("filter"),{id:"cg-filter-blur"});return t.appendChild(tp(th("feGaussianBlur"),{stdDeviation:"0.019"})),e.appendChild(t),e}function e8(e,t,n){var r;let o=e.drawable,u=o.current,i=u&&u.mouseSq?u:void 0,a=new Map,s=e.dom.bounds(),l=o.autoShapes.filter(e=>!e.piece);for(let t of o.shapes.concat(l).concat(i?[i]:[])){if(!t.dest)continue;let n=null!=(r=a.get(t.dest))?r:new Set,o=tE(td(y(t.orig),e.orientation),s),u=tE(td(y(t.dest),e.orientation),s);n.add(tA(o,u)),a.set(t.dest,n)}let c=o.shapes.concat(l).map(e=>({shape:e,current:!1,hash:tt(e,tf(e.dest,a),!1,s)}));i&&c.push({shape:i,current:!0,hash:tt(i,tf(i.dest,a),!0,s)});let d=c.map(e=>e.hash).join(";");d===e.drawable.prevSvgHash||(e.drawable.prevSvgHash=d,e9(o,c,t.querySelector("defs")),te(c,t.querySelector("g"),n.querySelector("g"),t=>tu(e,t,o.brushes,a,s)))}function e9(e,t,n){var r;let o,u=new Map;for(let n of t.filter(e=>e.shape.dest&&e.shape.brush))o=tg(e.brushes[n.shape.brush],n.shape.modifiers),(null==(r=n.shape.modifiers)?void 0:r.hilite)&&u.set(ta(o).key,ta(o)),u.set(o.key,o);let i=new Set,a=n.firstElementChild;for(;a;)i.add(a.getAttribute("cgKey")),a=a.nextElementSibling;for(let[e,t]of u.entries())i.has(e)||n.appendChild(tl(t))}function te(e,t,n,r){let o=new Map;for(let t of e)o.set(t.hash,!1);for(let e of[t,n]){let t=[],n=e.firstElementChild,r;for(;n;)r=n.getAttribute("cgHash"),o.has(r)?o.set(r,!0):t.push(n),n=n.nextElementSibling;for(let n of t)e.removeChild(n)}for(let u of e.filter(e=>!o.get(e.hash)))for(let e of r(u))e.isCustom?n.appendChild(e.el):t.appendChild(e.el)}function tt({orig:e,dest:t,brush:n,piece:r,modifiers:o,customSvg:u,label:i},a,s,l){var c,d;return[l.width,l.height,s,e,t,n,a&&"-",r&&tn(r),o&&tr(o),u&&`custom-${to(u.html)},${null!=(d=null==(c=u.center)?void 0:c[0])?d:"o"}`,i&&`label-${to(i.text)}`].filter(e=>e).join(",")}function tn(e){return[e.color,e.role,e.scale].filter(e=>e).join(",")}function tr(e){return[e.lineWidth,e.hilite&&"*"].filter(e=>e).join(",")}function to(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function tu(e,{shape:t,current:n,hash:r},o,u,i){var a,s;let l=tE(td(y(t.orig),e.orientation),i),c=t.dest?tE(td(y(t.dest),e.orientation),i):l,d=t.brush&&tg(o[t.brush],t.modifiers),f=u.get(t.dest),h=[];if(d){let e=tp(th("g"),{cgHash:r});h.push({el:e}),l[0]!==c[0]||l[1]!==c[1]?e.appendChild(ts(t,d,l,c,n,tf(t.dest,u))):e.appendChild(ti(o[t.brush],l,n,i))}if(t.label){let e=t.label;null!=(a=e.fill)||(e.fill=t.brush&&o[t.brush].color);let n=t.brush?void 0:"tr";h.push({el:tc(e,r,l,c,f,n),isCustom:!0})}if(t.customSvg){let e=null!=(s=t.customSvg.center)?s:"orig",[n,o]="label"===e?tC(l,c,f).map(e=>e-.5):"dest"===e?c:l,u=tp(th("g"),{transform:`translate(${n},${o})`,cgHash:r});u.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,h.push({el:u,isCustom:!0})}return h}function ti(e,t,n,r){let o=tv(),u=(r.width+r.height)/(4*Math.max(r.width,r.height));return tp(th("circle"),{stroke:e.color,"stroke-width":o[+!n],fill:"none",opacity:ty(e,n),cx:t[0],cy:t[1],r:u-o[1]/2})}function ta(e){return["#ffffff","#fff","white"].includes(e.color)?e5:e4}function ts(e,t,n,r,o,u){var i;function a(i){var a;let s=tb(u&&!o),l=r[0]-n[0],c=Math.atan2(r[1]-n[1],l),d=Math.cos(c)*s,f=Math.sin(c)*s;return tp(th("line"),{stroke:i?ta(t).color:t.color,"stroke-width":tm(t,o)+.04*!!i,"stroke-linecap":"round","marker-end":`url(#arrowhead-${i?ta(t).key:t.key})`,opacity:(null==(a=e.modifiers)?void 0:a.hilite)?1:ty(t,o),x1:n[0],y1:n[1],x2:r[0]-d,y2:r[1]-f})}if(!(null==(i=e.modifiers)?void 0:i.hilite))return a(!1);let s=th("g"),l=tp(th("g"),{filter:"url(#cg-filter-blur)"});return l.appendChild(t_(n,r)),l.appendChild(a(!0)),s.appendChild(l),s.appendChild(a(!1)),s}function tl(e){let t=tp(th("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key.startsWith("hilite")?1.86:2.05,refY:2});return t.appendChild(tp(th("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function tc(e,t,n,r,o,u){var i;let a=.4,s=.4*.75**e.text.length,l=tC(n,r,o),c=.4*("tr"===u),d=tp(th("g"),{transform:`translate(${l[0]+c},${l[1]-c})`,cgHash:t});d.appendChild(tp(th("circle"),{r:a/2,"fill-opacity":u?1:.8,"stroke-opacity":u?1:.7,"stroke-width":.03,fill:null!=(i=e.fill)?i:"#666",stroke:"white"}));let f=tp(th("text"),{"font-size":s,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return f.innerHTML=e.text,d.appendChild(f),d}function td(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function tf(e,t){return!0===(e&&t.has(e)&&t.get(e).size>1)}function th(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function tp(e,t){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function tg(e,t){return t?{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(e=>e).join("")}:e}function tv(){return[3/64,4/64]}function tm(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function ty(e,t){return(e.opacity||1)*(t?.9:1)}function tb(e){return(e?20:10)/64}function tE(e,t){let n=Math.min(1,t.width/t.height),r=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*r]}function t_(e,t){let n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return tp(th("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}function tA(e,t,n=!0){let r=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(8*r/Math.PI)+16)%16:r}function tx(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((e,t)=>e+t*t,0))}function tC(e,t,n){let r=tx(e,t),o=tA(e,t,!1);if(n&&(r-=33/64,n.size>1)){r-=10/64;let o=tA(e,t);(n.has((o+1)%16)||n.has((o+15)%16))&&1&o&&(r-=.4)}return[e[0]-Math.cos(o)*r,e[1]-Math.sin(o)*r].map(e=>e+.5)}function tw(e,t){let n,r,o,u;for(let n of(e.innerHTML="",e.classList.add("cg-wrap"),f))e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);let i=P("cg-container");e.appendChild(i);let a=P("cg-board");if(i.appendChild(a),t.drawable.visible&&((n=tp(th("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"})).appendChild(e7()),n.appendChild(th("g")),(r=tp(th("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"})).appendChild(th("g")),o=P("cg-auto-pieces"),i.appendChild(n),i.appendChild(r),i.appendChild(o)),t.coordinates){let e="black"===t.orientation?" black":"",n="left"===t.ranksPosition?" left":"";if(t.coordinatesOnSquares){let r="white"===t.orientation?e=>e+1:e=>8-e;h.forEach((t,o)=>i.appendChild(tS(p.map(e=>t+e),"squares rank"+r(o)+e+n)))}else i.appendChild(tS(p,"ranks"+e+n)),i.appendChild(tS(h,"files"+e))}return t.draggable.enabled&&t.draggable.showGhost&&(F(u=P("piece","ghost"),!1),i.appendChild(u)),{board:a,container:i,wrap:e,ghost:u,svg:n,customSvg:r,autoPieces:o}}function tS(e,t){let n,r=P("coords",t);for(let t of e)(n=P("coord")).textContent=t,r.appendChild(n);return r}function tk(e,t){if(!e.dropmode.active)return;W(e),X(e);let n=e.dropmode.piece;if(n){e.pieces.set("a0",n);let r=D(t),o=r&&ev(r,ey(e),e.dom.bounds());o&&et(e,"a0",o)}e.dom.redraw()}function tF(e,t){let n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",e=>e.preventDefault()),e.viewOnly)return;let r=tP(e);n.addEventListener("touchstart",r,{passive:!1}),n.addEventListener("mousedown",r,{passive:!1})}function tD(e,t){let n=[];if("ResizeObserver"in window||n.push(tB(document.body,"chessground.resize",t)),!e.viewOnly){let t=tj(e,eY,eL),r=tj(e,eZ,eT);for(let e of["touchmove","mousemove"])n.push(tB(document,e,t));for(let e of["touchend","mouseup"])n.push(tB(document,e,r));let o=()=>e.dom.bounds.clear();n.push(tB(document,"scroll",o,{capture:!0,passive:!0})),n.push(tB(window,"resize",o,{passive:!0}))}return()=>n.forEach(e=>e())}function tB(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}let tP=e=>t=>{e.draggable.current?eQ(e):e.drawable.current?ez(e):t.shiftKey||B(t)?e.drawable.enabled&&eR(e,t):e.viewOnly||(e.dropmode.active?tk(e,t):eV(e,t))},tj=(e,t,n)=>r=>{e.drawable.current?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)};function tN(e){let t,n,r,o,u,i,a,s,l,c,d=ey(e),f=w(e.dom.bounds()),h=e.dom.elements.board,p=e.pieces,g=e.animation.current,v=g?g.plan.anims:new Map,m=g?g.plan.fadings:new Map,b=e.draggable.current,E=tz(e),_=new Set,A=new Set,x=new Map,C=new Map;for(n=h.firstChild;n;){if(t=n.cgKey,t$(n))if(r=p.get(t),u=v.get(t),i=m.get(t),o=n.cgPiece,n.cgDragging&&(!b||b.orig!==t)&&(n.classList.remove("dragging"),S(n,f(y(t),d)),n.cgDragging=!1),!i&&n.cgFading&&(n.cgFading=!1,n.classList.remove("fading")),r){if(u&&n.cgAnimating&&o===tT(r)){let e=y(t);e[0]+=u[2],e[1]+=u[3],n.classList.add("anim"),S(n,f(e,d))}else n.cgAnimating&&(n.cgAnimating=!1,n.classList.remove("anim"),S(n,f(y(t),d)),e.addPieceZIndex&&(n.style.zIndex=tL(y(t),d)));o!==tT(r)||i&&n.cgFading?i&&o===tT(i)?(n.classList.add("fading"),n.cgFading=!0):tH(x,o,n):_.add(t)}else tH(x,o,n);else if(tR(n)){let e=n.className;E.get(t)===e?A.add(t):tH(C,e,n)}n=n.nextSibling}for(let[e,t]of E)if(!A.has(e)){c=(l=C.get(t))&&l.pop();let n=f(y(e),d);if(c)c.cgKey=e,S(c,n);else{let r=P("square",t);r.cgKey=e,S(r,n),h.insertBefore(r,h.firstChild)}}for(let[t,n]of p)if(u=v.get(t),!_.has(t))if(s=(a=x.get(tT(n)))&&a.pop()){s.cgKey=t,s.cgFading&&(s.classList.remove("fading"),s.cgFading=!1);let n=y(t);e.addPieceZIndex&&(s.style.zIndex=tL(n,d)),u&&(s.cgAnimating=!0,s.classList.add("anim"),n[0]+=u[2],n[1]+=u[3]),S(s,f(n,d))}else{let r=tT(n),o=P("piece",r),i=y(t);o.cgPiece=r,o.cgKey=t,u&&(o.cgAnimating=!0,i[0]+=u[2],i[1]+=u[3]),S(o,f(i,d)),e.addPieceZIndex&&(o.style.zIndex=tL(i,d)),h.appendChild(o)}for(let t of x.values())tI(e,t);for(let t of C.values())tI(e,t)}function tM(e){let t=ey(e),n=w(e.dom.bounds()),r=e.dom.elements.board.firstChild;for(;r;)(t$(r)&&!r.cgAnimating||tR(r))&&S(r,n(y(r.cgKey),t)),r=r.nextSibling}function tO(e){var t,n;let r=e.dom.elements.wrap.getBoundingClientRect(),o=e.dom.elements.container,u=r.height/r.width,i=8*Math.floor(r.width*window.devicePixelRatio/8)/window.devicePixelRatio,a=i*u;o.style.width=i+"px",o.style.height=a+"px",e.dom.bounds.clear(),null==(t=e.addDimensionsCssVarsTo)||t.style.setProperty("---cg-width",i+"px"),null==(n=e.addDimensionsCssVarsTo)||n.style.setProperty("---cg-height",a+"px")}let t$=e=>"PIECE"===e.tagName,tR=e=>"SQUARE"===e.tagName;function tI(e,t){for(let n of t)e.dom.elements.board.removeChild(n)}function tL(e,t){let n=3,r=e[1],o=t?n+7-r:n+r;return`${o}`}let tT=e=>`${e.color} ${e.role}`;function tz(e){var t,n,r;let o=new Map;if(e.lastMove&&e.highlight.lastMove)for(let t of e.lastMove)tU(o,t,"last-move");if(e.check&&e.highlight.check&&tU(o,e.check,"check"),e.selected&&(tU(o,e.selected,"selected"),e.movable.showDests)){let u=null==(t=e.movable.dests)?void 0:t.get(e.selected);if(u)for(let t of u)tU(o,t,"move-dest"+(e.pieces.has(t)?" oc":""));let i=null!=(r=null==(n=e.premovable.customDests)?void 0:n.get(e.selected))?r:e.premovable.dests;if(i)for(let t of i)tU(o,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}let u=e.premovable.current;if(u)for(let e of u)tU(o,e,"current-premove");else e.predroppable.current&&tU(o,e.predroppable.current.key,"current-premove");let i=e.exploding;if(i)for(let e of i.keys)tU(o,e,"exploding"+i.stage);return e.highlight.custom&&e.highlight.custom.forEach((e,t)=>{tU(o,t,e)}),o}function tU(e,t,n){let r=e.get(t);r?e.set(t,`${r} ${n}`):e.set(t,n)}function tH(e,t,n){let r=e.get(t);r?r.push(n):e.set(t,[n])}function tq(e,t,n){let r=new Map,o=[];for(let t of e)r.set(t.hash,!1);let u=t.firstElementChild,i;for(;u;)i=u.getAttribute("cgHash"),r.has(i)?r.set(i,!0):o.push(u),u=u.nextElementSibling;for(let e of o)t.removeChild(e);for(let o of e)r.get(o.hash)||t.appendChild(n(o))}function tK(e,t){tq(e.drawable.autoShapes.filter(e=>e.piece).map(e=>({shape:e,hash:tG(e),current:!1})),t,t=>tW(e,t,e.dom.bounds()))}function tV(e){var t;let n=ey(e),r=w(e.dom.bounds()),o=null==(t=e.dom.elements.autoPieces)?void 0:t.firstChild;for(;o;)k(o,r(y(o.cgKey),n),o.cgScale),o=o.nextSibling}function tW(e,{shape:t,hash:n},r){var o,u,i;let a=t.orig,s=null==(o=t.piece)?void 0:o.role,l=null==(u=t.piece)?void 0:u.color,c=null==(i=t.piece)?void 0:i.scale,d=P("piece",`${s} ${l}`);return d.setAttribute("cgHash",n),d.cgKey=a,d.cgScale=c,k(d,w(r)(y(a),ey(e)),c),d}let tG=e=>{var t,n,r;return[e.orig,null==(t=e.piece)?void 0:t.role,null==(n=e.piece)?void 0:n.color,null==(r=e.piece)?void 0:r.scale].join(",")};function tX(e,t){let n=e3();function r(){let t="dom"in n?n.dom.unbind:void 0,r=tw(e,n),o=E(()=>r.board.getBoundingClientRect()),u=e=>{tN(a),r.autoPieces&&tK(a,r.autoPieces),!e&&r.svg&&e8(a,r.svg,r.customSvg)},i=()=>{tO(a),tM(a),r.autoPieces&&tV(a)},a=n;return a.dom={elements:r,bounds:o,redraw:tY(u),redrawNow:u,unbind:t},a.drawable.prevSvgHash="",tO(a),u(!1),tF(a,i),t||(a.dom.unbind=tD(a,i)),a.events.insert&&a.events.insert(r),a}return ew(n,t||{}),e6(r(),r)}function tY(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}var tZ=d;let tQ=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,o,u);return u},tJ=e=>e?tQ(e):tQ,t0=e=>e;function t1(e,t=t0){let n=tZ.default.useSyncExternalStore(e.subscribe,tZ.default.useCallback(()=>t(e.getState()),[e,t]),tZ.default.useCallback(()=>t(e.getInitialState()),[e,t]));return tZ.default.useDebugValue(n),n}let t2=e=>{let t=tJ(e),n=e=>t1(t,e);return Object.assign(n,t),n},t6=e=>e?t2(e):t2;function t3(e){return null!==e?{comment:e,variations:[]}:{variations:[]}}function t5(e,t,n,r,o){let u={move:e,variations:o};return t&&(u.suffix=t),n&&(u.nag=n),null!==r&&(u.comment=r),u}function t4(...e){let[t,...n]=e,r=t;for(let e of n)null!==e&&(r.variations=[e,...e.variations],e.variations=[],r=e);return t}function t7(e,t){if(t.marker&&t.marker.comment){let e=t.root;for(;;){let n=e.variations[0];if(!n){e.comment=t.marker.comment;break}e=n}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}function t8(e,t,n,r){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,t8.prototype),o.expected=t,o.found=n,o.location=r,o.name="SyntaxError",o}function t9(e,t,n){return(n=n||" ",e.length>t)?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}function ne(e,t){var n,r={},o=(t=void 0!==t?t:{}).grammarSource,u={pgn:eK},i=eK,a="[",s='"',l="]",c=".",d="O-O-O",f="O-O",h="0-0-0",p="0-0",g="$",v="{",m="}",y=";",b="(",E=")",_="1-0",A="0-1",x="1/2-1/2",C="*",w=/^[a-zA-Z]/,S=/^[^"]/,k=/^[0-9]/,F=/^[.]/,D=/^[a-zA-Z1-8\-=]/,B=/^[+#]/,P=/^[!?]/,j=/^[^}]/,N=/^[^\r\n]/,M=/^[ \t\r\n]/,O=eT("tag pair"),$=eR("[",!1),R=eR('"',!1),I=eR("]",!1),L=eT("tag name"),T=eI([["a","z"],["A","Z"]],!1,!1),z=eT("tag value"),U=eI(['"'],!0,!1),H=eT("move number"),q=eI([["0","9"]],!1,!1),K=eR(".",!1),V=eI(["."],!1,!1),W=eT("standard algebraic notation"),G=eR("O-O-O",!1),X=eR("O-O",!1),Y=eR("0-0-0",!1),Z=eR("0-0",!1),Q=eI([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),J=eI(["+","#"],!1,!1),ee=eT("suffix annotation"),et=eI(["!","?"],!1,!1),en=eT("NAG"),er=eR("$",!1),eo=eT("brace comment"),eu=eR("{",!1),ei=eI(["}"],!0,!1),ea=eR("}",!1),es=eT("rest of line comment"),el=eR(";",!1),ec=eI(["\r","\n"],!0,!1),ed=eT("variation"),ef=eR("(",!1),eh=eR(")",!1),ep=eT("game termination marker"),eg=eR("1-0",!1),ev=eR("0-1",!1),em=eR("1/2-1/2",!1),ey=eR("*",!1),eb=eT("whitespace"),eE=eI([" ","	","\r","\n"],!1,!1),e_=function(e,t){return t7(e,t)},eA=function(e){return Object.fromEntries(e)},ex=function(e,t){return[e,t]},eC=function(e,t){return{root:e,marker:t}},ew=function(e,t){return t4(t3(e),...t.flat())},eS=function(e,t,n,r,o){return t5(e,t,n,r,o)},ek=function(e){return e},eF=function(e){return e.replace(/[\r\n]+/g," ")},eD=function(e){return e.trim()},eB=function(e){return e},eP=function(e,t){return{result:e,comment:t}},ej=0|t.peg$currPos,eN=[{line:1,column:1}],eM=ej,eO=t.peg$maxFailExpected||[],e$=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in u))throw Error("Can't start parsing from rule \""+t.startRule+'".');i=u[t.startRule]}function eR(e,t){return{type:"literal",text:e,ignoreCase:t}}function eI(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function eL(){return{type:"end"}}function eT(e){return{type:"other",description:e}}function ez(t){var n,r=eN[t];if(r)return r;if(t>=eN.length)n=eN.length-1;else for(n=t;!eN[--n];);for(r={line:(r=eN[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return eN[t]=r,r}function eU(e,t,n){var r=ez(e),u=ez(t);return{source:o,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:u.line,column:u.column}}}function eH(e){ej<eM||(ej>eM&&(eM=ej,eO=[]),eO.push(e))}function eq(e,t,n){return new t8(t8.buildMessage(e,t),e,t,n)}function eK(){var e;return e=e_(eV(),eY())}function eV(){var e,t,n;for(t=[],n=eW();n!==r;)t.push(n),n=eW();return n=e8(),e=eA(t)}function eW(){var t,n,o,u,i,c,d;return e$++,t=ej,e8(),91===e.charCodeAt(ej)?(n=a,ej++):(n=r,0===e$&&eH($)),n!==r?(e8(),(o=eG())!==r?(e8(),34===e.charCodeAt(ej)?(u=s,ej++):(u=r,0===e$&&eH(R)),u!==r?(i=eX(),34===e.charCodeAt(ej)?(c=s,ej++):(c=r,0===e$&&eH(R)),c!==r?(e8(),93===e.charCodeAt(ej)?(d=l,ej++):(d=r,0===e$&&eH(I)),d!==r?t=ex(o,i):(ej=t,t=r)):(ej=t,t=r)):(ej=t,t=r)):(ej=t,t=r)):(ej=t,t=r),e$--,t===r&&0===e$&&eH(O),t}function eG(){var t,n,o;if(e$++,t=ej,n=[],o=e.charAt(ej),w.test(o)?ej++:(o=r,0===e$&&eH(T)),o!==r)for(;o!==r;)n.push(o),o=e.charAt(ej),w.test(o)?ej++:(o=r,0===e$&&eH(T));else n=r;return t=n!==r?e.substring(t,ej):n,e$--,t===r&&(n=r,0===e$&&eH(L)),t}function eX(){var t,n,o;for(e$++,t=ej,n=[],o=e.charAt(ej),S.test(o)?ej++:(o=r,0===e$&&eH(U));o!==r;)n.push(o),o=e.charAt(ej),S.test(o)?ej++:(o=r,0===e$&&eH(U));return t=e.substring(t,ej),e$--,n=r,0===e$&&eH(z),t}function eY(){var e,t,n;return t=eZ(),e8(),(n=e7())===r&&(n=null),e8(),e=eC(t,n)}function eZ(){var e,t,n;for((e=e6())===r&&(e=null),t=[],n=eQ();n!==r;)t.push(n),n=eQ();return ew(e,t)}function eQ(){var e,t,n,o,u,i,a,s;if(e=ej,e8(),eJ(),e8(),(t=e0())!==r){for((n=e1())===r&&(n=null),o=[],u=e2();u!==r;)o.push(u),u=e2();for(u=e8(),(i=e6())===r&&(i=null),a=[],s=e4();s!==r;)a.push(s),s=e4();e=eS(t,n,o,i,a)}else ej=e,e=r;return e}function eJ(){var t,n,o,u,i,a;for(e$++,t=ej,n=[],o=e.charAt(ej),k.test(o)?ej++:(o=r,0===e$&&eH(q));o!==r;)n.push(o),o=e.charAt(ej),k.test(o)?ej++:(o=r,0===e$&&eH(q));if(46===e.charCodeAt(ej)?(o=c,ej++):(o=r,0===e$&&eH(K)),o!==r){for(u=e8(),i=[],a=e.charAt(ej),F.test(a)?ej++:(a=r,0===e$&&eH(V));a!==r;)i.push(a),a=e.charAt(ej),F.test(a)?ej++:(a=r,0===e$&&eH(V));t=n=[n,o,u,i]}else ej=t,t=r;return e$--,t===r&&(n=r,0===e$&&eH(H)),t}function e0(){var t,n,o,u,i,a;if(e$++,t=ej,n=ej,e.substr(ej,5)===d?(o=d,ej+=5):(o=r,0===e$&&eH(G)),o===r&&(e.substr(ej,3)===f?(o=f,ej+=3):(o=r,0===e$&&eH(X)),o===r&&(e.substr(ej,5)===h?(o=h,ej+=5):(o=r,0===e$&&eH(Y)),o===r))&&(e.substr(ej,3)===p?(o=p,ej+=3):(o=r,0===e$&&eH(Z)),o===r))if(o=ej,u=e.charAt(ej),w.test(u)?ej++:(u=r,0===e$&&eH(T)),u!==r){if(i=[],a=e.charAt(ej),D.test(a)?ej++:(a=r,0===e$&&eH(Q)),a!==r)for(;a!==r;)i.push(a),a=e.charAt(ej),D.test(a)?ej++:(a=r,0===e$&&eH(Q));else i=r;i!==r?o=u=[u,i]:(ej=o,o=r)}else ej=o,o=r;return o!==r?(u=e.charAt(ej),B.test(u)?ej++:(u=r,0===e$&&eH(J)),u===r&&(u=null),n=o=[o,u]):(ej=n,n=r),t=n!==r?e.substring(t,ej):n,e$--,t===r&&(n=r,0===e$&&eH(W)),t}function e1(){var t,n,o;for(e$++,t=ej,n=[],o=e.charAt(ej),P.test(o)?ej++:(o=r,0===e$&&eH(et));o!==r;)n.push(o),n.length>=2?o=r:(o=e.charAt(ej),P.test(o)?ej++:(o=r,0===e$&&eH(et)));return n.length<1?(ej=t,t=r):t=n,e$--,t===r&&(n=r,0===e$&&eH(ee)),t}function e2(){var t,n,o,u,i;if(e$++,t=ej,e8(),36===e.charCodeAt(ej)?(n=g,ej++):(n=r,0===e$&&eH(er)),n!==r){if(o=ej,u=[],i=e.charAt(ej),k.test(i)?ej++:(i=r,0===e$&&eH(q)),i!==r)for(;i!==r;)u.push(i),i=e.charAt(ej),k.test(i)?ej++:(i=r,0===e$&&eH(q));else u=r;(o=u!==r?e.substring(o,ej):u)!==r?t=ek(o):(ej=t,t=r)}else ej=t,t=r;return e$--,t===r&&0===e$&&eH(en),t}function e6(){var e;return(e=e3())===r&&(e=e5()),e}function e3(){var t,n,o,u,i;if(e$++,t=ej,123===e.charCodeAt(ej)?(n=v,ej++):(n=r,0===e$&&eH(eu)),n!==r){for(o=ej,u=[],i=e.charAt(ej),j.test(i)?ej++:(i=r,0===e$&&eH(ei));i!==r;)u.push(i),i=e.charAt(ej),j.test(i)?ej++:(i=r,0===e$&&eH(ei));o=e.substring(o,ej),125===e.charCodeAt(ej)?(u=m,ej++):(u=r,0===e$&&eH(ea)),u!==r?t=eF(o):(ej=t,t=r)}else ej=t,t=r;return e$--,t===r&&(n=r,0===e$&&eH(eo)),t}function e5(){var t,n,o,u,i;if(e$++,t=ej,59===e.charCodeAt(ej)?(n=y,ej++):(n=r,0===e$&&eH(el)),n!==r){for(o=ej,u=[],i=e.charAt(ej),N.test(i)?ej++:(i=r,0===e$&&eH(ec));i!==r;)u.push(i),i=e.charAt(ej),N.test(i)?ej++:(i=r,0===e$&&eH(ec));t=eD(o=e.substring(o,ej))}else ej=t,t=r;return e$--,t===r&&(n=r,0===e$&&eH(es)),t}function e4(){var t,n,o,u;return e$++,t=ej,e8(),40===e.charCodeAt(ej)?(n=b,ej++):(n=r,0===e$&&eH(ef)),n!==r&&(o=eZ())!==r?(e8(),41===e.charCodeAt(ej)?(u=E,ej++):(u=r,0===e$&&eH(eh)),u!==r?t=eB(o):(ej=t,t=r)):(ej=t,t=r),e$--,t===r&&0===e$&&eH(ed),t}function e7(){var t,n,o;return e$++,t=ej,e.substr(ej,3)===_?(n=_,ej+=3):(n=r,0===e$&&eH(eg)),n===r&&(e.substr(ej,3)===A?(n=A,ej+=3):(n=r,0===e$&&eH(ev)),n===r&&(e.substr(ej,7)===x?(n=x,ej+=7):(n=r,0===e$&&eH(em)),n===r&&(42===e.charCodeAt(ej)?(n=C,ej++):(n=r,0===e$&&eH(ey))))),n!==r?(e8(),(o=e6())===r&&(o=null),t=eP(n,o)):(ej=t,t=r),e$--,t===r&&(n=r,0===e$&&eH(ep)),t}function e8(){var t,n;for(e$++,t=[],n=e.charAt(ej),M.test(n)?ej++:(n=r,0===e$&&eH(eE));n!==r;)t.push(n),n=e.charAt(ej),M.test(n)?ej++:(n=r,0===e$&&eH(eE));return e$--,n=r,0===e$&&eH(eb),t}if(n=i(),t.peg$library)return{peg$result:n,peg$currPos:ej,peg$FAILED:r,peg$maxFailExpected:eO,peg$maxFailPos:eM};if(n!==r&&ej===e.length)return n;throw n!==r&&ej<e.length&&eH(eL()),eq(eO,eM<e.length?e.charAt(eM):null,eM<e.length?eU(eM,eM+1):eU(eM,eM))}(function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n})(t8,Error),t8.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,u=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(o):o,i=this.location.source+":"+u.line+":"+u.column;if(r){var a=this.location.end,s=t9("",u.line.toString().length," "),l=r[o.line-1],c=(o.line===a.line?a.column:l.length+1)-o.column||1;t+="\n --> "+i+"\n"+s+" |\n"+u.line+" | "+l+"\n"+s+" | "+t9("",o.column-1," ")+t9("",c,"^")}else t+="\n at "+i}return t},t8.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?u(e[0])+"-"+u(e[1]):u(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return n[e.type](e)}function a(e){return e?'"'+o(e)+'"':"end of input"}return"Expected "+function(e){var t,n,r=e.map(i);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+a(t)+" found."};let nt=0xffffffffffffffffn;function nn(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function nr(e,t){return e*t&nt}let no=function(e){return function(){let t=BigInt(e&nt),n=BigInt(e>>64n&nt),r=nr(nn(nr(t,5n),7n),9n);return n^=t,t=(nn(t,24n)^n^n<<16n)&nt,e=(n=nn(n,37n))<<64n|t,r}}(0xa187eb39cdcaed8f31c4b365b102e01en),nu=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>no()))),ni=Array.from({length:8},()=>no()),na=Array.from({length:16},()=>no()),ns=no(),nl="w",nc="b",nd="p",nf="n",nh="b",np="r",ng="q",nv="k",nm="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class ny{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:n,piece:r,from:o,to:u,flags:i,captured:a,promotion:s}=t,l=nq(o),c=nq(u);for(const o in this.color=n,this.piece=r,this.from=l,this.to=c,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=l+c,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="",n_)n_[o]&i&&(this.flags+=nE[o]);a&&(this.captured=a),s&&(this.promotion=s,this.lan+=s)}isCapture(){return this.flags.indexOf(nE.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(nE.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(nE.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(nE.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(nE.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(nE.BIG_PAWN)>-1}}let nb=-1,nE={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},n_={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},nA={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},nx={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},nC={...nA,...nx},nw={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},nS={b:[16,32,17,15],w:[-16,-32,-17,-15]},nk={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},nF=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],nD=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],nB={p:1,n:2,b:4,r:8,q:16,k:32},nP="pnbrqkPNBRQK",nj=[nf,nh,np,ng],nN=7,nM=6,nO=1,n$=0,nR={[nv]:n_.KSIDE_CASTLE,[ng]:n_.QSIDE_CASTLE},nI={w:[{square:nw.a1,flag:n_.QSIDE_CASTLE},{square:nw.h1,flag:n_.KSIDE_CASTLE}],b:[{square:nw.a8,flag:n_.QSIDE_CASTLE},{square:nw.h8,flag:n_.KSIDE_CASTLE}]},nL={b:nO,w:nM},nT="--";function nz(e){return e>>4}function nU(e){return 15&e}function nH(e){return -1!=="0123456789".indexOf(e)}function nq(e){let t=nU(e),n=nz(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function nK(e){return e===nl?nc:nl}function nV(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let r=parseInt(t[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let o=t[0].split("/");if(8!==o.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<o.length;e++){let t=0,n=!1;for(let r=0;r<o[e].length;r++)if(nH(o[e][r])){if(n)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(o[e][r],10),n=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[e][r]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,n=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:n}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!n.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(n)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(o[0]+o[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function nW(e,t){let n=e.from,r=e.to,o=e.piece,u=0,i=0,a=0;for(let e=0,s=t.length;e<s;e++){let s=t[e].from,l=t[e].to;o===t[e].piece&&n!==s&&r===l&&(u++,nz(n)===nz(s)&&i++,nU(n)===nU(s)&&a++)}if(u>0)if(i>0&&a>0)return nq(n);else if(a>0)return nq(n).charAt(1);else return nq(n).charAt(0);return""}function nG(e,t,n,r,o,u,i=n_.NORMAL){let a=nz(r);if(o===nd&&(a===nN||a===n$))for(let a=0;a<nj.length;a++){let s=nj[a];e.push({color:t,from:n,to:r,piece:o,captured:u,promotion:s,flags:i|n_.PROMOTION})}else e.push({color:t,from:n,to:r,piece:o,captured:u,flags:i})}function nX(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return nd}return"o"===(t=t.toLowerCase())?nv:t}function nY(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class nZ{_board=Array(128);_turn=nl;_header={};_kings={w:nb,b:nb};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=nm,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:nb,b:nb},this._turn=nl,this._castling={w:0,b:0},this._epSquare=nb,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...nC},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:n=!1}={}){let r=e.split(/\s+/);if(r.length>=2&&r.length<6){let t=["-","-","0","1"];e=r.concat(t.slice(-(6-r.length))).join(" ")}if(r=e.split(/\s+/),!t){let{ok:t,error:n}=nV(e);if(!t)throw Error(n)}let o=r[0],u=0;this.clear({preserveHeaders:n});for(let e=0;e<o.length;e++){let t=o.charAt(e);if("/"===t)u+=8;else if(nH(t))u+=parseInt(t,10);else{let e=t<"a"?nl:nc;this._put({type:t.toLowerCase(),color:e},nq(u)),u++}}this._turn=r[1],r[2].indexOf("K")>-1&&(this._castling.w|=n_.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(this._castling.w|=n_.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(this._castling.b|=n_.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(this._castling.b|=n_.QSIDE_CASTLE),this._epSquare="-"===r[3]?nb:nw[r[3]],this._halfMoves=parseInt(r[4],10),this._moveNumber=parseInt(r[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,n="";for(let e=nw.a8;e<=nw.h1;e++){if(this._board[e]){t>0&&(n+=t,t=0);let{color:r,type:o}=this._board[e];n+=r===nl?o.toUpperCase():o.toLowerCase()}else t++;e+1&136&&(t>0&&(n+=t),e!==nw.h1&&(n+="/"),t=0,e+=8)}let r="";this._castling[nl]&n_.KSIDE_CASTLE&&(r+="K"),this._castling[nl]&n_.QSIDE_CASTLE&&(r+="Q"),this._castling[nc]&n_.KSIDE_CASTLE&&(r+="k"),this._castling[nc]&n_.QSIDE_CASTLE&&(r+="q"),r=r||"-";let o="-";if(this._epSquare!==nb)if(e)o=nq(this._epSquare);else{let e=this._epSquare+(this._turn===nl?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type===nd){this._makeMove({color:e,from:t,to:this._epSquare,piece:nd,captured:nd,flags:n_.EP_CAPTURE});let n=!this._isKingAttacked(e);if(this._undoMove(),n){o=nq(this._epSquare);break}}}}return[n,this._turn,r,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;let{color:t,type:n}=this._board[e],r={p:0,n:1,b:2,r:3,q:4,k:5}[n];return nu[({w:0,b:1})[t]][r][e]}_epKey(){return this._epSquare===nb?0n:ni[7&this._epSquare]}_castlingKey(){return na[this._castling.w>>5|this._castling.b>>3]}_computeHash(){let e=0n;for(let t=nw.a8;t<=nw.h1;t++){if(136&t){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),"b"===this._turn&&(e^=ns),e}_updateSetup(e){this._history.length>0||(e!==nm?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(nm)}get(e){return this._board[nw[e]]}findPiece(e){let t=[];for(let n=nw.a8;n<=nw.h1;n++){if(136&n){n+=7;continue}this._board[n]&&this._board[n]?.color===e.color&&this._board[n].color===e.color&&this._board[n].type===e.type&&t.push(nq(n))}return t}put({type:e,color:t},n){return!!this._put({type:e,color:t},n)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},n){if(-1===nP.indexOf(e.toLowerCase())||!(n in nw))return!1;let r=nw[n];if(e==nv&&this._kings[t]!=nb&&this._kings[t]!=r)return!1;let o=this._board[r];return o&&o.type===nv&&(this._kings[o.color]=nb),this._set(r,{type:e,color:t}),e===nv&&(this._kings[t]=r),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){let t=this.get(e);return this._clear(nw[e]),t&&t.type===nv&&(this._kings[t.color]=nb),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();let e=this._board[nw.e1]?.type===nv&&this._board[nw.e1]?.color===nl,t=this._board[nw.e8]?.type===nv&&this._board[nw.e8]?.color===nc;e&&this._board[nw.a1]?.type===np&&this._board[nw.a1]?.color===nl||(this._castling.w&=-65),e&&this._board[nw.h1]?.type===np&&this._board[nw.h1]?.color===nl||(this._castling.w&=-33),t&&this._board[nw.a8]?.type===np&&this._board[nw.a8]?.color===nc||(this._castling.b&=-65),t&&this._board[nw.h8]?.type===np&&this._board[nw.h8]?.color===nc||(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===nb)return;let e=this._epSquare+(this._turn===nl?-16:16),t=this._epSquare+(this._turn===nl?16:-16),n=[t+1,t-1];if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==nK(this._turn)||this._board[t]?.type!==nd){this._hash^=this._epKey(),this._epSquare=nb;return}n.some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===nd)||(this._hash^=this._epKey(),this._epSquare=nb)}_attacked(e,t,n){let r=[];for(let o=nw.a8;o<=nw.h1;o++){if(136&o){o+=7;continue}if(void 0===this._board[o]||this._board[o].color!==e)continue;let u=this._board[o],i=o-t;if(0===i)continue;let a=i+119;if(nF[a]&nB[u.type]){if(u.type===nd){if(i>0&&u.color===nl||i<=0&&u.color===nc)if(!n)return!0;else r.push(nq(o));continue}if("n"===u.type||"k"===u.type)if(!n)return!0;else{r.push(nq(o));continue}let e=nD[a],s=o+e,l=!1;for(;s!==t;){if(null!=this._board[s]){l=!0;break}s+=e}if(!l)if(!n)return!0;else{r.push(nq(o));continue}}}return!!n&&r}attackers(e,t){return t?this._attacked(t,nw[e],!0):this._attacked(this._turn,nw[e],!0)}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(nK(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,nw[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],n=0,r=0;for(let o=nw.a8;o<=nw.h1;o++){if(r=(r+1)%2,136&o){o+=7;continue}let u=this._board[o];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===nh&&t.push(r),n++)}if(2===n||3===n&&(1===e[nh]||1===e[nf]))return!0;if(n===e[nh]+2){let e=0,n=t.length;for(let r=0;r<n;r++)e+=t[r];if(0===e||e===n)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:n}={}){let r=this._moves({square:t,piece:n});return e?r.map(e=>new ny(this,e)):r.map(e=>this._moveToSan(e,r))}_moves({legal:e=!0,piece:t,square:n}={}){let r=n?n.toLowerCase():void 0,o=t?.toLowerCase(),u=[],i=this._turn,a=nK(i),s=nw.a8,l=nw.h1,c=!1;if(r)if(!(r in nw))return[];else s=l=nw[r],c=!0;for(let e=s;e<=l;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===a)continue;let{type:n}=this._board[e];if(n===nd){if(o&&o!==n)continue;t=e+nS[i][0],!this._board[t]&&(nG(u,i,e,t,nd),t=e+nS[i][1],nL[i]!==nz(e)||this._board[t]||nG(u,i,e,t,nd,void 0,n_.BIG_PAWN));for(let n=2;n<4;n++)136&(t=e+nS[i][n])||(this._board[t]?.color===a?nG(u,i,e,t,nd,this._board[t].type,n_.CAPTURE):t===this._epSquare&&nG(u,i,e,t,nd,nd,n_.EP_CAPTURE))}else{if(o&&o!==n)continue;for(let r=0,o=nk[n].length;r<o;r++){let o=nk[n][r];for(t=e;!(136&(t+=o));){if(this._board[t]){if(this._board[t].color===i)break;nG(u,i,e,t,n,this._board[t].type,n_.CAPTURE);break}if(nG(u,i,e,t,n),n===nf||n===nv)break}}}}if((void 0===o||o===nv)&&(!c||l===this._kings[i])){if(this._castling[i]&n_.KSIDE_CASTLE){let e=this._kings[i],t=e+2;this._board[e+1]||this._board[t]||this._attacked(a,this._kings[i])||this._attacked(a,e+1)||this._attacked(a,t)||nG(u,i,this._kings[i],t,nv,void 0,n_.KSIDE_CASTLE)}if(this._castling[i]&n_.QSIDE_CASTLE){let e=this._kings[i],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(a,this._kings[i])||this._attacked(a,e-1)||this._attacked(a,t)||nG(u,i,this._kings[i],t,nv,void 0,n_.QSIDE_CASTLE)}}if(!e||-1===this._kings[i])return u;let d=[];for(let e=0,t=u.length;e<t;e++)this._makeMove(u[e]),this._isKingAttacked(i)||d.push(u[e]),this._undoMove();return d}move(e,{strict:t=!1}={}){let n=null;if("string"==typeof e)n=this._moveFromSan(e,t);else if(null===e)n=this._moveFromSan(nT,t);else if("object"==typeof e){let t=this._moves();for(let r=0,o=t.length;r<o;r++)if(e.from===nq(t[r].from)&&e.to===nq(t[r].to)&&(!("promotion"in t[r])||e.promotion===t[r].promotion)){n=t[r];break}}if(!n)if("string"==typeof e)throw Error(`Invalid move: ${e}`);else throw Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&n_.NULL_MOVE)throw Error("Null move not allowed when in check");let r=new ny(this,n);return this._makeMove(n),this._incPositionCount(),r}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){let t=this._turn,n=nK(t);if(this._push(e),e.flags&n_.NULL_MOVE){t===nc&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=nb;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&n_.EP_CAPTURE&&(this._turn===nc?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===nv){if(this._kings[t]=e.to,e.flags&n_.KSIDE_CASTLE){let t=e.to-1,n=e.to+1;this._movePiece(n,t)}else if(e.flags&n_.QSIDE_CASTLE){let t=e.to+1,n=e.to-2;this._movePiece(n,t)}this._castling[t]=0}if(this._castling[t]){for(let n=0,r=nI[t].length;n<r;n++)if(e.from===nI[t][n].square&&this._castling[t]&nI[t][n].flag){this._castling[t]^=nI[t][n].flag;break}}if(this._castling[n]){for(let t=0,r=nI[n].length;t<r;t++)if(e.to===nI[n][t].square&&this._castling[n]&nI[n][t].flag){this._castling[n]^=nI[n][t].flag;break}}if(this._hash^=this._castlingKey(),e.flags&n_.BIG_PAWN){let r;r=t===nc?e.to-16:e.to+16,(e.to-1&136||this._board[e.to-1]?.type!==nd||this._board[e.to-1]?.color!==n)&&(e.to+1&136||this._board[e.to+1]?.type!==nd||this._board[e.to+1]?.color!==n)?this._epSquare=nb:(this._epSquare=r,this._hash^=this._epKey())}else this._epSquare=nb;e.piece===nd||e.flags&(n_.CAPTURE|n_.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===nc&&this._moveNumber++,this._turn=n,this._hash^=ns}undo(){let e=this._hash,t=this._undoMove();if(t){let n=new ny(this,t);return this._decPositionCount(e),n}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=ns;let n=this._turn,r=nK(n);if(t.flags&n_.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:n})),t.captured)if(t.flags&n_.EP_CAPTURE){let e;e=n===nc?t.to-16:t.to+16,this._set(e,{type:nd,color:r})}else this._set(t.to,{type:t.captured,color:r});if(t.flags&(n_.KSIDE_CASTLE|n_.QSIDE_CASTLE)){let e,n;t.flags&n_.KSIDE_CASTLE?(e=t.to+1,n=t.to-1):(e=t.to-2,n=t.to+1),this._movePiece(n,e)}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let n=[],r=!1;for(let t in this._header)this._header[t]&&n.push(`[${t} "${this._header[t]}"]`+e),r=!0;r&&this._history.length&&n.push(e);let o=e=>{let t=this._comments[this.fen()];if(void 0!==t){let n=e.length>0?" ":"";e=`${e}${n}{${t}}`}return e},u=[];for(;this._history.length>0;)u.push(this._undoMove());let i=[],a="";for(0===u.length&&i.push(o(""));u.length>0;){a=o(a);let e=u.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&i.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&i.push(o(a)),i.push(this._header.Result||"*"),0===t)return n.join("")+i.join(" ");let s=function(){return n.length>0&&" "===n[n.length-1]&&(n.pop(),!0)},l=function(r,o){for(let u of o.split(" "))if(u){if(r+u.length>t){for(;s();)r--;n.push(e),r=0}n.push(u),r+=u.length,n.push(" "),r++}return s()&&r--,r},c=0;for(let r=0;r<i.length;r++){if(c+i[r].length>t&&i[r].includes("{")){c=l(c,i[r]);continue}c+i[r].length>t&&0!==r?(" "===n[n.length-1]&&n.pop(),n.push(e),c=0):0!==r&&(n.push(" "),c++),n.push(i[r]),c+=i[r].length}return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??nA[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=nA[e]||null,!0)}getHeaders(){let e={};for(let[t,n]of Object.entries(this._header))null!==n&&(e[t]=n);return e}loadPgn(e,{strict:t=!1,newlineChar:n="\r?\n"}={}){"\r?\n"!==n&&(e=e.replace(RegExp(n,"g"),"\n"));let r=ne(e);this.reset();let o=r.headers,u="";for(let e in o)"fen"===e.toLowerCase()&&(u=o[e]),this.header(e,o[e]);if(t){if("1"===o.SetUp){if(!("FEN"in o))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}}else u&&this.load(u,{preserveHeaders:!0});let i=r.root;for(;i;){if(i.move){let e=this._moveFromSan(i.move,t);if(null==e)throw Error(`Invalid move in PGN: ${i.move}`);this._makeMove(e),this._incPositionCount()}void 0!==i.comment&&(this._comments[this.fen()]=i.comment),i=i.variations[0]}let a=r.result;a&&Object.keys(this._header).length&&this._header.Result!==a&&this.setHeader("Result",a)}_moveToSan(e,t){let n="";if(e.flags&n_.KSIDE_CASTLE)n="O-O";else if(e.flags&n_.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&n_.NULL_MOVE)return nT;if(e.piece!==nd){let r=nW(e,t);n+=e.piece.toUpperCase()+r}e.flags&(n_.CAPTURE|n_.EP_CAPTURE)&&(e.piece===nd&&(n+=nq(e.from)[0]),n+="x"),n+=nq(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){let n,r,o,u,i,a=nY(e);if(t||("0-0"===a?a="O-O":"0-0-0"===a&&(a="O-O-O")),a==nT)return{color:this._turn,from:0,to:0,piece:"k",flags:n_.NULL_MOVE};let s=nX(a),l=this._moves({legal:!0,piece:s});for(let e=0,t=l.length;e<t;e++)if(a===nY(this._moveToSan(l[e],l)))return l[e];if(t)return null;let c=!1;if((r=a.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(n=r[1],o=r[2],u=r[3],i=r[4],1==o.length&&(c=!0)):(r=a.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(n=r[1],o=r[2],u=r[3],i=r[4],1==o.length&&(c=!0)),s=nX(a),l=this._moves({legal:!0,piece:n||s}),!u)return null;for(let e=0,t=l.length;e<t;e++)if(o){if((!n||n.toLowerCase()==l[e].piece)&&nw[o]==l[e].from&&nw[u]==l[e].to&&(!i||i.toLowerCase()==l[e].promotion))return l[e];else if(c){let t=nq(l[e].from);if((!n||n.toLowerCase()==l[e].piece)&&nw[u]==l[e].to&&(o==t[0]||o==t[1])&&(!i||i.toLowerCase()==l[e].promotion))return l[e]}}else if(a===nY(this._moveToSan(l[e],l)).replace("x",""))return l[e];return null}ascii(){let e="   +------------------------+\n";for(let t=nw.a8;t<=nw.h1;t++){if(0===nU(t)&&(e+=" "+"87654321"[nz(t)]+" |"),this._board[t]){let n=this._board[t].type;e+=" "+(this._board[t].color===nl?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),n=0,r=this._turn;for(let o=0,u=t.length;o<u;o++)this._makeMove(t[o]),!this._isKingAttacked(r)&&(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn!=e&&(this.move("--"),!0)}turn(){return this._turn}board(){let e=[],t=[];for(let n=nw.a8;n<=nw.h1;n++)null==this._board[n]?t.push(null):t.push({square:nq(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in nw){let t=nw[e];return(nz(t)+nU(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let r=t.pop();if(!r)break;e?n.push(new ny(this,r)):n.push(this._moveToSan(r,this._moves())),this._makeMove(r)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){let t=this._positionCount.get(e)??0;1===t?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){let e=[],t={},n=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let n of[nv,ng])void 0!==t[n]&&(t[n]?this._castling[e]|=nR[n]:this._castling[e]&=~nR[n]);this._updateCastlingRights();let n=this.getCastlingRights(e);return(void 0===t[nv]||t[nv]===n[nv])&&(void 0===t[ng]||t[ng]===n[ng])}getCastlingRights(e){return{[nv]:(this._castling[e]&nR[nv])!=0,[ng]:(this._castling[e]&nR[ng])!=0}}moveNumber(){return this._moveNumber}}let nQ="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nJ=new Uint8Array(16);function n0(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(nJ)}let n1=[];for(let e=0;e<256;++e)n1.push((e+256).toString(16).slice(1));function n2(e,t=0){return(n1[e[t+0]]+n1[e[t+1]]+n1[e[t+2]]+n1[e[t+3]]+"-"+n1[e[t+4]]+n1[e[t+5]]+"-"+n1[e[t+6]]+n1[e[t+7]]+"-"+n1[e[t+8]]+n1[e[t+9]]+"-"+n1[e[t+10]]+n1[e[t+11]]+n1[e[t+12]]+n1[e[t+13]]+n1[e[t+14]]+n1[e[t+15]]).toLowerCase()}function n6(e,t,n){let r=(e=e||{}).random??e.rng?.()??n0();if(r.length<16)throw Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return n2(r)}let n3=function(e,t,n){return!nQ||t||e?n6(e,t,n):nQ()};var n5=e.i(59045);let n4=t6((e,t)=>{let n=new nZ,r="root",o={[r]:{id:r,fen:n.fen(),move:null,children:[],parentId:null}};return{game:n,nodes:o,rootId:r,activeNodeId:r,makeMove:(n,r)=>{let{game:o,nodes:u,activeNodeId:i}=t(),a=u[i],s=new nZ(a.fen);try{let t=s.move({from:n,to:r,promotion:"q"});if(!t)return!1;let o=s.fen(),l=a.children.find(e=>{let n=u[e];return n.move?.san===t.san});if(l)return e({activeNodeId:l}),!0;let c=n3(),d={id:c,fen:o,move:t,children:[],parentId:i};return e(e=>({nodes:{...e.nodes,[i]:{...e.nodes[i],children:[...e.nodes[i].children,c]},[c]:d},activeNodeId:c})),!0}catch(e){return!1}},navigateToNode:t=>{e({activeNodeId:t})},navigateBack:()=>{let{nodes:n,activeNodeId:r}=t(),o=n[r];o.parentId&&e({activeNodeId:o.parentId})},navigateForward:()=>{let{nodes:n,activeNodeId:r}=t(),o=n[r];o.children&&o.children.length>0&&e({activeNodeId:o.children[0]})},deleteNode:n=>{let{nodes:r,activeNodeId:o,rootId:u}=t();if(n===u)return;let i=new Set([n]),a=e=>{let t=r[e];t?.children&&t.children.forEach(e=>{i.add(e),a(e)})};a(n);let s=r[n].parentId;if(s&&r[s]){let t=r[s],u=t.children.filter(e=>e!==n),a={...r};i.forEach(e=>delete a[e]),a[s]={...t,children:u},e({nodes:a,activeNodeId:i.has(o)?s:o})}},resetBoard:()=>{e({activeNodeId:r})},clearStudy:()=>{let t=new nZ;e({game:t,nodes:{[r]:{id:r,fen:t.fen(),move:null,children:[],parentId:null}},activeNodeId:r})},importPGN:e=>{t().analyzeGames([e]),t().clearStudy(),t().analyzeGames([e])},analyzeGames:n=>{try{let{nodes:r,rootId:o}=t(),u={...r},i=(e,t,n,r)=>{let o=u[e],i=new nZ(n),a=i.move(t);if(!a)return null;let s=i.fen(),l=o.children.find(e=>u[e].move?.san===t);if(!l){let t={id:l=n3(),fen:s,move:a,children:[],parentId:e,stats:{white:0,black:0,draw:0,total:0}};u[l]=t,o.children.push(l)}let c=u[l];return c.stats||(c.stats={white:0,black:0,draw:0,total:0}),c.stats.total++,"1-0"===r?c.stats.white++:"0-1"===r?c.stats.black++:"1/2-1/2"===r&&c.stats.draw++,{id:l,fen:s}},a=[];for(let e of n){let t=e,n=(0,n5.parse)(t);n&&(a=a.concat(n))}for(let e of a){let t=e.headers?.Result||"*",n=e.moves,r=o,a=u[o].fen;for(let e of n){let n=e.move,o=i(r,n,a,t);if(o)r=o.id,a=o.fen;else break}}e({nodes:u})}catch(e){console.error("Analysis failed",e),alert("Analysis failed: "+e)}},exportPGN:()=>{let{nodes:e,rootId:n}=t(),r=t=>{let o=e[t];if(!o.children||0===o.children.length)return"";let u="",i=o.children[0],a=e[i],s=new nZ(o.fen),l=s.moveNumber(),c=s.turn();u+=("w"===c?`${l}. `:t===n?`${l}... `:"")+a.move?.san+" ",a.comment&&(u+=`{ ${a.comment} } `);for(let t=1;t<o.children.length;t++){let n=o.children[t],i=e[n],a=("w"===c?`${l}. `:`${l}... `)+i.move?.san;u+=`( ${a} `,i.comment&&(u+=`{ ${i.comment} } `),u+=r(n),u+=") "}return u+r(i)};return r(n).trim()}}});var n7=e.i(35165);function n8(){let e=(0,d.useRef)(null),[t,n]=(0,d.useState)(null),{nodes:r,activeNodeId:o,makeMove:u}=n4(),i=r[o],a=i.fen;function s(e){let t=new Map;return e.moves({verbose:!0}).forEach(e=>{t.has(e.from)||t.set(e.from,[]),t.get(e.from).push(e.to)}),t}return(0,d.useEffect)(()=>{if(!e.current)return;let t=new nZ(a),r={fen:a,coordinates:!0,movable:{color:"both",free:!1,dests:s(t)},events:{move:(e,t)=>{u(e,t)}},highlight:{lastMove:!0,check:!0},drawable:{enabled:!0}},o=tX(e.current,r);return n(o),()=>{o.destroy()}},[]),(0,d.useEffect)(()=>{if(!t)return;let e=new nZ(a),n=i.move?[i.move.from,i.move.to]:[];t.set({fen:a,lastMove:n,movable:{dests:s(e)}})},[a,t,i]),(0,c.jsx)("div",{className:n7.default.boardContainer,children:(0,c.jsx)("div",{ref:e,className:n7.default.board})})}var n9=l,re=d;e.i(26449);var rt=d;function rn(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=rn(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var rr=d,ro=e.i(96177);let ru={get url(){return`file://${e.P("node_modules/.pnpm/zustand@4.5.7_@types+react@19.2.7_react@19.2.0/node_modules/zustand/esm/vanilla.mjs")}`}},ri=e=>{let t,n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(ru.env?ru.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,u);return u},ra=e=>e?ri(e):ri,{useDebugValue:rs}=rr.default,{useSyncExternalStoreWithSelector:rl}=ro.default,rc=e=>e;function rd(e,t=rc,n){let r=rl(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rs(r),r}let rf=(e,t)=>{let n=ra(e),r=(e,r=t)=>rd(n,e,r);return Object.assign(r,n),r},rh=(e,t)=>e?rf(e,t):rf;function rp(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var rg={value:()=>{}};function rv(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new rm(r)}function rm(e){this._=e}function ry(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:n}})}function rb(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function rE(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=rg,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}rm.prototype=rv.prototype={constructor:rm,on:function(e,t){var n,r=this._,o=ry(e+"",r),u=-1,i=o.length;if(arguments.length<2){for(;++u<i;)if((n=(e=o[u]).type)&&(n=rb(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++u<i;)if(n=(e=o[u]).type)r[n]=rE(r[n],e.name,t);else if(null==t)for(n in r)r[n]=rE(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rm(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),u=0;u<n;++u)o[u]=arguments[u+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],u=0,n=r.length;u<n;++u)r[u].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,u=r.length;o<u;++o)r[o].value.apply(t,n)}};let r_=rv;function rA(){}function rx(e){return null==e?rA:function(){return this.querySelector(e)}}function rC(e){"function"!=typeof e&&(e=rx(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var u,i,a=t[o],s=a.length,l=r[o]=Array(s),c=0;c<s;++c)(u=a[c])&&(i=e.call(u,u.__data__,c,a))&&("__data__"in u&&(i.__data__=u.__data__),l[c]=i);return new oX(r,this._parents)}function rw(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function rS(){return[]}function rk(e){return null==e?rS:function(){return this.querySelectorAll(e)}}function rF(e){return function(){return rw(e.apply(this,arguments))}}function rD(e){e="function"==typeof e?rF(e):rk(e);for(var t=this._groups,n=t.length,r=[],o=[],u=0;u<n;++u)for(var i,a=t[u],s=a.length,l=0;l<s;++l)(i=a[l])&&(r.push(e.call(i,i.__data__,l,a)),o.push(i));return new oX(r,o)}function rB(e){return function(){return this.matches(e)}}function rP(e){return function(t){return t.matches(e)}}var rj=Array.prototype.find;function rN(e){return function(){return rj.call(this.children,e)}}function rM(){return this.firstElementChild}function rO(e){return this.select(null==e?rM:rN("function"==typeof e?e:rP(e)))}var r$=Array.prototype.filter;function rR(){return Array.from(this.children)}function rI(e){return function(){return r$.call(this.children,e)}}function rL(e){return this.selectAll(null==e?rR:rI("function"==typeof e?e:rP(e)))}function rT(e){"function"!=typeof e&&(e=rB(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var u,i=t[o],a=i.length,s=r[o]=[],l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new oX(r,this._parents)}function rz(e){return Array(e.length)}function rU(){return new oX(this._enter||this._groups.map(rz),this._parents)}function rH(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function rq(e){return function(){return e}}function rK(e,t,n,r,o,u){for(var i,a=0,s=t.length,l=u.length;a<l;++a)(i=t[a])?(i.__data__=u[a],r[a]=i):n[a]=new rH(e,u[a]);for(;a<s;++a)(i=t[a])&&(o[a]=i)}function rV(e,t,n,r,o,u,i){var a,s,l,c=new Map,d=t.length,f=u.length,h=Array(d);for(a=0;a<d;++a)(s=t[a])&&(h[a]=l=i.call(s,s.__data__,a,t)+"",c.has(l)?o[a]=s:c.set(l,s));for(a=0;a<f;++a)l=i.call(e,u[a],a,u)+"",(s=c.get(l))?(r[a]=s,s.__data__=u[a],c.delete(l)):n[a]=new rH(e,u[a]);for(a=0;a<d;++a)(s=t[a])&&c.get(h[a])===s&&(o[a]=s)}function rW(e){return e.__data__}function rG(e,t){if(!arguments.length)return Array.from(this,rW);var n=t?rV:rK,r=this._parents,o=this._groups;"function"!=typeof e&&(e=rq(e));for(var u=o.length,i=Array(u),a=Array(u),s=Array(u),l=0;l<u;++l){var c=r[l],d=o[l],f=d.length,h=rX(e.call(c,c&&c.__data__,l,r)),p=h.length,g=a[l]=Array(p),v=i[l]=Array(p);n(c,d,g,v,s[l]=Array(f),h,t);for(var m,y,b=0,E=0;b<p;++b)if(m=g[b]){for(b>=E&&(E=b+1);!(y=v[E])&&++E<p;);m._next=y||null}}return(i=new oX(i,r))._enter=a,i._exit=s,i}function rX(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function rY(){return new oX(this._exit||this._groups.map(rz),this._parents)}function rZ(e,t,n){var r=this.enter(),o=this,u=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?u.remove():n(u),r&&o?r.merge(o).order():o}function rQ(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,u=r.length,i=Math.min(o,u),a=Array(o),s=0;s<i;++s)for(var l,c=n[s],d=r[s],f=c.length,h=a[s]=Array(f),p=0;p<f;++p)(l=c[p]||d[p])&&(h[p]=l);for(;s<o;++s)a[s]=n[s];return new oX(a,this._parents)}function rJ(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],u=o.length-1,i=o[u];--u>=0;)(r=o[u])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this}function r0(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=r1);for(var n=this._groups,r=n.length,o=Array(r),u=0;u<r;++u){for(var i,a=n[u],s=a.length,l=o[u]=Array(s),c=0;c<s;++c)(i=a[c])&&(l[c]=i);l.sort(t)}return new oX(o,this._parents).order()}function r1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function r6(){return Array.from(this)}function r3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,u=r.length;o<u;++o){var i=r[o];if(i)return i}return null}function r5(){let e=0;for(let t of this)++e;return e}function r4(){return!this.node()}function r7(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,u=t[n],i=0,a=u.length;i<a;++i)(o=u[i])&&e.call(o,o.__data__,i,u);return this}rH.prototype={constructor:rH,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var r8="http://www.w3.org/1999/xhtml";let r9={svg:"http://www.w3.org/2000/svg",xhtml:r8,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oe(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),r9.hasOwnProperty(t)?{space:r9[t],local:e}:e}function ot(e){return function(){this.removeAttribute(e)}}function on(e){return function(){this.removeAttributeNS(e.space,e.local)}}function or(e,t){return function(){this.setAttribute(e,t)}}function oo(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ou(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function oi(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oa(e,t){var n=oe(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?on:ot:"function"==typeof t?n.local?oi:ou:n.local?oo:or)(n,t))}function os(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ol(e){return function(){this.style.removeProperty(e)}}function oc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function od(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function of(e,t,n){return arguments.length>1?this.each((null==t?ol:"function"==typeof t?od:oc)(e,t,null==n?"":n)):oh(this.node(),e)}function oh(e,t){return e.style.getPropertyValue(t)||os(e).getComputedStyle(e,null).getPropertyValue(t)}function op(e){return function(){delete this[e]}}function og(e,t){return function(){this[e]=t}}function ov(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function om(e,t){return arguments.length>1?this.each((null==t?op:"function"==typeof t?ov:og)(e,t)):this.node()[e]}function oy(e){return e.trim().split(/^|\s+/)}function ob(e){return e.classList||new oE(e)}function oE(e){this._node=e,this._names=oy(e.getAttribute("class")||"")}function o_(e,t){for(var n=ob(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function oA(e,t){for(var n=ob(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ox(e){return function(){o_(this,e)}}function oC(e){return function(){oA(this,e)}}function ow(e,t){return function(){(t.apply(this,arguments)?o_:oA)(this,e)}}function oS(){this.textContent=""}function ok(e){return function(){this.textContent=e}}function oF(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function oD(){this.innerHTML=""}function oB(e){return function(){this.innerHTML=e}}function oP(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function oj(){this.nextSibling&&this.parentNode.appendChild(this)}function oN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oM(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===r8&&t.documentElement.namespaceURI===r8?t.createElement(e):t.createElementNS(n,e)}}function oO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o$(e){var t=oe(e);return(t.local?oO:oM)(t)}function oR(){return null}function oI(){var e=this.parentNode;e&&e.removeChild(this)}function oL(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oz(e){return function(t){e.call(this,t,this.__data__)}}function oU(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function oH(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,u=t.length;r<u;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function oq(e,t,n){return function(){var r,o=this.__on,u=oz(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=u,r.options=n),r.value=t;return}}this.addEventListener(e.type,u,n),r={type:e.type,name:e.name,value:t,listener:u,options:n},o?o.push(r):this.__on=[r]}}function oK(e,t,n){var r=os(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function oV(e,t){return function(){return oK(this,e,t)}}function oW(e,t){return function(){return oK(this,e,t.apply(this,arguments))}}oE.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var oG=[null];function oX(e,t){this._groups=e,this._parents=t}function oY(){return new oX([[document.documentElement]],oG)}oX.prototype=oY.prototype={constructor:oX,select:rC,selectAll:rD,selectChild:rO,selectChildren:rL,filter:rT,data:rG,enter:rU,exit:rY,join:rZ,merge:rQ,selection:function(){return this},order:rJ,sort:r0,call:r2,nodes:r6,node:r3,size:r5,empty:r4,each:r7,attr:oa,style:of,property:om,classed:function(e,t){var n=oy(e+"");if(arguments.length<2){for(var r=ob(this.node()),o=-1,u=n.length;++o<u;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?ow:t?ox:oC)(n,t))},text:function(e){return arguments.length?this.each(null==e?oS:("function"==typeof e?oF:ok)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?oD:("function"==typeof e?oP:oB)(e)):this.node().innerHTML},raise:function(){return this.each(oj)},lower:function(){return this.each(oN)},append:function(e){var t="function"==typeof e?e:o$(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:o$(e),r=null==t?oR:"function"==typeof t?t:rx(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(oI)},clone:function(e){return this.select(e?oT:oL)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,u=oU(e+""),i=u.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var s,l=0,c=a.length;l<c;++l)for(r=0,s=a[l];r<i;++r)if((o=u[r]).type===s.type&&o.name===s.name)return s.value}return}for(r=0,a=t?oq:oH;r<i;++r)this.each(a(u[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?oW:oV)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],u=0,i=o.length;u<i;++u)(r=o[u])&&(yield r)}};let oZ=oY;function oQ(e){return"string"==typeof e?new oX([[document.querySelector(e)]],[document.documentElement]):new oX([[e]],oG)}let oJ={passive:!1},o0={capture:!0,passive:!1};function o1(e){e.stopImmediatePropagation()}function o2(e){e.preventDefault(),e.stopImmediatePropagation()}function o6(e){var t=e.document.documentElement,n=oQ(e).on("dragstart.drag",o2,o0);"onselectstart"in t?n.on("selectstart.drag",o2,o0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function o3(e,t){var n=e.document.documentElement,r=oQ(e).on("dragstart.drag",null);t&&(r.on("click.drag",o2,o0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var o5=1e-12;function o4(e){return((e=Math.exp(e))+1/e)/2}function o7(e){return((e=Math.exp(e))-1/e)/2}function o8(e){return((e=Math.exp(2*e))-1)/(e+1)}let o9=function e(t,n,r){function o(e,o){var u,i,a=e[0],s=e[1],l=e[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-s,g=h*h+p*p;if(g<o5)i=Math.log(f/l)/t,u=function(e){return[a+e*h,s+e*p,l*Math.exp(t*e*i)]};else{var v=Math.sqrt(g),m=(f*f-l*l+r*g)/(2*l*n*v),y=(f*f-l*l-r*g)/(2*f*n*v),b=Math.log(Math.sqrt(m*m+1)-m);i=(Math.log(Math.sqrt(y*y+1)-y)-b)/t,u=function(e){var r=e*i,o=o4(b),u=l/(n*v)*(o*o8(t*r+b)-o7(b));return[a+u*h,s+u*p,l*o/o4(t*r+b)]}}return u.duration=1e3*i*t/Math.SQRT2,u}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n,o=r*r;return e(n,r,o)},o}(Math.SQRT2,2,4);function ue(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ut(e,t){if(e=ue(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}var un,ur,uo=0,uu=0,ui=0,ua=1e3,us=0,ul=0,uc=0,ud="object"==typeof performance&&performance.now?performance:Date,uf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function uh(){return ul||(uf(up),ul=ud.now()+uc)}function up(){ul=0}function ug(){this._call=this._time=this._next=null}function uv(e,t,n){var r=new ug;return r.restart(e,t,n),r}function um(){uh(),++uo;for(var e,t=un;t;)(e=ul-t._time)>=0&&t._call.call(void 0,e),t=t._next;--uo}function uy(){ul=(us=ud.now())+uc,uo=uu=0;try{um()}finally{uo=0,uE(),ul=0}}function ub(){var e=ud.now(),t=e-us;t>ua&&(uc-=t,us=e)}function uE(){for(var e,t,n=un,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:un=t);ur=e,u_(r)}function u_(e){if(!uo){uu&&(uu=clearTimeout(uu));var t=e-ul;t>24?(e<1/0&&(uu=setTimeout(uy,e-ud.now()-uc)),ui&&(ui=clearInterval(ui))):(ui||(us=ud.now(),ui=setInterval(ub,ua)),uo=1,uf(uy))}}function uA(e,t,n){var r=new ug;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}ug.prototype=uv.prototype={constructor:ug,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?uh():+n)+(null==t?0:+t),this._next||ur===this||(ur?ur._next=this:un=this,ur=this),this._call=e,this._time=n,u_()},stop:function(){this._call&&(this._call=null,this._time=1/0,u_())}};var ux=r_("start","end","cancel","interrupt"),uC=[],uw=0,uS=1,uk=2,uF=3,uD=4,uB=5,uP=6;function uj(e,t,n,r,o,u){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};u$(e,n,{name:t,index:r,group:o,on:ux,tween:uC,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:uw})}function uN(e,t){var n=uO(e,t);if(n.state>uw)throw Error("too late; already scheduled");return n}function uM(e,t){var n=uO(e,t);if(n.state>uF)throw Error("too late; already running");return n}function uO(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function u$(e,t,n){var r,o=e.__transition;function u(e){n.state=uS,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}function i(u){var l,c,d,f;if(n.state!==uS)return s();for(l in o)if((f=o[l]).name===n.name){if(f.state===uF)return uA(i);f.state===uD?(f.state=uP,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[l]):+l<t&&(f.state=uP,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[l])}if(uA(function(){n.state===uF&&(n.state=uD,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=uk,n.on.call("start",e,e.__data__,n.index,n.group),n.state===uk){for(l=0,n.state=uF,r=Array(d=n.tween.length),c=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function a(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=uB,1),u=-1,i=r.length;++u<i;)r[u].call(e,o);n.state===uB&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=uP,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=uv(u,0,n.time)}function uR(e,t){var n,r,o,u=e.__transition,i=!0;if(u){for(o in t=null==t?null:t+"",u){if((n=u[o]).name!==t){i=!1;continue}r=n.state>uk&&n.state<uB,n.state=uP,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete u[o]}i&&delete e.__transition}}function uI(e){return this.each(function(){uR(this,e)})}function uL(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var uT=180/Math.PI,uz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uU(e,t,n,r,o,u){var i,a,s;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,s/=a),e*r<t*n&&(e=-e,t=-t,s=-s,i=-i),{translateX:o,translateY:u,rotate:Math.atan2(t,e)*uT,skewX:Math.atan(s)*uT,scaleX:i,scaleY:a}}function uH(e){return null==e?uz:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),e=n.transform.baseVal.consolidate())?uU((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):uz}function uq(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}function u(e,r,o,u,i,a){if(e!==o||r!==u){var s=i.push("translate(",null,t,null,n);a.push({i:s-4,x:uL(e,o)},{i:s-2,x:uL(r,u)})}else(o||u)&&i.push("translate("+o+t+u+n)}function i(e,t,n,u){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),u.push({i:n.push(o(n)+"rotate(",null,r)-2,x:uL(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}function a(e,t,n,u){e!==t?u.push({i:n.push(o(n)+"skewX(",null,r)-2,x:uL(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}function s(e,t,n,r,u,i){if(e!==n||t!==r){var a=u.push(o(u)+"scale(",null,",",null,")");i.push({i:a-4,x:uL(e,n)},{i:a-2,x:uL(t,r)})}else(1!==n||1!==r)&&u.push(o(u)+"scale("+n+","+r+")")}return function(t,n){var r=[],o=[];return t=e(t),n=e(n),u(t.translateX,t.translateY,n.translateX,n.translateY,r,o),i(t.rotate,n.rotate,r,o),a(t.skewX,n.skewX,r,o),s(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,o),t=n=null,function(e){for(var t,n=-1,u=o.length;++n<u;)r[(t=o[n]).i]=t.x(e);return r.join("")}}}var uK=uq(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uz:uU(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),uV=uq(uH,", ",")",")");function uW(e,t){var n,r;return function(){var o=uM(this,e),u=o.tween;if(u!==n){r=n=u;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}}o.tween=r}}function uG(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var u=uM(this,e),i=u.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},s=0,l=o.length;s<l;++s)if(o[s].name===t){o[s]=a;break}s===l&&o.push(a)}u.tween=o}}function uX(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=uO(this.node(),n).tween,u=0,i=o.length;u<i;++u)if((r=o[u]).name===e)return r.value;return null}return this.each((null==t?uW:uG)(n,e,t))}function uY(e,t,n){var r=e._id;return e.each(function(){var e=uM(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return uO(e,r).value[t]}}function uZ(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uQ(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function uJ(){}var u0=.7,u1=1.4285714285714286,u2="\\s*([+-]?\\d+)\\s*",u6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",u3="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u5=/^#([0-9a-f]{3,8})$/,u4=RegExp(`^rgb\\(${u2},${u2},${u2}\\)$`),u7=RegExp(`^rgb\\(${u3},${u3},${u3}\\)$`),u8=RegExp(`^rgba\\(${u2},${u2},${u2},${u6}\\)$`),u9=RegExp(`^rgba\\(${u3},${u3},${u3},${u6}\\)$`),ie=RegExp(`^hsl\\(${u6},${u3},${u3}\\)$`),it=RegExp(`^hsla\\(${u6},${u3},${u3},${u6}\\)$`),ir={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function io(){return this.rgb().formatHex()}function iu(){return this.rgb().formatRgb()}function ii(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ia(t):3===n?new id(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?is(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?is(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=u4.exec(e))?new id(t[1],t[2],t[3],1):(t=u7.exec(e))?new id(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=u8.exec(e))?is(t[1],t[2],t[3],t[4]):(t=u9.exec(e))?is(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ie.exec(e))?ib(t[1],t[2]/100,t[3]/100,1):(t=it.exec(e))?ib(t[1],t[2]/100,t[3]/100,t[4]):ir.hasOwnProperty(e)?ia(ir[e]):"transparent"===e?new id(NaN,NaN,NaN,0):null}function ia(e){return new id(e>>16&255,e>>8&255,255&e,1)}function is(e,t,n,r){return r<=0&&(e=t=n=NaN),new id(e,t,n,r)}function il(e){return(e instanceof uJ||(e=ii(e)),e)?new id((e=e.rgb()).r,e.g,e.b,e.opacity):new id}function ic(e,t,n,r){return 1==arguments.length?il(e):new id(e,t,n,null==r?1:r)}function id(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ih(){return`#${iy(this.r)}${iy(this.g)}${iy(this.b)}`}function ip(){return`#${iy(this.r)}${iy(this.g)}${iy(this.b)}${iy((isNaN(this.opacity)?1:this.opacity)*255)}`}function ig(){let e=iv(this.opacity);return`${1===e?"rgb(":"rgba("}${im(this.r)}, ${im(this.g)}, ${im(this.b)}${1===e?")":`, ${e})`}`}function iv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function im(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function iy(e){return((e=im(e))<16?"0":"")+e.toString(16)}function ib(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new iA(e,t,n,r)}function iE(e){if(e instanceof iA)return new iA(e.h,e.s,e.l,e.opacity);if(e instanceof uJ||(e=ii(e)),!e)return new iA;if(e instanceof iA)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),u=Math.max(t,n,r),i=NaN,a=u-o,s=(u+o)/2;return a?(i=t===u?(n-r)/a+(n<r)*6:n===u?(r-t)/a+2:(t-n)/a+4,a/=s<.5?u+o:2-u-o,i*=60):a=s>0&&s<1?0:i,new iA(i,a,s,e.opacity)}function i_(e,t,n,r){return 1==arguments.length?iE(e):new iA(e,t,n,null==r?1:r)}function iA(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ix(e){return(e=(e||0)%360)<0?e+360:e}function iC(e){return Math.max(0,Math.min(1,e||0))}function iw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function iS(e,t,n,r,o){var u=e*e,i=u*e;return((1-3*e+3*u-i)*t+(4-6*u+3*i)*n+(1+3*e+3*u-3*i)*r+i*o)/6}function ik(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],u=e[r+1],i=r>0?e[r-1]:2*o-u,a=r<t-1?e[r+2]:2*u-o;return iS((n-r/t)*t,i,o,u,a)}}function iF(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],u=e[r%t],i=e[(r+1)%t],a=e[(r+2)%t];return iS((n-r/t)*t,o,u,i,a)}}uZ(uJ,ii,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:io,formatHex:io,formatHex8:function e(){return this.rgb().formatHex8()},formatHsl:function e(){return iE(this).formatHsl()},formatRgb:iu,toString:iu}),uZ(id,ic,uQ(uJ,{brighter(e){return e=null==e?u1:Math.pow(u1,e),new id(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?u0:Math.pow(u0,e),new id(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new id(im(this.r),im(this.g),im(this.b),iv(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ih,formatHex:ih,formatHex8:ip,formatRgb:ig,toString:ig})),uZ(iA,i_,uQ(uJ,{brighter(e){return e=null==e?u1:Math.pow(u1,e),new iA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?u0:Math.pow(u0,e),new iA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new id(iw(e>=240?e-240:e+120,o,r),iw(e,o,r),iw(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new iA(ix(this.h),iC(this.s),iC(this.l),iv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=iv(this.opacity);return`${1===e?"hsl(":"hsla("}${ix(this.h)}, ${100*iC(this.s)}%, ${100*iC(this.l)}%${1===e?")":`, ${e})`}`}}));let iD=e=>()=>e;function iB(e,t){return function(n){return e+n*t}}function iP(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ij(e){return 1==(e*=1)?iN:function(t,n){return n-t?iP(t,n,e):iD(isNaN(t)?n:t)}}function iN(e,t){var n=t-e;return n?iB(e,n):iD(isNaN(e)?t:e)}let iM=function e(t){var n=ij(t);function r(e,t){var r=n((e=ic(e)).r,(t=ic(t)).r),o=n(e.g,t.g),u=n(e.b,t.b),i=iN(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=u(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function iO(e){return function(t){var n,r,o=t.length,u=Array(o),i=Array(o),a=Array(o);for(n=0;n<o;++n)r=ic(t[n]),u[n]=r.r||0,i[n]=r.g||0,a[n]=r.b||0;return u=e(u),i=e(i),a=e(a),r.opacity=1,function(e){return r.r=u(e),r.g=i(e),r.b=a(e),r+""}}}iO(ik),iO(iF);var i$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iR=RegExp(i$.source,"g");function iI(e){return function(){return e}}function iL(e){return function(t){return e(t)+""}}function iT(e,t){var n,r,o,u=i$.lastIndex=iR.lastIndex=0,i=-1,a=[],s=[];for(e+="",t+="";(n=i$.exec(e))&&(r=iR.exec(t));)(o=r.index)>u&&(o=t.slice(u,o),a[i]?a[i]+=o:a[++i]=o),(n=n[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,s.push({i:i,x:uL(n,r)})),u=iR.lastIndex;return u<t.length&&(o=t.slice(u),a[i]?a[i]+=o:a[++i]=o),a.length<2?s[0]?iL(s[0].x):iI(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)a[(n=s[r]).i]=n.x(e);return a.join("")})}function iz(e,t){var n;return("number"==typeof t?uL:t instanceof ii?iM:(n=ii(t))?(t=n,iM):iT)(e,t)}function iU(e){return function(){this.removeAttribute(e)}}function iH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iq(e,t,n){var r,o,u=n+"";return function(){var i=this.getAttribute(e);return i===u?null:i===r?o:o=t(r=i,n)}}function iK(e,t,n){var r,o,u=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===u?null:i===r?o:o=t(r=i,n)}}function iV(e,t,n){var r,o,u;return function(){var i,a,s=n(this);return null==s?void this.removeAttribute(e):(i=this.getAttribute(e))===(a=s+"")?null:i===r&&a===o?u:(o=a,u=t(r=i,s))}}function iW(e,t,n){var r,o,u;return function(){var i,a,s=n(this);return null==s?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local))===(a=s+"")?null:i===r&&a===o?u:(o=a,u=t(r=i,s))}}function iG(e,t){var n=oe(e),r="transform"===n?uV:iz;return this.attrTween(e,"function"==typeof t?(n.local?iW:iV)(n,r,uY(this,"attr."+e,t)):null==t?(n.local?iH:iU)(n):(n.local?iK:iq)(n,r,t))}function iX(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function iY(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function iZ(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&iY(e,o)),n}return o._value=t,o}function iQ(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&iX(e,o)),n}return o._value=t,o}function iJ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=oe(e);return this.tween(n,(r.local?iZ:iQ)(r,t))}function i0(e,t){return function(){uN(this,e).delay=+t.apply(this,arguments)}}function i1(e,t){return t*=1,function(){uN(this,e).delay=t}}function i2(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?i0:i1)(t,e)):uO(this.node(),t).delay}function i6(e,t){return function(){uM(this,e).duration=+t.apply(this,arguments)}}function i3(e,t){return t*=1,function(){uM(this,e).duration=t}}function i5(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?i6:i3)(t,e)):uO(this.node(),t).duration}function i4(e,t){if("function"!=typeof t)throw Error();return function(){uM(this,e).ease=t}}function i7(e){var t=this._id;return arguments.length?this.each(i4(t,e)):uO(this.node(),t).ease}function i8(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw Error();uM(this,e).ease=n}}function i9(e){if("function"!=typeof e)throw Error();return this.each(i8(this._id,e))}function ae(e){"function"!=typeof e&&(e=rB(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var u,i=t[o],a=i.length,s=r[o]=[],l=0;l<a;++l)(u=i[l])&&e.call(u,u.__data__,l,i)&&s.push(u);return new aD(r,this._parents,this._name,this._id)}function at(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,u=Math.min(r,o),i=Array(r),a=0;a<u;++a)for(var s,l=t[a],c=n[a],d=l.length,f=i[a]=Array(d),h=0;h<d;++h)(s=l[h]||c[h])&&(f[h]=s);for(;a<r;++a)i[a]=t[a];return new aD(i,this._parents,this._name,this._id)}function an(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}function ar(e,t,n){var r,o,u=an(t)?uN:uM;return function(){var i=u(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function ao(e,t){var n=this._id;return arguments.length<2?uO(this.node(),n).on.on(e):this.each(ar(n,e,t))}function au(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ai(){return this.on("end.remove",au(this._id))}function aa(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=rx(e));for(var r=this._groups,o=r.length,u=Array(o),i=0;i<o;++i)for(var a,s,l=r[i],c=l.length,d=u[i]=Array(c),f=0;f<c;++f)(a=l[f])&&(s=e.call(a,a.__data__,f,l))&&("__data__"in a&&(s.__data__=a.__data__),d[f]=s,uj(d[f],t,n,f,d,uO(a,n)));return new aD(u,this._parents,t,n)}function as(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=rk(e));for(var r=this._groups,o=r.length,u=[],i=[],a=0;a<o;++a)for(var s,l=r[a],c=l.length,d=0;d<c;++d)if(s=l[d]){for(var f,h=e.call(s,s.__data__,d,l),p=uO(s,n),g=0,v=h.length;g<v;++g)(f=h[g])&&uj(f,t,n,g,h,p);u.push(h),i.push(s)}return new aD(u,i,t,n)}var al=oZ.prototype.constructor;function ac(){return new al(this._groups,this._parents)}function ad(e,t){var n,r,o;return function(){var u=oh(this,e),i=(this.style.removeProperty(e),oh(this,e));return u===i?null:u===n&&i===r?o:o=t(n=u,r=i)}}function af(e){return function(){this.style.removeProperty(e)}}function ah(e,t,n){var r,o,u=n+"";return function(){var i=oh(this,e);return i===u?null:i===r?o:o=t(r=i,n)}}function ap(e,t,n){var r,o,u;return function(){var i=oh(this,e),a=n(this),s=a+"";return null==a&&(this.style.removeProperty(e),s=a=oh(this,e)),i===s?null:i===r&&s===o?u:(o=s,u=t(r=i,a))}}function ag(e,t){var n,r,o,u,i="style."+t,a="end."+i;return function(){var s=uM(this,e),l=s.on,c=null==s.value[i]?u||(u=af(t)):void 0;(l!==n||o!==c)&&(r=(n=l).copy()).on(a,o=c),s.on=r}}function av(e,t,n){var r="transform"==(e+="")?uK:iz;return null==t?this.styleTween(e,ad(e,r)).on("end.style."+e,af(e)):"function"==typeof t?this.styleTween(e,ap(e,r,uY(this,"style."+e,t))).each(ag(this._id,e)):this.styleTween(e,ah(e,r,t),n).on("end.style."+e,null)}function am(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ay(e,t,n){var r,o;function u(){var u=t.apply(this,arguments);return u!==o&&(r=(o=u)&&am(e,u,n)),r}return u._value=t,u}function ab(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,ay(e,t,null==n?"":n))}function aE(e){return function(){this.textContent=e}}function a_(e){return function(){var t=e(this);this.textContent=null==t?"":t}}function aA(e){return this.tween("text","function"==typeof e?a_(uY(this,"text",e)):aE(null==e?"":e+""))}function ax(e){return function(t){this.textContent=e.call(this,t)}}function aC(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ax(r)),t}return r._value=e,r}function aw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,aC(e))}function aS(){for(var e=this._name,t=this._id,n=aP(),r=this._groups,o=r.length,u=0;u<o;++u)for(var i,a=r[u],s=a.length,l=0;l<s;++l)if(i=a[l]){var c=uO(i,t);uj(i,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new aD(r,this._parents,e,n)}function ak(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(u,i){var a={value:i},s={value:function(){0==--o&&u()}};n.each(function(){var n=uM(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(s)),n.on=t}),0===o&&u()})}var aF=0;function aD(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function aB(e){return oZ().transition(e)}function aP(){return++aF}var aj=oZ.prototype;aD.prototype=aB.prototype={constructor:aD,select:aa,selectAll:as,selectChild:aj.selectChild,selectChildren:aj.selectChildren,filter:ae,merge:at,selection:ac,transition:aS,call:aj.call,nodes:aj.nodes,node:aj.node,size:aj.size,empty:aj.empty,each:aj.each,on:ao,attr:iG,attrTween:iJ,style:av,styleTween:ab,text:aA,textTween:aw,remove:ai,tween:uX,delay:i2,duration:i5,ease:i7,easeVarying:i9,end:ak,[Symbol.iterator]:aj[Symbol.iterator]};var aN={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function aM(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function aO(e){var t,n;e instanceof aD?(t=e._id,e=e._name):(t=aP(),(n=aN).time=uh(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,u=0;u<o;++u)for(var i,a=r[u],s=a.length,l=0;l<s;++l)(i=a[l])&&uj(i,e,t,l,a,n||aM(i,t));return new aD(r,this._parents,e,t)}oZ.prototype.interrupt=uI,oZ.prototype.transition=aO;let a$=e=>()=>e;function aR(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function aI(e,t,n){this.k=e,this.x=t,this.y=n}aI.prototype={constructor:aI,scale:function(e){return 1===e?this:new aI(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new aI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var aL=new aI(1,0,0);function aT(e){e.stopImmediatePropagation()}function az(e){e.preventDefault(),e.stopImmediatePropagation()}function aU(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function aH(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function aq(){return this.__zoom||aL}function aK(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function aV(){return navigator.maxTouchPoints||"ontouchstart"in this}function aW(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>u?(u+i)/2:Math.min(0,u)||Math.max(0,i))}function aG(){var e,t,n,r=aU,o=aH,u=aW,i=aK,a=aV,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=o9,f=r_("start","zoom","end"),h=500,p=150,g=0,v=10;function m(e){e.property("__zoom",aq).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",w).on("dblclick.zoom",S).filter(a).on("touchstart.zoom",k).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new aI(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new aI(e.k,r,o)}function E(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,r){e.on("start.zoom",function(){A(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,u=arguments,i=A(e,u).event(r),a=o.apply(e,u),s=null==n?E(a):"function"==typeof n?n.apply(e,u):n,l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,u):t,h=d(c.invert(s).concat(l/c.k),f.invert(s).concat(l/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=l/t[2];e=new aI(n,s[0]-t[0]*n,s[1]-t[1]*n)}i.zoom(null,e)}})}function A(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function C(e,...t){if(r.apply(this,arguments)){var n=A(this,t).event(e),o=this.__zoom,a=Math.max(s[0],Math.min(s[1],o.k*Math.pow(2,i.apply(this,arguments)))),c=ut(e);if(n.wheel)(n.mouse[0][0]!==c[0]||n.mouse[0][1]!==c[1])&&(n.mouse[1]=o.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(o.k===a)return;n.mouse=[c,o.invert(c)],uR(this),n.start()}az(e),n.wheel=setTimeout(d,p),n.zoom("mouse",u(b(y(o,a),n.mouse[0],n.mouse[1]),n.extent,l))}function d(){n.wheel=null,n.end()}}function w(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=A(this,t,!0).event(e),a=oQ(e.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",h,!0),s=ut(e,o),c=e.clientX,d=e.clientY;o6(e.view),aT(e),i.mouse=[s,this.__zoom.invert(s)],uR(this),i.start()}function f(e){if(az(e),!i.moved){var t=e.clientX-c,n=e.clientY-d;i.moved=t*t+n*n>g}i.event(e).zoom("mouse",u(b(i.that.__zoom,i.mouse[0]=ut(e,o),i.mouse[1]),i.extent,l))}function h(e){a.on("mousemove.zoom mouseup.zoom",null),o3(e.view,i.moved),az(e),i.event(e).end()}}function S(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=ut(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(i),s=n.k*(e.shiftKey?.5:2),d=u(b(y(n,s),i,a),o.apply(this,t),l);az(e),c>0?oQ(this).transition().duration(c).call(_,d,i,e):oQ(this).call(m.transform,d,i,e)}}function k(n,...o){if(r.apply(this,arguments)){var u,i,a,s,l=n.touches,c=l.length,d=A(this,o,n.changedTouches.length===c).event(n);for(aT(n),i=0;i<c;++i)s=[s=ut(a=l[i],this),this.__zoom.invert(s),a.identifier],d.touch0?d.touch1||d.touch0[2]===s[2]||(d.touch1=s,d.taps=0):(d.touch0=s,u=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),u&&(d.taps<2&&(t=s[0],e=setTimeout(function(){e=null},h)),uR(this),d.start())}}function F(e,...t){if(this.__zooming){var n,r,o,i,a=A(this,t).event(e),s=e.changedTouches,c=s.length;for(az(e),n=0;n<c;++n)o=ut(r=s[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=o);if(r=a.that.__zoom,a.touch1){var d=a.touch0[0],f=a.touch0[1],h=a.touch1[0],p=a.touch1[1],g=(g=h[0]-d[0])*g+(g=h[1]-d[1])*g,v=(v=p[0]-f[0])*v+(v=p[1]-f[1])*v;r=y(r,Math.sqrt(g/v)),o=[(d[0]+h[0])/2,(d[1]+h[1])/2],i=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],i=a.touch0[1]}a.zoom("touch",u(b(r,o,i),a.extent,l))}}function D(e,...r){if(this.__zooming){var o,u,i=A(this,r).event(e),a=e.changedTouches,s=a.length;for(aT(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},h),o=0;o<s;++o)u=a[o],i.touch0&&i.touch0[2]===u.identifier?delete i.touch0:i.touch1&&i.touch1[2]===u.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(u=ut(u,this),Math.hypot(t[0]-u[0],t[1]-u[1])<v)){var l=oQ(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",aq),e!==o?_(e,t,n,r):o.interrupt().each(function(){A(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?E(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(i),s="function"==typeof t?t.apply(this,arguments):t;return u(b(y(r,s),i,a),e,l)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return u(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)},null,r)},m.translateTo=function(e,t,n,r,i){m.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,a=null==r?E(e):"function"==typeof r?r.apply(this,arguments):r;return u(aL.translate(a[0],a[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)},r,i)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=oQ(this.that).datum();f.call(e,this.that,new aR(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:a$(+e),m):i},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:a$(!!e),m):r},m.touchable=function(e){return arguments.length?(a="function"==typeof e?e:a$(!!e),m):a},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:a$([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],m):[s[0],s[1]]},m.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(e){return arguments.length?(u=e,m):u},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(g=(e*=1)*e,m):Math.sqrt(g)},m.tapDistance=function(e){return arguments.length?(v=+e,m):v},m}(function e(e){for(;!e.__zoom;)if(!(e=e.parentNode))return aL;return e.__zoom}).prototype=aI.prototype;let aX=e=>()=>e;function aY(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:u,x:i,y:a,dx:s,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function aZ(e){return!e.ctrlKey&&!e.button}function aQ(){return this.parentNode}function aJ(e,t){return null==t?{x:e.x,y:e.y}:t}function a0(){return navigator.maxTouchPoints||"ontouchstart"in this}function a1(){var e,t,n,r,o=aZ,u=aQ,i=aJ,a=a0,s={},l=r_("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(a).on("touchstart.drag",v).on("touchmove.drag",m,oJ).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(i,a){if(!r&&o.call(this,i,a)){var s=b(this,u.call(this,i,a),i,a,"mouse");s&&(oQ(i.view).on("mousemove.drag",p,o0).on("mouseup.drag",g,o0),o6(i.view),o1(i),n=!1,e=i.clientX,t=i.clientY,s("start",i))}}function p(r){if(o2(r),!n){var o=r.clientX-e,u=r.clientY-t;n=o*o+u*u>d}s.mouse("drag",r)}function g(e){oQ(e.view).on("mousemove.drag mouseup.drag",null),o3(e.view,n),o2(e),s.mouse("end",e)}function v(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,a=u.call(this,e,t),s=i.length;for(n=0;n<s;++n)(r=b(this,a,e,t,i[n].identifier,i[n]))&&(o1(e),r("start",e,i[n]))}}function m(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=s[r[t].identifier])&&(o2(e),n("drag",e,r[t]))}function y(e){var t,n,o=e.changedTouches,u=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<u;++t)(n=s[o[t].identifier])&&(o1(e),n("end",e,o[t]))}function b(e,t,n,r,o,u){var a,d,h,p=l.copy(),g=ut(u||n,t);if(null!=(h=i.call(e,new aY("beforestart",{sourceEvent:n,target:f,identifier:o,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return a=h.x-g[0]||0,d=h.y-g[1]||0,function n(u,i,l){var v,m=g;switch(u){case"start":s[o]=n,v=c++;break;case"end":delete s[o],--c;case"drag":g=ut(l||i,t),v=c}p.call(u,e,new aY(u,{sourceEvent:i,subject:h,target:f,identifier:o,active:v,x:g[0]+a,y:g[1]+d,dx:g[0]-m[0],dy:g[1]-m[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:aX(!!e),f):o},f.container=function(e){return arguments.length?(u="function"==typeof e?e:aX(e),f):u},f.subject=function(e){return arguments.length?(i="function"==typeof e?e:aX(e),f):i},f.touchable=function(e){return arguments.length?(a="function"==typeof e?e:aX(!!e),f):a},f.on=function(){var e=l.on.apply(l,arguments);return e===l?f:e},f.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,f):Math.sqrt(d)},f}aY.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.i(38782);let a2=(0,rt.createContext)(null),a6=a2.Provider,a3=e=>`Node type "${e}" not found. Using fallback type "default".`,a5=()=>"The React Flow parent container needs a width and a height to render the graph.",a4=()=>"Only child nodes can use a parent extent.",a7=()=>"Can't create edge. An edge needs a source and a target.",a8=e=>`Marker type "${e}" doesn't exist.`,a9=(e,t)=>`Couldn't create edge for ${!e?"source":"target"} handle id: "${!e?t.sourceHandle:t.targetHandle}", edge id: ${t.id}.`,se=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",st=e=>`Edge type "${e}" not found. Using fallback type "default".`,sn=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,sr=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function so(e,t){let n=(0,rt.useContext)(a2);if(null===n)throw Error(sr);return rd(n,e,t)}let su=()=>{let e=(0,rt.useContext)(a2);if(null===e)throw Error(sr);return(0,rt.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},si=e=>e.userSelectionActive?"none":"all";function sa({position:e,children:t,className:n,style:r,...o}){let u=so(si),i=`${e}`.split("-");return rt.default.createElement("div",{className:rn(["react-flow__panel",n,...i]),style:{...r,pointerEvents:u},...o},t)}function ss({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:rt.default.createElement(sa,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},rt.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}let sl=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:u={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:s,className:l,...c})=>{let d=(0,rt.useRef)(null),[f,h]=(0,rt.useState)({x:0,y:0,width:0,height:0}),p=rn(["react-flow__edge-textwrapper",l]);return((0,rt.useEffect)(()=>{if(d.current){let e=d.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),void 0!==n&&n)?rt.default.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...c},o&&rt.default.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:u,rx:a,ry:a}),rt.default.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),s):null};var sc=(0,rt.memo)(sl);let sd=e=>({width:e.offsetWidth,height:e.offsetHeight}),sf=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),sh=(e={x:0,y:0},t)=>({x:sf(e.x,t[0][0],t[1][0]),y:sf(e.y,t[0][1],t[1][1])}),sp=(e,t,n)=>e<t?sf(Math.abs(e-t),1,50)/50:e>n?-sf(Math.abs(e-n),1,50)/50:0,sg=(e,t)=>[20*sp(e.x,35,t.width-35),20*sp(e.y,35,t.height-35)],sv=e=>e.getRootNode?.()||window?.document,sm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),sy=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),sb=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),sE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),s_=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),sA=e=>sx(e.width)&&sx(e.height)&&sx(e.x)&&sx(e.y),sx=e=>!isNaN(e)&&isFinite(e),sC=Symbol.for("internals"),sw=["Enter"," ","Escape"],sS=(e,t)=>{},sk=e=>"nativeEvent"in e;function sF(e){let t=sk(e)?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}let sD=e=>"clientX"in e,sB=(e,t)=>{let n=sD(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},sP=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,sj=({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:f,interactionWidth:h=20})=>rt.default.createElement(rt.default.Fragment,null,rt.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&rt.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),o&&sx(n)&&sx(r)?rt.default.createElement(sc,{x:n,y:r,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null);function sN(e,t,n){return void 0===n?n:r=>{let o=t().edges.find(t=>t.id===e);o&&n(r,{...o})}}function sM({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,u=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+u:r-u,o,u]}function sO({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:u,targetControlX:i,targetControlY:a}){let s=.125*e+.375*o+.375*i+.125*n,l=.125*t+.375*u+.375*a+.125*r,c=Math.abs(s-e),d=Math.abs(l-t);return[s,l,c,d]}function s$({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===s.Left||e===s.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function sR({sourceX:e,sourceY:t,sourcePosition:n=s.Bottom,targetX:r,targetY:o,targetPosition:u=s.Top}){let[i,a]=s$({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=s$({pos:u,x1:r,y1:o,x2:e,y2:t}),[d,f,h,p]=sO({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${a} ${l},${c} ${r},${o}`,d,f,h,p]}sj.displayName="BaseEdge",function(e){e.Strict="strict",e.Loose="loose"}(r||(r={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(o||(o={})),function(e){e.Partial="partial",e.Full="full"}(u||(u={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(i||(i={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(a||(a={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(s||(s={}));let sI=(0,rt.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=s.Bottom,targetPosition:u=s.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})=>{let[m,y,b]=sR({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:u});return rt.default.createElement(sj,{path:m,labelX:y,labelY:b,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})});sI.displayName="SimpleBezierEdge";let sL={[s.Left]:{x:-1,y:0},[s.Right]:{x:1,y:0},[s.Top]:{x:0,y:-1},[s.Bottom]:{x:0,y:1}},sT=({source:e,sourcePosition:t=s.Bottom,target:n})=>t===s.Left||t===s.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},sz=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function sU({source:e,sourcePosition:t=s.Bottom,target:n,targetPosition:r=s.Top,center:o,offset:u}){let i,a,l=sL[t],c=sL[r],d={x:e.x+l.x*u,y:e.y+l.y*u},f={x:n.x+c.x*u,y:n.y+c.y*u},h=sT({source:d,sourcePosition:t,target:f}),p=0!==h.x?"x":"y",g=h[p],v=[],m={x:0,y:0},y={x:0,y:0},[b,E,_,A]=sM({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[p]*c[p]==-1){i=o.x??b,a=o.y??E;let e=[{x:i,y:d.y},{x:i,y:f.y}],t=[{x:d.x,y:a},{x:f.x,y:a}];v=l[p]===g?"x"===p?e:t:"x"===p?t:e}else{let o=[{x:d.x,y:f.y}],s=[{x:f.x,y:d.y}];if(v="x"===p?l.x===g?s:o:l.y===g?o:s,t===r){let t=Math.abs(e[p]-n[p]);if(t<=u){let r=Math.min(u-1,u-t);l[p]===g?m[p]=(d[p]>e[p]?-1:1)*r:y[p]=(f[p]>n[p]?-1:1)*r}}if(t!==r){let e="x"===p?"y":"x",t=l[p]===c[e],n=d[e]>f[e],r=d[e]<f[e];(1===l[p]&&(!t&&n||t&&r)||1!==l[p]&&(!t&&r||t&&n))&&(v="x"===p?o:s)}let h={x:d.x+m.x,y:d.y+m.y},b={x:f.x+y.x,y:f.y+y.y};Math.max(Math.abs(h.x-v[0].x),Math.abs(b.x-v[0].x))>=Math.max(Math.abs(h.y-v[0].y),Math.abs(b.y-v[0].y))?(i=(h.x+b.x)/2,a=v[0].y):(i=v[0].x,a=(h.y+b.y)/2)}return[[e,{x:d.x+m.x,y:d.y+m.y},...v,{x:f.x+y.x,y:f.y+y.y},n],i,a,_,A]}function sH(e,t,n,r){let o=Math.min(sz(e,t)/2,sz(t,n)/2,r),{x:u,y:i}=t;if(e.x===u&&u===n.x||e.y===i&&i===n.y)return`L${u} ${i}`;if(e.y===i){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${u+o*t},${i}Q ${u},${i} ${u},${i+o*r}`}let a=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${u},${i+o*s}Q ${u},${i} ${u+o*a},${i}`}function sq({sourceX:e,sourceY:t,sourcePosition:n=s.Bottom,targetX:r,targetY:o,targetPosition:u=s.Top,borderRadius:i=5,centerX:a,centerY:l,offset:c=20}){let[d,f,h,p,g]=sU({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:u,center:{x:a,y:l},offset:c});return[d.reduce((e,t,n)=>{let r="";return e+(r=n>0&&n<d.length-1?sH(d[n-1],t,d[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`)},""),f,h,p,g]}let sK=(0,rt.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:f=s.Bottom,targetPosition:h=s.Top,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:m})=>{let[y,b,E]=sq({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:h,borderRadius:v?.borderRadius,offset:v?.offset});return rt.default.createElement(sj,{path:y,labelX:b,labelY:E,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:p,markerStart:g,interactionWidth:m})});sK.displayName="SmoothStepEdge";let sV=(0,rt.memo)(e=>rt.default.createElement(sK,{...e,pathOptions:(0,rt.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));function sW({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,u,i,a]=sM({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,u,i,a]}sV.displayName="StepEdge";let sG=(0,rt.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:f,interactionWidth:h})=>{let[p,g,v]=sW({sourceX:e,sourceY:t,targetX:n,targetY:r});return rt.default.createElement(sj,{path:p,labelX:g,labelY:v,label:o,labelStyle:u,labelShowBg:i,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:d,markerStart:f,interactionWidth:h})});function sX(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function sY({pos:e,x1:t,y1:n,x2:r,y2:o,c:u}){switch(e){case s.Left:return[t-sX(t-r,u),n];case s.Right:return[t+sX(r-t,u),n];case s.Top:return[t,n-sX(n-o,u)];case s.Bottom:return[t,n+sX(o-n,u)]}}function sZ({sourceX:e,sourceY:t,sourcePosition:n=s.Bottom,targetX:r,targetY:o,targetPosition:u=s.Top,curvature:i=.25}){let[a,l]=sY({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,d]=sY({pos:u,x1:r,y1:o,x2:e,y2:t,c:i}),[f,h,p,g]=sO({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${a},${l} ${c},${d} ${r},${o}`,f,h,p,g]}sG.displayName="StraightEdge";let sQ=(0,rt.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=s.Bottom,targetPosition:u=s.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:m})=>{let[y,b,E]=sZ({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:u,curvature:v?.curvature});return rt.default.createElement(sj,{path:y,labelX:b,labelY:E,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:m})});sQ.displayName="BezierEdge";let sJ=(0,rt.createContext)(null),s0=sJ.Provider;sJ.Consumer;let s1=()=>(0,rt.useContext)(sJ),s2=e=>"id"in e&&"source"in e&&"target"in e,s6=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,s3=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`},s5=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),s4=(e,t)=>{let n;return e.source&&e.target?s5(n=s2(e)?{...e}:{...e,id:s6(e)},t)?t:t.concat(n):(sS("006",a7()),t)},s7=({x:e,y:t},[n,r,o],u,[i,a])=>{let s={x:(e-n)/o,y:(t-r)/o};return u?{x:i*Math.round(s.x/i),y:a*Math.round(s.y/a)}:s},s8=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),s9=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-r};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:o}},le=(e,t=[0,0])=>0===e.length?{x:0,y:0,width:0,height:0}:sb(e.reduce((e,n)=>{let{x:r,y:o}=s9(n,t).positionAbsolute;return sm(e,sy({x:r,y:o,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),lt=(e,t,[n,r,o]=[0,0,1],u=!1,i=!1,a=[0,0])=>{let s={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},l=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:o=!1}=e;if(i&&!r||o)return!1;let{positionAbsolute:c}=s9(e,a),d=s_(s,{x:c.x,y:c.y,width:t||0,height:n||0}),f=void 0===t||void 0===n||null===t||null===n,h=u&&d>0,p=(t||0)*(n||0);(f||h||d>=p||e.dragging)&&l.push(e)}),l},ln=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},lr=(e,t,n,r,o,u=.1)=>{let i=sf(Math.min(t/(e.width*(1+u)),n/(e.height*(1+u))),r,o);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},lo=(e,t=0)=>e.transition().duration(t);function lu(e,t,n,r){return(t[n]||[]).reduce((t,o)=>(`${e.id}-${o.id}-${n}`!==r&&t.push({id:o.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+o.x+o.width/2,y:(e.positionAbsolute?.y??0)+o.y+o.height/2}),t),[])}function li(e,t,n,r,o,u){let{x:i,y:a}=sB(e),s=t.elementsFromPoint(i,a).find(e=>e.classList.contains("react-flow__handle"));if(s){let e=s.getAttribute("data-nodeid");if(e){let t=ld(void 0,s),r=s.getAttribute("data-handleid"),i=u({nodeId:e,id:r,type:t});if(i){let u=o.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:u?.x||n.x,y:u?.y||n.y},validHandleResult:i}}}}let l=[],c=1/0;if(o.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=u(e);t<=c&&(t<c?l=[{handle:e,validHandleResult:n}]:t===c&&l.push({handle:e,validHandleResult:n}),c=t)}}),!l.length)return{handle:null,validHandleResult:ls()};if(1===l.length)return l[0];let d=l.some(({validHandleResult:e})=>e.isValid),f=l.some(({handle:e})=>"target"===e.type);return l.find(({handle:e,validHandleResult:t})=>f?"target"===e.type:!d||t.isValid)||l[0]}let la={source:null,target:null,sourceHandle:null,targetHandle:null},ls=()=>({handleDomNode:null,isValid:!1,connection:la,endHandle:null});function ll(e,t,n,o,u,i,a){let s="target"===u,l=a.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),c={...ls(),handleDomNode:l};if(l){let e=ld(void 0,l),u=l.getAttribute("data-nodeid"),a=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),f=l.classList.contains("connectableend"),h={source:s?u:n,sourceHandle:s?a:o,target:s?n:u,targetHandle:s?o:a};c.connection=h,d&&f&&(t===r.Strict?s&&"source"===e||!s&&"target"===e:u!==n||a!==o)&&(c.endHandle={nodeId:u,handleId:a,type:e},c.isValid=i(h))}return c}function lc({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,o)=>{if(o[sC]){let{handleBounds:u}=o[sC],i=[],a=[];u&&(i=lu(o,u,"source",`${t}-${n}-${r}`),a=lu(o,u,"target",`${t}-${n}-${r}`)),e.push(...i,...a)}return e},[])}function ld(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}function lf(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function lh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function lp({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:u,setState:i,isValidConnection:a,edgeUpdaterType:s,onReconnectEnd:l}){let c,d,f=sv(e.target),{connectionMode:h,domNode:p,autoPanOnConnect:g,connectionRadius:v,onConnectStart:m,panBy:y,getNodes:b,cancelConnection:E}=u(),_=0,{x:A,y:x}=sB(e),C=ld(s,f?.elementFromPoint(A,x)),w=p?.getBoundingClientRect();if(!w||!C)return;let S=sB(e,w),k=!1,F=null,D=!1,B=null,P=lc({nodes:b(),nodeId:n,handleId:t,handleType:C}),j=()=>{if(!g)return;let[e,t]=sg(S,w);y({x:e,y:t}),_=requestAnimationFrame(j)};function N(e){let{transform:r}=u();S=sB(e,w);let{handle:s,validHandleResult:l}=li(e,f,s7(S,r,!1,[1,1]),v,P,e=>ll(e,h,n,t,o?"target":"source",a,f));if(c=s,k||(j(),k=!0),B=l.handleDomNode,F=l.connection,D=l.isValid,i({connectionPosition:c&&D?s8({x:c.x,y:c.y},r):S,connectionStatus:lh(!!c,D),connectionEndHandle:l.endHandle}),!c&&!D&&!B)return lf(d);F.source!==F.target&&B&&(lf(d),d=B,B.classList.add("connecting","react-flow__handle-connecting"),B.classList.toggle("valid",D),B.classList.toggle("react-flow__handle-valid",D))}function M(e){(c||B)&&F&&D&&r?.(F),u().onConnectEnd?.(e),s&&l?.(e),lf(d),E(),cancelAnimationFrame(_),k=!1,D=!1,F=null,B=null,f.removeEventListener("mousemove",N),f.removeEventListener("mouseup",M),f.removeEventListener("touchmove",N),f.removeEventListener("touchend",M)}i({connectionPosition:S,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:C,connectionStartHandle:{nodeId:n,handleId:t,type:C},connectionEndHandle:null}),m?.(e,{nodeId:n,handleId:t,handleType:C}),f.addEventListener("mousemove",N),f.addEventListener("mouseup",M),f.addEventListener("touchmove",N),f.addEventListener("touchend",M)}let lg=()=>!0,lv=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),lm=(e,t,n)=>r=>{let{connectionStartHandle:o,connectionEndHandle:u,connectionClickStartHandle:i}=r;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||u?.nodeId===e&&u?.handleId===t&&u?.type===n,clickConnecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n}},ly=(0,rt.forwardRef)(({type:e="source",position:t=s.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:u=!0,id:i,onConnect:a,children:l,className:c,onMouseDown:d,onTouchStart:f,...h},p)=>{let g=i||null,v="target"===e,m=su(),y=s1(),{connectOnClick:b,noPanClassName:E}=so(lv,rp),{connecting:_,clickConnecting:A}=so(lm(y,g,e),rp);y||m.getState().onError?.("010",se());let x=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=m.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=m.getState();t(s4(o,e))}n?.(o),a?.(o)},C=e=>{if(!y)return;let t=sD(e);o&&(t&&0===e.button||!t)&&lp({event:e,handleId:g,nodeId:y,onConnect:x,isTarget:v,getState:m.getState,setState:m.setState,isValidConnection:n||m.getState().isValidConnection||lg}),t?d?.(e):f?.(e)},w=t=>{let{onClickConnectStart:r,onClickConnectEnd:u,connectionClickStartHandle:i,connectionMode:a,isValidConnection:s}=m.getState();if(!y||!i&&!o)return;if(!i){r?.(t,{nodeId:y,handleId:g,handleType:e}),m.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}let l=sv(t.target),c=n||s||lg,{connection:d,isValid:f}=ll({nodeId:y,id:g,type:e},a,i.nodeId,i.handleId||null,i.type,c,l);f&&x(d),u?.(t),m.setState({connectionClickStartHandle:null})};return rt.default.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:rn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,c,{source:!v,target:v,connectable:r,connectablestart:o,connectableend:u,connecting:A,connectionindicator:r&&(o&&!_||u&&_)}]),onMouseDown:C,onTouchStart:C,onClick:b?w:void 0,ref:p,...h},l)});ly.displayName="Handle";var lb=(0,rt.memo)(ly);let lE=({data:e,isConnectable:t,targetPosition:n=s.Top,sourcePosition:r=s.Bottom})=>rt.default.createElement(rt.default.Fragment,null,rt.default.createElement(lb,{type:"target",position:n,isConnectable:t}),e?.label,rt.default.createElement(lb,{type:"source",position:r,isConnectable:t}));lE.displayName="DefaultNode";var l_=(0,rt.memo)(lE);let lA=({data:e,isConnectable:t,sourcePosition:n=s.Bottom})=>rt.default.createElement(rt.default.Fragment,null,e?.label,rt.default.createElement(lb,{type:"source",position:n,isConnectable:t}));lA.displayName="InputNode";var lx=(0,rt.memo)(lA);let lC=({data:e,isConnectable:t,targetPosition:n=s.Top})=>rt.default.createElement(rt.default.Fragment,null,rt.default.createElement(lb,{type:"target",position:n,isConnectable:t}),e?.label);lC.displayName="OutputNode";var lw=(0,rt.memo)(lC);let lS=()=>null;lS.displayName="GroupNode";let lk=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),lF=e=>e.id;function lD(e,t){return rp(e.selectedNodes.map(lF),t.selectedNodes.map(lF))&&rp(e.selectedEdges.map(lF),t.selectedEdges.map(lF))}let lB=(0,rt.memo)(({onSelectionChange:e})=>{let t=su(),{selectedNodes:n,selectedEdges:r}=so(lk,lD);return(0,rt.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChange.forEach(e=>e(o))},[n,r,e]),null});lB.displayName="SelectionListener";let lP=e=>!!e.onSelectionChange;function lj({onSelectionChange:e}){let t=so(lP);return e||t?rt.default.createElement(lB,{onSelectionChange:e}):null}let lN=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function lM(e,t){(0,rt.useEffect)(()=>{void 0!==e&&t(e)},[e])}function lO(e,t,n){(0,rt.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}let l$=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:u,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:s,nodesDraggable:l,nodesConnectable:c,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:p,minZoom:g,maxZoom:v,nodeExtent:m,onNodesChange:y,onEdgesChange:b,elementsSelectable:E,connectionMode:_,snapGrid:A,snapToGrid:x,translateExtent:C,connectOnClick:w,defaultEdgeOptions:S,fitView:k,fitViewOptions:F,onNodesDelete:D,onEdgesDelete:B,onNodeDrag:P,onNodeDragStart:j,onNodeDragStop:N,onSelectionDrag:M,onSelectionDragStart:O,onSelectionDragStop:$,noPanClassName:R,nodeOrigin:I,rfId:L,autoPanOnConnect:T,autoPanOnNodeDrag:z,onError:U,connectionRadius:H,isValidConnection:q,nodeDragThreshold:K})=>{let{setNodes:V,setEdges:W,setDefaultNodesAndEdges:G,setMinZoom:X,setMaxZoom:Y,setTranslateExtent:Z,setNodeExtent:Q,reset:J}=so(lN,rp),ee=su();return(0,rt.useEffect)(()=>(G(n,r?.map(e=>({...e,...S}))),()=>{J()}),[]),lO("defaultEdgeOptions",S,ee.setState),lO("connectionMode",_,ee.setState),lO("onConnect",o,ee.setState),lO("onConnectStart",u,ee.setState),lO("onConnectEnd",i,ee.setState),lO("onClickConnectStart",a,ee.setState),lO("onClickConnectEnd",s,ee.setState),lO("nodesDraggable",l,ee.setState),lO("nodesConnectable",c,ee.setState),lO("nodesFocusable",d,ee.setState),lO("edgesFocusable",f,ee.setState),lO("edgesUpdatable",h,ee.setState),lO("elementsSelectable",E,ee.setState),lO("elevateNodesOnSelect",p,ee.setState),lO("snapToGrid",x,ee.setState),lO("snapGrid",A,ee.setState),lO("onNodesChange",y,ee.setState),lO("onEdgesChange",b,ee.setState),lO("connectOnClick",w,ee.setState),lO("fitViewOnInit",k,ee.setState),lO("fitViewOnInitOptions",F,ee.setState),lO("onNodesDelete",D,ee.setState),lO("onEdgesDelete",B,ee.setState),lO("onNodeDrag",P,ee.setState),lO("onNodeDragStart",j,ee.setState),lO("onNodeDragStop",N,ee.setState),lO("onSelectionDrag",M,ee.setState),lO("onSelectionDragStart",O,ee.setState),lO("onSelectionDragStop",$,ee.setState),lO("noPanClassName",R,ee.setState),lO("nodeOrigin",I,ee.setState),lO("rfId",L,ee.setState),lO("autoPanOnConnect",T,ee.setState),lO("autoPanOnNodeDrag",z,ee.setState),lO("onError",U,ee.setState),lO("connectionRadius",H,ee.setState),lO("isValidConnection",q,ee.setState),lO("nodeDragThreshold",K,ee.setState),lM(e,V),lM(t,W),lM(g,X),lM(v,Y),lM(C,Z),lM(m,Q),null},lR={display:"none"},lI={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lL="react-flow__node-desc",lT="react-flow__edge-desc",lz="react-flow__aria-live",lU=e=>e.ariaLiveMessage;function lH({rfId:e}){let t=so(lU);return rt.default.createElement("div",{id:`${lz}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:lI},t)}function lq({rfId:e,disableKeyboardA11y:t}){return rt.default.createElement(rt.default.Fragment,null,rt.default.createElement("div",{id:`${lL}-${e}`,style:lR},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),rt.default.createElement("div",{id:`${lT}-${e}`,style:lR},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&rt.default.createElement(lH,{rfId:e}))}var lK=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,rt.useState)(!1),o=(0,rt.useRef)(!1),u=(0,rt.useRef)(new Set([])),[i,a]=(0,rt.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,rt.useEffect)(()=>{let n="undefined"!=typeof document?document:null,s=t?.target||n;if(null!==e){let e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&sF(e))return!1;let n=lW(e.code,a);u.current.add(e[n]),lV(i,u.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&sF(e))return!1;let n=lW(e.code,a);lV(i,u.current,!0)?(r(!1),u.current.clear()):u.current.delete(e[n]),"Meta"===e.key&&u.current.clear(),o.current=!1},l=()=>{u.current.clear(),r(!1)};return s?.addEventListener("keydown",e),s?.addEventListener("keyup",n),window.addEventListener("blur",l),()=>{s?.removeEventListener("keydown",e),s?.removeEventListener("keyup",n),window.removeEventListener("blur",l)}}},[e,r]),n};function lV(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function lW(e,t){return t.includes(e)?"code":"key"}function lG(e,t,n,r){let o=e.parentNode||e.parentId;if(!o)return n;let u=t.get(o),i=s9(u,r);return lG(u,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(u[sC]?.z??0)>(n.z??0)?u[sC]?.z??0:n.z??0},r)}function lX(e,t,n){e.forEach(r=>{let o=r.parentNode||r.parentId;if(o&&!e.has(o))throw Error(`Parent node ${o} not found`);if(o||n?.[r.id]){let{x:o,y:u,z:i}=lG(r,e,{...r.position,z:r[sC]?.z??0},t);r.positionAbsolute={x:o,y:u},r[sC].z=i,n?.[r.id]&&(r[sC].isParent=!0)}})}function lY(e,t,n,r){let o=new Map,u={},i=1e3*!!r;return e.forEach(e=>{let n=(sx(e.zIndex)?e.zIndex:0)+(e.selected?i:0),r=t.get(e.id),a={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},s=e.parentNode||e.parentId;s&&(u[s]=!0),Object.defineProperty(a,sC,{enumerable:!1,value:{handleBounds:r?.type&&r?.type!==e.type?void 0:r?.[sC]?.handleBounds,z:n}}),o.set(e.id,a)}),lX(o,n,u),o}function lZ(e,t={}){let{getNodes:n,width:r,height:o,minZoom:u,maxZoom:i,d3Zoom:a,d3Selection:s,fitViewOnInitDone:l,fitViewOnInit:c,nodeOrigin:d}=e(),f=t.initial&&!l&&c;if(a&&s&&(f||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),l=e.every(e=>e.width&&e.height);if(e.length>0&&l){let{x:n,y:l,zoom:c}=lr(le(e,d),r,o,t.minZoom??u,t.maxZoom??i,t.padding??.1),f=aL.translate(n,l).scale(c);return"number"==typeof t.duration&&t.duration>0?a.transform(lo(s,t.duration),f):a.transform(s,f),!0}}return!1}function lQ(e,t){return e.forEach(e=>{let n=t.get(e.id);n&&t.set(n.id,{...n,[sC]:n[sC],selected:e.selected})}),new Map(t)}function lJ(e,t){return t.map(t=>{let n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function l0({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:o,edges:u,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:s,hasDefaultEdges:l}=n();e?.length&&(s&&r({nodeInternals:lQ(e,o)}),i?.(e)),t?.length&&(l&&r({edges:lJ(t,u)}),a?.(t))}let l1=()=>{},l2={zoomIn:l1,zoomOut:l1,zoomTo:l1,getZoom:()=>1,setViewport:l1,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:l1,fitBounds:l1,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},l6=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),l3=()=>{let e=su(),{d3Zoom:t,d3Selection:n}=so(l6,rp);return(0,rt.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(lo(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(lo(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(lo(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,o)=>{let[u,i,a]=e.getState().transform,s=aL.translate(r.x??u,r.y??i).scale(r.zoom??a);t.transform(lo(n,o?.duration),s)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>lZ(e.getState,t),setCenter:(r,o,u)=>{let{width:i,height:a,maxZoom:s}=e.getState(),l=void 0!==u?.zoom?u.zoom:s,c=i/2-r*l,d=a/2-o*l,f=aL.translate(c,d).scale(l);t.transform(lo(n,u?.duration),f)},fitBounds:(r,o)=>{let{width:u,height:i,minZoom:a,maxZoom:s}=e.getState(),{x:l,y:c,zoom:d}=lr(r,u,i,a,s,o?.padding??.1),f=aL.translate(l,c).scale(d);t.transform(lo(n,o?.duration),f)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),s7(t,n,r,o)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:o,domNode:u}=e.getState();if(!u)return t;let{x:i,y:a}=u.getBoundingClientRect();return s7({x:t.x-i,y:t.y-a},n,r,o)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:u}=r.getBoundingClientRect(),i=s8(t,n);return{x:i.x+o,y:i.y+u}},viewportInitialized:!0}:l2,[t,n])};function l5(){let e=l3(),t=su(),n=(0,rt.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,rt.useCallback)(e=>t.getState().nodeInternals.get(e),[]),o=(0,rt.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),u=(0,rt.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),i=(0,rt.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:o,onNodesChange:u}=t.getState(),i=n(),a="function"==typeof e?e(i):e;o?r(a):u&&u(0===a.length?i.map(e=>({type:"remove",id:e.id})):a.map(e=>({item:e,type:"reset"})))},[]),a=(0,rt.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:u}=t.getState(),i="function"==typeof e?e(n):e;o?r(i):u&&u(0===i.length?n.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))},[]),s=(0,rt.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:o,hasDefaultNodes:u,onNodesChange:i}=t.getState();u?o([...r(),...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),l=(0,rt.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:o,hasDefaultEdges:u,onEdgesChange:i}=t.getState();u?o([...r,...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),c=(0,rt.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[o,u,i]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:u,zoom:i}}},[]),d=(0,rt.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:o,edges:u,hasDefaultNodes:i,hasDefaultEdges:a,onNodesDelete:s,onEdgesDelete:l,onNodesChange:c,onEdgesChange:d}=t.getState(),f=(e||[]).map(e=>e.id),h=(n||[]).map(e=>e.id),p=o().reduce((e,t)=>{let n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),g=u.filter(e=>"boolean"!=typeof e.deletable||e.deletable),v=g.filter(e=>h.includes(e.id));if(p||v){let e=[...v,...ln(p,g)],n=e.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(a||i)&&(a&&t.setState({edges:u.filter(e=>!n.includes(e.id))}),i&&(p.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),n.length>0&&(l?.(e),d&&d(n.map(e=>({id:e,type:"remove"})))),p.length>0&&(s?.(p),c&&c(p.map(e=>({id:e.id,type:"remove"}))))}},[]),f=(0,rt.useCallback)(e=>{let n=sA(e),r=n?null:t.getState().nodeInternals.get(e.id);return n||r?[n?e:sE(r),r,n]:[null,null,n]},[]),h=(0,rt.useCallback)((e,n=!0,r)=>{let[o,u,i]=f(e);return o?(r||t.getState().getNodes()).filter(e=>{if(!i&&(e.id===u.id||!e.positionAbsolute))return!1;let t=s_(sE(e),o);return n&&t>0||t>=o.width*o.height}):[]},[]),p=(0,rt.useCallback)((e,t,n=!0)=>{let[r]=f(e);if(!r)return!1;let o=s_(r,t);return n&&o>0||o>=r.width*r.height},[]);return(0,rt.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:u,setNodes:i,setEdges:a,addNodes:s,addEdges:l,toObject:c,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:p}),[e,n,r,o,u,i,a,s,l,c,d,h,p])}let l4={actInsideInputWithModifier:!1};var l7=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=su(),{deleteElements:r}=l5(),o=lK(e,l4),u=lK(t);(0,rt.useEffect)(()=>{if(o){let{edges:e,getNodes:t}=n.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,rt.useEffect)(()=>{n.setState({multiSelectionActive:u})},[u])};function l8(e){let t=su();(0,rt.useEffect)(()=>{let n,r=()=>{if(!e.current)return;let n=sd(e.current);(0===n.height||0===n.width)&&t.getState().onError?.("004",a5()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r())).observe(e.current),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}let l9={position:"absolute",width:"100%",height:"100%",top:0,left:0},ce=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,ct=e=>({x:e.x,y:e.y,zoom:e.k}),cn=(e,t)=>e.target.closest(`.${t}`),cr=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),co=e=>{let t=e.ctrlKey&&sP()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},cu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),ci=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:u=!0,zoomOnPinch:i=!0,panOnScroll:a=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=o.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:m,preventScrolling:y=!0,children:b,noWheelClassName:E,noPanClassName:_})=>{let A=(0,rt.useRef)(),x=su(),C=(0,rt.useRef)(!1),w=(0,rt.useRef)(!1),S=(0,rt.useRef)(null),k=(0,rt.useRef)({x:0,y:0,zoom:0}),{d3Zoom:F,d3Selection:D,d3ZoomHandler:B,userSelectionActive:P}=so(cu,rp),j=lK(m),N=(0,rt.useRef)(0),M=(0,rt.useRef)(!1),O=(0,rt.useRef)();return l8(S),(0,rt.useEffect)(()=>{if(S.current){let e=S.current.getBoundingClientRect(),t=aG().scaleExtent([g,v]).translateExtent(p),n=oQ(S.current).call(t),r=aL.translate(h.x,h.y).scale(sf(h.zoom,g,v)),o=[[0,0],[e.width,e.height]],u=t.constrain()(r,o,p);t.transform(n,u),t.wheelDelta(co),x.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[u.x,u.y,u.k],domNode:S.current.closest(".react-flow")})}},[]),(0,rt.useEffect)(()=>{D&&F&&(!a||j||P?void 0!==B&&D.on("wheel.zoom",function(e,t){if(!y&&"wheel"===e.type&&!e.ctrlKey||cn(e,E))return null;e.preventDefault(),B.call(this,e,t)},{passive:!1}):D.on("wheel.zoom",r=>{if(cn(r,E))return!1;r.preventDefault(),r.stopImmediatePropagation();let u=D.property("__zoom").k||1;if(r.ctrlKey&&i){let e=ut(r),t=u*Math.pow(2,co(r));F.scaleTo(D,t,e,r);return}let a=1===r.deltaMode?20:1,c=l===o.Vertical?0:r.deltaX*a,d=l===o.Horizontal?0:r.deltaY*a;!sP()&&r.shiftKey&&l!==o.Vertical&&(c=r.deltaY*a,d=0),F.translateBy(D,-(c/u)*s,-(d/u)*s,{internal:!0});let f=ct(D.property("__zoom")),{onViewportChangeStart:h,onViewportChange:p,onViewportChangeEnd:g}=x.getState();clearTimeout(O.current),M.current||(M.current=!0,t?.(r,f),h?.(f)),M.current&&(e?.(r,f),p?.(f),O.current=setTimeout(()=>{n?.(r,f),g?.(f),M.current=!1},150))},{passive:!1}))},[P,a,l,D,F,B,j,i,y,E,t,e,n]),(0,rt.useEffect)(()=>{F&&F.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;N.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=x.getState(),r=ct(e.transform);C.current=!0,k.current=r,e.sourceEvent?.type==="mousedown"&&x.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[F,t]),(0,rt.useEffect)(()=>{F&&(P&&!C.current?F.on("zoom",null):P||F.on("zoom",t=>{let{onViewportChange:n}=x.getState();if(x.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),w.current=!!(r&&cr(f,N.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=ct(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[P,F,e,f,r]),(0,rt.useEffect)(()=>{F&&F.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:t}=x.getState();if(C.current=!1,x.setState({paneDragging:!1}),r&&cr(f,N.current??0)&&!w.current&&r(e.sourceEvent),w.current=!1,(n||t)&&ce(k.current,e.transform)){let r=ct(e.transform);k.current=r,clearTimeout(A.current),A.current=setTimeout(()=>{t?.(r),n?.(e.sourceEvent,r)},150*!!a)}})},[F,a,f,n,r]),(0,rt.useEffect)(()=>{F&&F.filter(e=>{let t=j||u,n=i&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(cn(e,"react-flow__node")||cn(e,"react-flow__edge")))return!0;if(!f&&!t&&!a&&!c&&!i||P||!c&&"dblclick"===e.type||cn(e,E)&&"wheel"===e.type||cn(e,_)&&("wheel"!==e.type||a&&"wheel"===e.type&&!j)||!i&&e.ctrlKey&&"wheel"===e.type||!t&&!a&&!n&&"wheel"===e.type||!f&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;let r=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[P,F,u,i,a,c,f,d,j]),rt.default.createElement("div",{className:"react-flow__renderer",ref:S,style:l9},b)},ca=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function cs(){let{userSelectionActive:e,userSelectionRect:t}=so(ca,rp);return e&&t?rt.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function cl(e,t){let n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){let e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function cc(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);let n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;let o={...n};for(let e of r)if(e)switch(e.type){case"select":o.selected=e.selected;break;case"position":void 0!==e.position&&(o.position=e.position),void 0!==e.positionAbsolute&&(o.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(o.dragging=e.dragging),o.expandParent&&cl(t,o);break;case"dimensions":void 0!==e.dimensions&&(o.width=e.dimensions.width,o.height=e.dimensions.height),void 0!==e.updateStyle&&(o.style={...o.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(o.resizing=e.resizing),o.expandParent&&cl(t,o);break;case"remove":return t}return t.push(o),t},n)}function cd(e,t){return cc(e,t)}function cf(e,t){return cc(e,t)}let ch=(e,t)=>({id:e,type:"select",selected:t});function cp(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(ch(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(ch(n.id,!1))),e},[])}let cg=(e,t)=>n=>{n.target===t.current&&e?.(n)},cv=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),cm=(0,rt.memo)(({isSelecting:e,selectionMode:t=u.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:o,onPaneClick:i,onPaneContextMenu:a,onPaneScroll:s,onPaneMouseEnter:l,onPaneMouseMove:c,onPaneMouseLeave:d,children:f})=>{let h=(0,rt.useRef)(null),p=su(),g=(0,rt.useRef)(0),v=(0,rt.useRef)(0),m=(0,rt.useRef)(),{userSelectionActive:y,elementsSelectable:b,dragging:E}=so(cv,rp),_=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},A=e=>{i?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},x=e=>{Array.isArray(n)&&n?.includes(2)?e.preventDefault():a?.(e)},C=s?e=>s(e):void 0,w=t=>{let{resetSelectedElements:n,domNode:o}=p.getState();if(m.current=o?.getBoundingClientRect(),!b||!e||0!==t.button||t.target!==h.current||!m.current)return;let{x:u,y:i}=sB(t,m.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:u,startY:i,x:u,y:i}}),r?.(t)},S=n=>{let{userSelectionRect:r,nodeInternals:o,edges:i,transform:a,onNodesChange:s,onEdgesChange:l,nodeOrigin:c,getNodes:d}=p.getState();if(!e||!m.current||!r)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});let f=sB(n,m.current),h=r.startX??0,y=r.startY??0,b={...r,x:f.x<h?f.x:h,y:f.y<y?f.y:y,width:Math.abs(f.x-h),height:Math.abs(f.y-y)},E=d(),_=lt(o,b,a,t===u.Partial,!0,c),A=ln(_,i).map(e=>e.id),x=_.map(e=>e.id);if(g.current!==x.length){g.current=x.length;let e=cp(E,x);e.length&&s?.(e)}if(v.current!==A.length){v.current=A.length;let e=cp(i,A);e.length&&l?.(e)}p.setState({userSelectionRect:b})},k=e=>{if(0!==e.button)return;let{userSelectionRect:t}=p.getState();!y&&t&&e.target===h.current&&A?.(e),p.setState({nodesSelectionActive:g.current>0}),_(),o?.(e)},F=e=>{y&&(p.setState({nodesSelectionActive:g.current>0}),o?.(e)),_()},D=b&&(e||y);return rt.default.createElement("div",{className:rn(["react-flow__pane",{dragging:E,selection:e}]),onClick:D?void 0:cg(A,h),onContextMenu:cg(x,h),onWheel:cg(C,h),onMouseEnter:D?void 0:l,onMouseDown:D?w:void 0,onMouseMove:D?S:c,onMouseUp:D?k:void 0,onMouseLeave:D?F:d,ref:h,style:l9},f,rt.default.createElement(cs,null))});function cy(e,t){let n=e.parentNode||e.parentId;if(!n)return!1;let r=t.get(n);return!!r&&(!!r.selected||cy(r,t))}function cb(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)break;r=r.parentElement}while(r)return!1}function cE(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!cy(n,e))&&(n.draggable||t&&void 0===n.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function c_(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}function cA(e,t,n,r,o=[0,0],u){let i=c_(e,e.extent||r),a=i,s=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&s&&"parent"!==e.extent){let{x:t,y:r}=s9(n.get(s),o).positionAbsolute;a=[[e.extent[0][0]+t,e.extent[0][1]+r],[e.extent[1][0]+t,e.extent[1][1]+r]]}}else if(s&&e.width&&e.height){let t=n.get(s),{x:r,y:u}=s9(t,o).positionAbsolute;a=t&&sx(r)&&sx(u)&&sx(t.width)&&sx(t.height)?[[r+e.width*o[0],u+e.height*o[1]],[r+t.width-e.width+e.width*o[0],u+t.height-e.height+e.height*o[1]]]:a}else u?.("005",a4()),a=i;let l={x:0,y:0};s&&(l=s9(n.get(s),o).positionAbsolute);let c=a&&"parent"!==a?sh(t,a):t;return{position:{x:c.x-l.x,y:c.y-l.y},positionAbsolute:c}}function cx({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}cm.displayName="Pane";let cC=(e,t,n,r)=>{let o=t.querySelectorAll(e);if(!o||!o.length)return null;let u=Array.from(o),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return u.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-a.x)/n,y:(t.top-i.top-a.y)/n,...sd(e)}})};function cw(e,t,n){return void 0===n?n:r=>{let o=t().nodeInternals.get(e);o&&n(r,{...o})}}function cS({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:o,unselectNodesAndEdges:u,multiSelectionActive:i,nodeInternals:a,onError:s}=t.getState(),l=a.get(e);l?(t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(u({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):s?.("012",sn(e))}function ck(){let e=su();return(0,rt.useCallback)(({sourceEvent:t})=>{let{transform:n,snapGrid:r,snapToGrid:o}=e.getState(),u=t.touches?t.touches[0].clientX:t.clientX,i=t.touches?t.touches[0].clientY:t.clientY,a={x:(u-n[0])/n[2],y:(i-n[1])/n[2]};return{xSnapped:o?r[0]*Math.round(a.x/r[0]):a.x,ySnapped:o?r[1]*Math.round(a.y/r[1]):a.y,...a}},[])}function cF(e){return(t,n,r)=>e?.(t,r)}function cD({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:u,selectNodesOnDrag:i}){let a=su(),[s,l]=(0,rt.useState)(!1),c=(0,rt.useRef)([]),d=(0,rt.useRef)({x:null,y:null}),f=(0,rt.useRef)(0),h=(0,rt.useRef)(null),p=(0,rt.useRef)({x:0,y:0}),g=(0,rt.useRef)(null),v=(0,rt.useRef)(!1),m=(0,rt.useRef)(!1),y=(0,rt.useRef)(!1),b=ck();return(0,rt.useEffect)(()=>{if(e?.current){let s=oQ(e.current),E=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:u,updateNodePositions:i,nodeExtent:s,snapGrid:f,snapToGrid:h,nodeOrigin:p,onError:v}=a.getState();d.current={x:e,y:t};let m=!1,y={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&s&&(y=sy(le(c.current,p))),c.current=c.current.map(r=>{let o={x:e-r.distance.x,y:t-r.distance.y};h&&(o.x=f[0]*Math.round(o.x/f[0]),o.y=f[1]*Math.round(o.y/f[1]));let u=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]];c.current.length>1&&s&&!r.extent&&(u[0][0]=r.positionAbsolute.x-y.x+s[0][0],u[1][0]=r.positionAbsolute.x+(r.width??0)-y.x2+s[1][0],u[0][1]=r.positionAbsolute.y-y.y+s[0][1],u[1][1]=r.positionAbsolute.y+(r.height??0)-y.y2+s[1][1]);let i=cA(r,o,n,u,p,v);return m=m||r.position.x!==i.position.x||r.position.y!==i.position.y,r.position=i.position,r.positionAbsolute=i.positionAbsolute,r}),!m)return;i(c.current,!0,!0),l(!0);let b=o?r:cF(u);if(b&&g.current){let[e,t]=cx({nodeId:o,dragItems:c.current,nodeInternals:n});b(g.current,e,t)}},_=()=>{if(!h.current)return;let[e,t]=sg(p.current,h.current);if(0!==e||0!==t){let{transform:n,panBy:r}=a.getState();d.current.x=(d.current.x??0)-e/n[2],d.current.y=(d.current.y??0)-t/n[2],r({x:e,y:t})&&E(d.current)}f.current=requestAnimationFrame(_)},A=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:s,unselectNodesAndEdges:l,onNodeDragStart:f,onSelectionDragStart:h}=a.getState();m.current=!0;let p=o?f:cF(h);i&&u||r||!o||n.get(o)?.selected||l(),o&&u&&i&&cS({id:o,store:a,nodeRef:e});let g=b(t);if(d.current=g,c.current=cE(n,s,g,o),p&&c.current){let[e,r]=cx({nodeId:o,dragItems:c.current,nodeInternals:n});p(t.sourceEvent,e,r)}};if(t)s.on(".drag",null);else{let t=a1().on("start",e=>{let{domNode:t,nodeDragThreshold:n}=a.getState();0===n&&A(e),y.current=!1,d.current=b(e),h.current=t?.getBoundingClientRect()||null,p.current=sB(e.sourceEvent,h.current)}).on("drag",e=>{let t=b(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=a.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!v.current&&m.current&&n&&(v.current=!0,_()),!m.current){let n=t.xSnapped-(d?.current?.x??0),o=t.ySnapped-(d?.current?.y??0);Math.sqrt(n*n+o*o)>r&&A(e)}(d.current.x!==t.xSnapped||d.current.y!==t.ySnapped)&&c.current&&m.current&&(g.current=e.sourceEvent,p.current=sB(e.sourceEvent,h.current),E(t))}}).on("end",e=>{if(m.current&&!y.current&&(l(!1),v.current=!1,m.current=!1,cancelAnimationFrame(f.current),c.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:u}=a.getState(),i=o?r:cF(u);if(t(c.current,!1,!1),i){let[t,r]=cx({nodeId:o,dragItems:c.current,nodeInternals:n});i(e.sourceEvent,t,r)}}}).filter(t=>{let o=t.target;return!t.button&&(!n||!cb(o,`.${n}`,e))&&(!r||cb(o,r,e))});return s.call(t),()=>{s.on(".drag",null)}}}},[e,t,n,r,u,a,o,i,b]),s}function cB(){let e=su();return(0,rt.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:o,getNodes:u,snapToGrid:i,snapGrid:a,onError:s,nodesDraggable:l}=e.getState(),c=u().filter(e=>e.selected&&(e.draggable||l&&void 0===e.draggable)),d=i?a[0]:5,f=i?a[1]:5,h=t.isShiftPressed?4:1,p=t.x*d*h,g=t.y*f*h;o(c.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+g};i&&(t.x=a[0]*Math.round(t.x/a[0]),t.y=a[1]*Math.round(t.y/a[1]));let{positionAbsolute:o,position:u}=cA(e,t,n,r,void 0,s);e.position=u,e.positionAbsolute=o}return e}),!0,!1)},[])}let cP={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var cj=e=>{let t=({id:t,type:n,data:r,xPos:o,yPos:u,xPosOrigin:i,yPosOrigin:a,selected:s,onClick:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onContextMenu:h,onDoubleClick:p,style:g,className:v,isDraggable:m,isSelectable:y,isConnectable:b,isFocusable:E,selectNodesOnDrag:_,sourcePosition:A,targetPosition:x,hidden:C,resizeObserver:w,dragHandle:S,zIndex:k,isParent:F,noDragClassName:D,noPanClassName:B,initialized:P,disableKeyboardA11y:j,ariaLabel:N,rfId:M,hasHandleBounds:O})=>{let $=su(),R=(0,rt.useRef)(null),I=(0,rt.useRef)(null),L=(0,rt.useRef)(A),T=(0,rt.useRef)(x),z=(0,rt.useRef)(n),U=y||m||l||c||d||f,H=cB(),q=cw(t,$.getState,c),K=cw(t,$.getState,d),V=cw(t,$.getState,f),W=cw(t,$.getState,h),G=cw(t,$.getState,p),X=e=>{let{nodeDragThreshold:n}=$.getState();if(y&&(!_||!m||n>0)&&cS({id:t,store:$,nodeRef:R}),l){let n=$.getState().nodeInternals.get(t);n&&l(e,{...n})}},Y=e=>{sF(e)||!j&&(sw.includes(e.key)&&y?cS({id:t,store:$,unselect:"Escape"===e.key,nodeRef:R}):m&&s&&Object.prototype.hasOwnProperty.call(cP,e.key)&&($.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),H({x:cP[e.key].x,y:cP[e.key].y,isShiftPressed:e.shiftKey})))};(0,rt.useEffect)(()=>()=>{I.current&&(w?.unobserve(I.current),I.current=null)},[]),(0,rt.useEffect)(()=>{if(R.current&&!C){let e=R.current;P&&O&&I.current===e||(I.current&&w?.unobserve(I.current),w?.observe(e),I.current=e)}},[C,P,O]),(0,rt.useEffect)(()=>{let e=z.current!==n,r=L.current!==A,o=T.current!==x;R.current&&(e||r||o)&&(e&&(z.current=n),r&&(L.current=A),o&&(T.current=x),$.getState().updateNodeDimensions([{id:t,nodeElement:R.current,forceUpdate:!0}]))},[t,n,A,x]);let Z=cD({nodeRef:R,disabled:C||!m,noDragClassName:D,handleSelector:S,nodeId:t,isSelectable:y,selectNodesOnDrag:_});return C?null:rt.default.createElement("div",{className:rn(["react-flow__node",`react-flow__node-${n}`,{[B]:m},v,{selected:s,selectable:y,parent:F,dragging:Z}]),ref:R,style:{zIndex:k,transform:`translate(${i}px,${a}px)`,pointerEvents:U?"all":"none",visibility:P?"visible":"hidden",...g},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:q,onMouseMove:K,onMouseLeave:V,onContextMenu:W,onClick:X,onDoubleClick:G,onKeyDown:E?Y:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":j?void 0:`${lL}-${M}`,"aria-label":N},rt.default.createElement(s0,{value:t},rt.default.createElement(e,{id:t,data:r,type:n,xPos:o,yPos:u,selected:s,isConnectable:b,sourcePosition:A,targetPosition:x,dragging:Z,dragHandle:S,zIndex:k})))};return t.displayName="NodeWrapper",(0,rt.memo)(t)};let cN=e=>({...le(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive});function cM({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=su(),{width:o,height:u,x:i,y:a,transformString:s,userSelectionActive:l}=so(cN,rp),c=cB(),d=(0,rt.useRef)(null);if((0,rt.useEffect)(()=>{n||d.current?.focus({preventScroll:!0})},[n]),cD({nodeRef:d}),l||!o||!u)return null;let f=e?t=>{e(t,r.getState().getNodes().filter(e=>e.selected))}:void 0,h=e=>{Object.prototype.hasOwnProperty.call(cP,e.key)&&c({x:cP[e.key].x,y:cP[e.key].y,isShiftPressed:e.shiftKey})};return rt.default.createElement("div",{className:rn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s}},rt.default.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:u,top:a,left:i}}))}var cO=(0,rt.memo)(cM);let c$=e=>e.nodesSelectionActive,cR=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:i,deleteKeyCode:a,onMove:s,onMoveStart:l,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:p,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:m,zoomActivationKeyCode:y,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:_,panOnScroll:A,panOnScrollSpeed:x,panOnScrollMode:C,zoomOnDoubleClick:w,panOnDrag:S,defaultViewport:k,translateExtent:F,minZoom:D,maxZoom:B,preventScrolling:P,onSelectionContextMenu:j,noWheelClassName:N,noPanClassName:M,disableKeyboardA11y:O})=>{let $=so(c$),R=lK(d),I=lK(m),L=I||S,T=I||A,z=R||f&&!0!==L;return l7({deleteKeyCode:a,multiSelectionKeyCode:v}),rt.default.createElement(ci,{onMove:s,onMoveStart:l,onMoveEnd:c,onPaneContextMenu:u,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:_,panOnScroll:T,panOnScrollSpeed:x,panOnScrollMode:C,zoomOnDoubleClick:w,panOnDrag:!R&&L,defaultViewport:k,translateExtent:F,minZoom:D,maxZoom:B,zoomActivationKeyCode:y,preventScrolling:P,noWheelClassName:N,noPanClassName:M},rt.default.createElement(cm,{onSelectionStart:p,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:u,onPaneScroll:i,panOnDrag:L,isSelecting:!!z,selectionMode:h},e,$&&rt.default.createElement(cO,{onSelectionContextMenu:j,noPanClassName:M,disableKeyboardA11y:O})))};cR.displayName="FlowRenderer";var cI=(0,rt.memo)(cR);function cL(e){return so((0,rt.useCallback)(t=>e?lt(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[e]))}function cT(e){let t={input:cj(e.input||lx),default:cj(e.default||l_),output:cj(e.output||lw),group:cj(e.group||lS)},n={},r=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=cj(e[n]||l_),t),n);return{...t,...r}}let cz=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},cU=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),cH=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:u,onError:i}=so(cU,rp),a=cL(e.onlyRenderVisibleElements),l=(0,rt.useRef)(),c=(0,rt.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let e=new ResizeObserver(e=>{u(e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})))});return l.current=e,e},[]);return(0,rt.useEffect)(()=>()=>{l?.current?.disconnect()},[]),rt.default.createElement("div",{className:"react-flow__nodes",style:l9},a.map(u=>{let a=u.type||"default";e.nodeTypes[a]||(i?.("003",a3(a)),a="default");let l=e.nodeTypes[a]||e.nodeTypes.default,d=!!(u.draggable||t&&void 0===u.draggable),f=!!(u.selectable||o&&void 0===u.selectable),h=!!(u.connectable||n&&void 0===u.connectable),p=!!(u.focusable||r&&void 0===u.focusable),g=e.nodeExtent?sh(u.positionAbsolute,e.nodeExtent):u.positionAbsolute,v=g?.x??0,m=g?.y??0,y=cz({x:v,y:m,width:u.width??0,height:u.height??0,origin:e.nodeOrigin});return rt.default.createElement(l,{key:u.id,id:u.id,className:u.className,style:u.style,type:a,data:u.data,sourcePosition:u.sourcePosition||s.Bottom,targetPosition:u.targetPosition||s.Top,hidden:u.hidden,xPos:v,yPos:m,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!u.selected,isDraggable:d,isSelectable:f,isConnectable:h,isFocusable:p,resizeObserver:c,dragHandle:u.dragHandle,zIndex:u[sC]?.z??0,isParent:!!u[sC]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!u.width&&!!u.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:u.ariaLabel,hasHandleBounds:!!u[sC]?.handleBounds})}))};cH.displayName="NodeRenderer";var cq=(0,rt.memo)(cH);let cK=(e,t,n)=>n===s.Left?e-t:n===s.Right?e+t:e,cV=(e,t,n)=>n===s.Top?e-t:n===s.Bottom?e+t:e,cW="react-flow__edgeupdater",cG=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:u,onMouseOut:i,type:a})=>rt.default.createElement("circle",{onMouseDown:o,onMouseEnter:u,onMouseOut:i,className:rn([cW,`${cW}-${a}`]),cx:cK(t,r,e),cy:cV(n,r,e),r:r,stroke:"transparent",fill:"transparent"}),cX=()=>!0;var cY=e=>{let t=({id:t,className:n,type:r,data:o,onClick:u,onEdgeDoubleClick:i,selected:a,animated:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,source:v,target:m,sourceX:y,sourceY:b,targetX:E,targetY:_,sourcePosition:A,targetPosition:x,elementsSelectable:C,hidden:w,sourceHandleId:S,targetHandleId:k,onContextMenu:F,onMouseEnter:D,onMouseMove:B,onMouseLeave:P,reconnectRadius:j,onReconnect:N,onReconnectStart:M,onReconnectEnd:O,markerEnd:$,markerStart:R,rfId:I,ariaLabel:L,isFocusable:T,isReconnectable:z,pathOptions:U,interactionWidth:H,disableKeyboardA11y:q})=>{let K=(0,rt.useRef)(null),[V,W]=(0,rt.useState)(!1),[G,X]=(0,rt.useState)(!1),Y=su(),Z=(0,rt.useMemo)(()=>`url('#${s3(R,I)}')`,[R,I]),Q=(0,rt.useMemo)(()=>`url('#${s3($,I)}')`,[$,I]);if(w)return null;let J=e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:o,multiSelectionActive:i}=Y.getState(),a=n.find(e=>e.id===t);a&&(C&&(Y.setState({nodesSelectionActive:!1}),a.selected&&i?(o({nodes:[],edges:[a]}),K.current?.blur()):r([t])),u&&u(e,a))},ee=sN(t,Y.getState,i),et=sN(t,Y.getState,F),en=sN(t,Y.getState,D),er=sN(t,Y.getState,B),eo=sN(t,Y.getState,P),eu=(e,n)=>{if(0!==e.button)return;let{edges:r,isValidConnection:o}=Y.getState(),u=n?m:v,i=(n?k:S)||null,a=n?"target":"source",s=o||cX,l=n,c=r.find(e=>e.id===t);X(!0),M?.(e,c,a);let d=e=>{X(!1),O?.(e,c,a)};lp({event:e,handleId:i,nodeId:u,onConnect:e=>N?.(c,e),isTarget:l,getState:Y.getState,setState:Y.setState,isValidConnection:s,edgeUpdaterType:a,onReconnectEnd:d})},ei=e=>eu(e,!0),ea=e=>eu(e,!1),es=()=>W(!0),el=()=>W(!1),ec=!C&&!u,ed=e=>{if(!q&&sw.includes(e.key)&&C){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:o}=Y.getState();"Escape"===e.key?(K.current?.blur(),n({edges:[o.find(e=>e.id===t)]})):r([t])}};return rt.default.createElement("g",{className:rn(["react-flow__edge",`react-flow__edge-${r}`,n,{selected:a,animated:s,inactive:ec,updating:V}]),onClick:J,onDoubleClick:ee,onContextMenu:et,onMouseEnter:en,onMouseMove:er,onMouseLeave:eo,onKeyDown:T?ed:void 0,tabIndex:T?0:void 0,role:T?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===L?void 0:L||`Edge from ${v} to ${m}`,"aria-describedby":T?`${lT}-${I}`:void 0,ref:K},!G&&rt.default.createElement(e,{id:t,source:v,target:m,selected:a,animated:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,data:o,style:g,sourceX:y,sourceY:b,targetX:E,targetY:_,sourcePosition:A,targetPosition:x,sourceHandleId:S,targetHandleId:k,markerStart:Z,markerEnd:Q,pathOptions:U,interactionWidth:H}),z&&rt.default.createElement(rt.default.Fragment,null,("source"===z||!0===z)&&rt.default.createElement(cG,{position:A,centerX:y,centerY:b,radius:j,onMouseDown:ei,onMouseEnter:es,onMouseOut:el,type:"source"}),("target"===z||!0===z)&&rt.default.createElement(cG,{position:x,centerX:E,centerY:_,radius:j,onMouseDown:ea,onMouseEnter:es,onMouseOut:el,type:"target"})))};return t.displayName="EdgeWrapper",(0,rt.memo)(t)};function cZ(e){let t={default:cY(e.default||sQ),straight:cY(e.bezier||sG),step:cY(e.step||sV),smoothstep:cY(e.step||sK),simplebezier:cY(e.simplebezier||sI)},n={},r=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=cY(e[n]||sQ),t),n);return{...t,...r}}function cQ(e,t,n=null){let r=(n?.x||0)+t.x,o=(n?.y||0)+t.y,u=n?.width||t.width,i=n?.height||t.height;switch(e){case s.Top:return{x:r+u/2,y:o};case s.Right:return{x:r+u,y:o+i/2};case s.Bottom:return{x:r+u/2,y:o+i};case s.Left:return{x:r,y:o+i/2}}}function cJ(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}let c0=(e,t,n,r,o,u)=>{let i=cQ(n,e,t),a=cQ(u,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function c1({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:u,width:i,height:a,transform:s}){let l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+u)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);let c=sy({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:i/s[2],height:a/s[2]});return Math.ceil(Math.max(0,Math.min(c.x2,l.x2)-Math.max(c.x,l.x))*Math.max(0,Math.min(c.y2,l.y2)-Math.max(c.y,l.y)))>0}function c2(e){let t=e?.[sC]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}let c6=[{level:0,isMaxLevel:!0,edges:[]}];function c3(e,t,n=!1){let r=-1,o=Object.entries(e.reduce((e,o)=>{let u=sx(o.zIndex),i=u?o.zIndex:0;if(n){let e=t.get(o.target),n=t.get(o.source),r=o.selected||e?.selected||n?.selected,a=Math.max(n?.[sC]?.z||0,e?.[sC]?.z||0,1e3);i=(u?o.zIndex:0)+(r?a:0)}return e[i]?e[i].push(o):e[i]=[o],r=i>r?i:r,e},{})).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return 0===o.length?c6:o}function c5(e,t,n){return c3(so((0,rt.useCallback)(n=>e?n.edges.filter(e=>{let r=t.get(e.source),o=t.get(e.target);return r?.width&&r?.height&&o?.width&&o?.height&&c1({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:o.width,targetHeight:o.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t])),t,n)}let c4=({color:e="none",strokeWidth:t=1})=>rt.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),c7=({color:e="none",strokeWidth:t=1})=>rt.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),c8={[a.Arrow]:c4,[a.ArrowClosed]:c7};function c9(e){let t=su();return(0,rt.useMemo)(()=>Object.prototype.hasOwnProperty.call(c8,e)?c8[e]:(t.getState().onError?.("009",a8(e)),null),[e])}let de=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:u="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{let s=c9(t);return s?rt.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:a,refX:"0",refY:"0"},rt.default.createElement(s,{color:n,strokeWidth:i})):null},dt=({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,o)=>([o.markerStart,o.markerEnd].forEach(o=>{if(o&&"object"==typeof o){let u=s3(o,t);r.includes(u)||(n.push({id:u,color:o.color||e,...o}),r.push(u))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))},dn=({defaultColor:e,rfId:t})=>{let n=so((0,rt.useCallback)(dt({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return rt.default.createElement("defs",null,n.map(e=>rt.default.createElement(de,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};dn.displayName="MarkerDefinitions";var dr=(0,rt.memo)(dn);let du=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),di=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:u,noPanClassName:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:f,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:m,children:y,disableKeyboardA11y:b})=>{let{edgesFocusable:E,edgesUpdatable:_,elementsSelectable:A,width:x,height:C,connectionMode:w,nodeInternals:S,onError:k}=so(du,rp),F=c5(t,S,n);return x?rt.default.createElement(rt.default.Fragment,null,F.map(({level:t,edges:n,isMaxLevel:y})=>rt.default.createElement("svg",{key:t,style:{zIndex:t},width:x,height:C,className:"react-flow__edges react-flow__container"},y&&rt.default.createElement(dr,{defaultColor:e,rfId:o}),rt.default.createElement("g",null,n.map(e=>{let[t,n,y]=c2(S.get(e.source)),[x,C,F]=c2(S.get(e.target));if(!y||!F)return null;let D=e.type||"default";u[D]||(k?.("011",st(D)),D="default");let B=u[D]||u.default,P=w===r.Strict?C.target:(C.target??[]).concat(C.source??[]),j=cJ(n.source,e.sourceHandle),N=cJ(P,e.targetHandle),M=j?.position||s.Bottom,O=N?.position||s.Top,$=!!(e.focusable||E&&void 0===e.focusable),R=e.reconnectable||e.updatable,I=void 0!==p&&(R||_&&void 0===R);if(!j||!N)return k?.("008",a9(j,e)),null;let{sourceX:L,sourceY:T,targetX:z,targetY:U}=c0(t,j,M,x,N,O);return rt.default.createElement(B,{key:e.id,id:e.id,className:rn([e.className,i]),type:D,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:L,sourceY:T,targetX:z,targetY:U,sourcePosition:M,targetPosition:O,elementsSelectable:A,onContextMenu:a,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:f,onEdgeDoubleClick:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:m,rfId:o,ariaLabel:e.ariaLabel,isFocusable:$,isReconnectable:I,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:b})})))),y):null};di.displayName="EdgeRenderer";var da=(0,rt.memo)(di);let ds=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function dl({children:e}){let t=so(ds);return rt.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function dc(e){let t=l5(),n=(0,rt.useRef)(!1);(0,rt.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}let dd={[s.Left]:s.Right,[s.Right]:s.Left,[s.Top]:s.Bottom,[s.Bottom]:s.Top},df=({nodeId:e,handleType:t,style:n,type:o=i.Bezier,CustomComponent:u,connectionStatus:a})=>{let{fromNode:s,handleId:l,toX:c,toY:d,connectionMode:f}=so((0,rt.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),rp),h=s?.[sC]?.handleBounds,p=h?.[t];if(f===r.Loose&&(p=p||h?.["source"===t?"target":"source"]),!s||!p)return null;let g=l?p.find(e=>e.id===l):p[0],v=g?g.x+g.width/2:(s.width??0)/2,m=g?g.y+g.height/2:s.height??0,y=(s.positionAbsolute?.x??0)+v,b=(s.positionAbsolute?.y??0)+m,E=g?.position,_=E?dd[E]:null;if(!E||!_)return null;if(u)return rt.default.createElement(u,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:g,fromX:y,fromY:b,toX:c,toY:d,fromPosition:E,toPosition:_,connectionStatus:a});let A="",x={sourceX:y,sourceY:b,sourcePosition:E,targetX:c,targetY:d,targetPosition:_};return o===i.Bezier?[A]=sZ(x):o===i.Step?[A]=sq({...x,borderRadius:0}):o===i.SmoothStep?[A]=sq(x):o===i.SimpleBezier?[A]=sR(x):A=`M${y},${b} ${c},${d}`,rt.default.createElement("path",{d:A,fill:"none",className:"react-flow__connection-path",style:n})};df.displayName="ConnectionLine";let dh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function dp({containerStyle:e,style:t,type:n,component:r}){let{nodeId:o,handleType:u,nodesConnectable:i,width:a,height:s,connectionStatus:l}=so(dh,rp);return o&&u&&a&&i?rt.default.createElement("svg",{style:e,width:a,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container"},rt.default.createElement("g",{className:rn(["react-flow__connection",l])},rt.default.createElement(df,{nodeId:o,handleType:u,style:t,type:n,CustomComponent:r,connectionStatus:l}))):null}function dg(e,t){return(0,rt.useRef)(null),su(),(0,rt.useMemo)(()=>t(e),[e])}let dv=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:u,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:v,connectionLineType:m,connectionLineStyle:y,connectionLineComponent:b,connectionLineContainerStyle:E,selectionKeyCode:_,selectionOnDrag:A,selectionMode:x,multiSelectionKeyCode:C,panActivationKeyCode:w,zoomActivationKeyCode:S,deleteKeyCode:k,onlyRenderVisibleElements:F,elementsSelectable:D,selectNodesOnDrag:B,defaultViewport:P,translateExtent:j,minZoom:N,maxZoom:M,preventScrolling:O,defaultMarkerColor:$,zoomOnScroll:R,zoomOnPinch:I,panOnScroll:L,panOnScrollSpeed:T,panOnScrollMode:z,zoomOnDoubleClick:U,panOnDrag:H,onPaneClick:q,onPaneMouseEnter:K,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneScroll:G,onPaneContextMenu:X,onEdgeContextMenu:Y,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:J,onReconnect:ee,onReconnectStart:et,onReconnectEnd:en,reconnectRadius:er,noDragClassName:eo,noWheelClassName:eu,noPanClassName:ei,elevateEdgesOnSelect:ea,disableKeyboardA11y:es,nodeOrigin:el,nodeExtent:ec,rfId:ed})=>{let ef=dg(e,cT),eh=dg(t,cZ);return dc(u),rt.default.createElement(cI,{onPaneClick:q,onPaneMouseEnter:K,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneContextMenu:X,onPaneScroll:G,deleteKeyCode:k,selectionKeyCode:_,selectionOnDrag:A,selectionMode:x,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:C,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:R,zoomOnPinch:I,zoomOnDoubleClick:U,panOnScroll:L,panOnScrollSpeed:T,panOnScrollMode:z,panOnDrag:H,defaultViewport:P,translateExtent:j,minZoom:N,maxZoom:M,onSelectionContextMenu:p,preventScrolling:O,noDragClassName:eo,noWheelClassName:eu,noPanClassName:ei,disableKeyboardA11y:es},rt.default.createElement(dl,null,rt.default.createElement(da,{edgeTypes:eh,onEdgeClick:a,onEdgeDoubleClick:l,onlyRenderVisibleElements:F,onEdgeContextMenu:Y,onEdgeMouseEnter:Z,onEdgeMouseMove:Q,onEdgeMouseLeave:J,onReconnect:ee,onReconnectStart:et,onReconnectEnd:en,reconnectRadius:er,defaultMarkerColor:$,noPanClassName:ei,elevateEdgesOnSelect:!!ea,disableKeyboardA11y:es,rfId:ed},rt.default.createElement(dp,{style:y,type:m,component:b,containerStyle:E})),rt.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),rt.default.createElement(cq,{nodeTypes:ef,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:B,onlyRenderVisibleElements:F,noPanClassName:ei,noDragClassName:eo,disableKeyboardA11y:es,nodeOrigin:el,nodeExtent:ec,rfId:ed})))};dv.displayName="GraphView";var dm=(0,rt.memo)(dv);let dy=[[-1/0,-1/0],[1/0,1/0]],db={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:dy,nodeExtent:dy,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:r.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:sS,isValidConnection:void 0},dE=()=>rh((e,t)=>({...db,setNodes:n=>{let{nodeInternals:r,nodeOrigin:o,elevateNodesOnSelect:u}=t();e({nodeInternals:lY(n,r,o,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let o=void 0!==n,u=void 0!==r;e({nodeInternals:o?lY(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:u?r:[],hasDefaultNodes:o,hasDefaultEdges:u})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:o,fitViewOnInit:u,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:s,nodeOrigin:l}=t(),c=s?.querySelector(".react-flow__viewport");if(!c)return;let d=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((e,t)=>{let n=o.get(t.id);if(n?.hidden)o.set(n.id,{...n,[sC]:{...n[sC],handleBounds:void 0}});else if(n){let r=sd(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(o.set(n.id,{...n,[sC]:{...n[sC],handleBounds:{source:cC(".source",t.nodeElement,f,l),target:cC(".target",t.nodeElement,f,l)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);lX(o,l);let p=i||u&&!i&&lZ(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:p}),h?.length>0&&r?.(h)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:o}=t();o(e.map(e=>{let t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:o,hasDefaultNodes:u,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:s}=t();n?.length&&(u&&e({nodeInternals:lY(cd(n,a()),o,i,s)}),r?.(n))},addSelectedNodes:n=>{let r,{multiSelectionActive:o,edges:u,getNodes:i}=t(),a=null;o?r=n.map(e=>ch(e,!0)):(r=cp(i(),n),a=cp(u,[])),l0({changedNodes:r,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{let r,{multiSelectionActive:o,edges:u,getNodes:i}=t(),a=null;o?r=n.map(e=>ch(e,!0)):(r=cp(u,n),a=cp(i(),[])),l0({changedNodes:a,changedEdges:r,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:o,getNodes:u}=t(),i=n||u(),a=r||o;l0({changedNodes:i.map(e=>(e.selected=!1,ch(e.id,!1))),changedEdges:a.map(e=>ch(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:o}=t();r?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:o}=t();r?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t();l0({changedNodes:r().filter(e=>e.selected).map(e=>ch(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>ch(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=sh(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:o,d3Zoom:u,d3Selection:i,translateExtent:a}=t();if(!u||!i||!e.x&&!e.y)return!1;let s=aL.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),l=[[0,0],[r,o]],c=u?.constrain()(s,l,a);return u.transform(i,c),n[0]!==c.x||n[1]!==c.y||n[2]!==c.k},cancelConnection:()=>e({connectionNodeId:db.connectionNodeId,connectionHandleId:db.connectionHandleId,connectionHandleType:db.connectionHandleType,connectionStatus:db.connectionStatus,connectionStartHandle:db.connectionStartHandle,connectionEndHandle:db.connectionEndHandle}),reset:()=>e({...db})}),Object.is),d_=({children:e})=>{let t=(0,rt.useRef)(null);return t.current||(t.current=dE()),rt.default.createElement(a6,{value:t.current},e)};d_.displayName="ReactFlowProvider";let dA=({children:e})=>(0,rt.useContext)(a2)?rt.default.createElement(rt.default.Fragment,null,e):rt.default.createElement(d_,null,e);dA.displayName="ReactFlowWrapper";let dx={input:lx,default:l_,output:lw,group:lS},dC={default:sQ,straight:sG,step:sV,smoothstep:sK,simplebezier:sI},dw=[0,0],dS=[15,15],dk={x:0,y:0,zoom:1},dF={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},dD=(0,rt.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:s,nodeTypes:l=dx,edgeTypes:c=dC,onNodeClick:d,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:v,onConnect:m,onConnectStart:y,onConnectEnd:b,onClickConnectStart:E,onClickConnectEnd:_,onNodeMouseEnter:A,onNodeMouseMove:x,onNodeMouseLeave:C,onNodeContextMenu:w,onNodeDoubleClick:S,onNodeDragStart:k,onNodeDrag:F,onNodeDragStop:D,onNodesDelete:B,onEdgesDelete:P,onSelectionChange:j,onSelectionDragStart:N,onSelectionDrag:M,onSelectionDragStop:O,onSelectionContextMenu:$,onSelectionStart:R,onSelectionEnd:I,connectionMode:L=r.Strict,connectionLineType:T=i.Bezier,connectionLineStyle:z,connectionLineComponent:U,connectionLineContainerStyle:H,deleteKeyCode:q="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:V=!1,selectionMode:W=u.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:X=sP()?"Meta":"Control",zoomActivationKeyCode:Y=sP()?"Meta":"Control",snapToGrid:Z=!1,snapGrid:Q=dS,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:ee=!0,nodesDraggable:et,nodesConnectable:en,nodesFocusable:er,nodeOrigin:eo=dw,edgesFocusable:eu,edgesUpdatable:ei,elementsSelectable:ea,defaultViewport:es=dk,minZoom:el=.5,maxZoom:ec=2,translateExtent:ed=dy,preventScrolling:ef=!0,nodeExtent:eh,defaultMarkerColor:ep="#b1b1b7",zoomOnScroll:eg=!0,zoomOnPinch:ev=!0,panOnScroll:em=!1,panOnScrollSpeed:ey=.5,panOnScrollMode:eb=o.Free,zoomOnDoubleClick:eE=!0,panOnDrag:e_=!0,onPaneClick:eA,onPaneMouseEnter:ex,onPaneMouseMove:eC,onPaneMouseLeave:ew,onPaneScroll:eS,onPaneContextMenu:ek,children:eF,onEdgeContextMenu:eD,onEdgeDoubleClick:eB,onEdgeMouseEnter:eP,onEdgeMouseMove:ej,onEdgeMouseLeave:eN,onEdgeUpdate:eM,onEdgeUpdateStart:eO,onEdgeUpdateEnd:e$,onReconnect:eR,onReconnectStart:eI,onReconnectEnd:eL,reconnectRadius:eT=10,edgeUpdaterRadius:ez=10,onNodesChange:eU,onEdgesChange:eH,noDragClassName:eq="nodrag",noWheelClassName:eK="nowheel",noPanClassName:eV="nopan",fitView:eW=!1,fitViewOptions:eG,connectOnClick:eX=!0,attributionPosition:eY,proOptions:eZ,defaultEdgeOptions:eQ,elevateNodesOnSelect:eJ=!0,elevateEdgesOnSelect:e0=!1,disableKeyboardA11y:e1=!1,autoPanOnConnect:e2=!0,autoPanOnNodeDrag:e6=!0,connectionRadius:e3=20,isValidConnection:e5,onError:e4,style:e7,id:e8,nodeDragThreshold:e9,...te},tt)=>{let tn=e8||"1";return rt.default.createElement("div",{...te,style:{...e7,...dF},ref:tt,className:rn(["react-flow",s]),"data-testid":"rf__wrapper",id:e8},rt.default.createElement(dA,null,rt.default.createElement(dm,{onInit:h,onMove:p,onMoveStart:g,onMoveEnd:v,onNodeClick:d,onEdgeClick:f,onNodeMouseEnter:A,onNodeMouseMove:x,onNodeMouseLeave:C,onNodeContextMenu:w,onNodeDoubleClick:S,nodeTypes:l,edgeTypes:c,connectionLineType:T,connectionLineStyle:z,connectionLineComponent:U,connectionLineContainerStyle:H,selectionKeyCode:K,selectionOnDrag:V,selectionMode:W,deleteKeyCode:q,multiSelectionKeyCode:X,panActivationKeyCode:G,zoomActivationKeyCode:Y,onlyRenderVisibleElements:J,selectNodesOnDrag:ee,defaultViewport:es,translateExtent:ed,minZoom:el,maxZoom:ec,preventScrolling:ef,zoomOnScroll:eg,zoomOnPinch:ev,zoomOnDoubleClick:eE,panOnScroll:em,panOnScrollSpeed:ey,panOnScrollMode:eb,panOnDrag:e_,onPaneClick:eA,onPaneMouseEnter:ex,onPaneMouseMove:eC,onPaneMouseLeave:ew,onPaneScroll:eS,onPaneContextMenu:ek,onSelectionContextMenu:$,onSelectionStart:R,onSelectionEnd:I,onEdgeContextMenu:eD,onEdgeDoubleClick:eB,onEdgeMouseEnter:eP,onEdgeMouseMove:ej,onEdgeMouseLeave:eN,onReconnect:eR??eM,onReconnectStart:eI??eO,onReconnectEnd:eL??e$,reconnectRadius:eT??ez,defaultMarkerColor:ep,noDragClassName:eq,noWheelClassName:eK,noPanClassName:eV,elevateEdgesOnSelect:e0,rfId:tn,disableKeyboardA11y:e1,nodeOrigin:eo,nodeExtent:eh}),rt.default.createElement(l$,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:m,onConnectStart:y,onConnectEnd:b,onClickConnectStart:E,onClickConnectEnd:_,nodesDraggable:et,nodesConnectable:en,nodesFocusable:er,edgesFocusable:eu,edgesUpdatable:ei,elementsSelectable:ea,elevateNodesOnSelect:eJ,minZoom:el,maxZoom:ec,nodeExtent:eh,onNodesChange:eU,onEdgesChange:eH,snapToGrid:Z,snapGrid:Q,connectionMode:L,translateExtent:ed,connectOnClick:eX,defaultEdgeOptions:eQ,fitView:eW,fitViewOptions:eG,onNodesDelete:B,onEdgesDelete:P,onNodeDragStart:k,onNodeDrag:F,onNodeDragStop:D,onSelectionDrag:M,onSelectionDragStart:N,onSelectionDragStop:O,noPanClassName:eV,nodeOrigin:eo,rfId:tn,autoPanOnConnect:e2,autoPanOnNodeDrag:e6,onError:e4,connectionRadius:e3,isValidConnection:e5,nodeDragThreshold:e9}),rt.default.createElement(lj,{onSelectionChange:j}),eF,rt.default.createElement(ss,{proOptions:eZ,position:eY}),rt.default.createElement(lq,{rfId:tn,disableKeyboardA11y:e1})))});function dB(e){return t=>{let[n,r]=(0,rt.useState)(t),o=(0,rt.useCallback)(t=>r(n=>e(t,n)),[]);return[n,r,o]}}dD.displayName="ReactFlow";let dP=dB(cd),dj=dB(cf);var dN=e.i(59495),dM=l,dO=d,d$=d;let dR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dI=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),dL=e=>{let t=dI(e);return t.charAt(0).toUpperCase()+t.slice(1)},dT=(...e)=>e.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),dz=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var dU=d,dH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let dq=(0,dU.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:i,...a},s)=>(0,dU.createElement)("svg",{ref:s,...dH,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:dT("lucide",o),...!u&&!dz(a)&&{"aria-hidden":"true"},...a},[...i.map(([e,t])=>(0,dU.createElement)(e,t)),...Array.isArray(u)?u:[u]])),dK=(e,t)=>{let n=(0,d$.forwardRef)(({className:n,...r},o)=>(0,d$.createElement)(dq,{ref:o,iconNode:t,className:dT(`lucide-${dR(dL(e))}`,`lucide-${e}`,n),...r}));return n.displayName=dL(e),n},dV=dK("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),dW=dK("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var dG=e.i(54126);function dX({x:e,y:t,nodeId:n,onDelete:r,onClose:o}){let u=(0,dO.useRef)(null);(0,dO.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&o()},t=e=>{"Escape"===e.key&&o()};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[o]);let i=()=>{r(n),o()};return(0,dM.jsxs)("div",{ref:u,className:dG.default.menu,style:{left:e,top:t},children:[(0,dM.jsxs)("button",{className:dG.default.menuItem,onClick:i,children:[(0,dM.jsx)(dV,{size:16}),(0,dM.jsx)("span",{children:"Delete Node & Children"})]}),(0,dM.jsxs)("button",{className:dG.default.menuItem,disabled:!0,children:[(0,dM.jsx)(dW,{size:16}),(0,dM.jsx)("span",{children:"Add Comment (Coming Soon)"})]})]})}var dY=e.i(31936);let dZ=80,dQ=36,dJ=(e,t)=>{try{if(0===e.length)return{nodes:e,edges:t};let n=new dN.default.graphlib.Graph;return n.setDefaultEdgeLabel(()=>({})),n.setGraph({rankdir:"TB"}),e.forEach(e=>{n.setNode(e.id,{width:dZ,height:dQ})}),t.forEach(e=>{n.setEdge(e.source,e.target)}),dN.default.layout(n),{nodes:e.map(e=>{let t=n.node(e.id);return e.targetPosition=s.Top,e.sourcePosition=s.Bottom,e.position={x:t.x-dZ/2,y:t.y-dQ/2},e}),edges:t}}catch(n){return console.error("Dagre layout error:",n),{nodes:e,edges:t}}};function d0(){let{nodes:e,activeNodeId:t,navigateToNode:n,deleteNode:r,rootId:o}=n4(),[u,s,l]=dP([]),[c,d,f]=dj([]),[h,p]=(0,re.useState)(null),{fitView:g}=l5(),{nodes:v,edges:m}=(0,re.useMemo)(()=>{let n=[],r=[];return Object.values(e).forEach(e=>{let u=e.id===o,s=e.id===t;n.push({id:e.id,data:{label:u?"Start":e.move?.san},position:{x:0,y:0},style:{background:s?"#4f46e5":"#fff",color:s?"#fff":"#000",border:s?"2px solid #312e81":"1px solid #777",width:dZ,fontSize:"12px",fontWeight:u?"bold":"normal",cursor:"pointer"}}),e.parentId&&r.push({id:`${e.parentId}-${e.id}`,source:e.parentId,target:e.id,type:i.SmoothStep,markerEnd:{type:a.ArrowClosed}})}),dJ(n,r)},[e,t,o]);(0,re.useEffect)(()=>{s(v),d(m)},[v,m,s,d]),(0,re.useEffect)(()=>{let e=setTimeout(()=>{g({nodes:[{id:t}],duration:300,padding:.3})},50);return()=>clearTimeout(e)},[t,g,u]);let y=(0,re.useCallback)((e,t)=>{n(t.id)},[n]),b=(0,re.useCallback)((e,t)=>{e.preventDefault(),p({x:e.clientX,y:e.clientY,nodeId:t.id})},[]),E=(0,re.useCallback)(e=>{r(e)},[r]);return(0,n9.jsxs)("div",{className:dY.default.graphContainer,children:[(0,n9.jsx)(dD,{nodes:u,edges:c,onNodesChange:l,onEdgesChange:f,onNodeClick:y,onNodeContextMenu:b,fitView:!0,attributionPosition:"bottom-right"}),h&&(0,n9.jsx)(dX,{x:h.x,y:h.y,nodeId:h.nodeId,onDelete:E,onClose:()=>p(null)})]})}function d1(){return(0,n9.jsx)(d_,{children:(0,n9.jsx)(d0,{})})}var d2=l;let d6=dK("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),d3=dK("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),d5=dK("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),d4=dK("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),d7=dK("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),d8=dK("file-down",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),d9=dK("file-up",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),fe=dK("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var ft=e.i(7194),fn=d;async function fr(e,t=100){try{let n=await fetch(`https://lichess.org/api/games/user/${e}?max=${t}&pgnInJson=false`,{headers:{Accept:"application/x-chess-pgn"}});if(!n.ok)throw Error(`Lichess API Error: ${n.statusText}`);return[await n.text()]}catch(e){throw console.error(e),e}}async function fo(e,t=100){try{let n=await fetch(`https://api.chess.com/pub/player/${e}/games/archives`);if(!n.ok)throw Error("Chess.com User Not Found");let r=(await n.json()).archives,o=[];for(let e=r.length-1;e>=0&&!(o.length>=t);e--){let n=r[e],u=await fetch(n);for(let e of(await u.json()).games.reverse()){if(o.length>=t)break;e.pgn&&o.push(e.pgn)}}return o}catch(e){throw console.error(e),e}}function fu(){let{navigateBack:e,navigateForward:t,resetBoard:n,clearStudy:r,importPGN:o,exportPGN:u,analyzeGames:i}=n4(),a=(0,fn.useRef)(null),[s,l]=(0,fn.useState)(!1),c=()=>{let e=window.prompt("Paste PGN here:");e&&o(e)},d=()=>{a.current?.click()},f=e=>{let t=e.target.files?.[0];if(!t)return;let n=new FileReader;n.onload=e=>{let t=e.target?.result;t&&o(t)},n.readAsText(t),e.target.value=""},h=()=>{let e=u();navigator.clipboard.writeText(e).then(()=>{alert("PGN copied to clipboard!")}).catch(()=>{alert("PGN:\n"+e)})},p=()=>{let e=new Blob([u()],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`chess-study-${Date.now()}.pgn`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)},g=async()=>{let e=window.prompt("Enter platform (lichess or chess.com):","lichess");if(!e)return;let t=window.prompt("Enter username:");if(t){l(!0);try{let n=[];if("lichess"===e.toLowerCase())n=await fr(t,100);else if("chess.com"===e.toLowerCase())n=await fo(t,100);else{alert("Unknown platform"),l(!1);return}0===n.length?alert("No games found"):window.confirm("This will clear current study. Continue?")&&(r(),i(n),alert(`Analyzed ${n.length} games!`))}catch(e){alert("Error fetching games: "+e.message)}finally{l(!1)}}};return(0,d2.jsxs)("div",{className:ft.default.panel,children:[(0,d2.jsx)("input",{type:"file",ref:a,onChange:f,accept:".pgn",style:{display:"none"}}),(0,d2.jsxs)("div",{className:ft.default.group,children:[(0,d2.jsx)("button",{className:ft.default.button,onClick:e,title:"Back",children:(0,d2.jsx)(d6,{size:20})}),(0,d2.jsx)("button",{className:ft.default.button,onClick:t,title:"Forward",children:(0,d2.jsx)(d3,{size:20})})]}),(0,d2.jsx)("div",{className:ft.default.divider}),(0,d2.jsxs)("div",{className:ft.default.group,children:[(0,d2.jsxs)("button",{className:ft.default.button,onClick:n,title:"Reset Board (Keep Tree)",children:[(0,d2.jsx)(d5,{size:20}),(0,d2.jsx)("span",{children:"Reset"})]}),(0,d2.jsxs)("button",{className:`${ft.default.button} ${ft.default.danger}`,onClick:r,title:"Clear Entire Study",children:[(0,d2.jsx)(dV,{size:20}),(0,d2.jsx)("span",{children:"Clear"})]})]}),(0,d2.jsx)("div",{className:ft.default.divider}),(0,d2.jsx)("div",{className:ft.default.group,children:(0,d2.jsxs)("button",{className:ft.default.button,onClick:g,disabled:s,title:"Analyze Games",children:[(0,d2.jsx)(fe,{size:20}),(0,d2.jsx)("span",{children:s?"Loading...":"Analyze"})]})}),(0,d2.jsx)("div",{className:ft.default.divider}),(0,d2.jsxs)("div",{className:ft.default.group,children:[(0,d2.jsxs)("button",{className:ft.default.button,onClick:c,title:"Import from Clipboard",children:[(0,d2.jsx)(d7,{size:20}),(0,d2.jsx)("span",{children:"Paste"})]}),(0,d2.jsxs)("button",{className:ft.default.button,onClick:d,title:"Import from File",children:[(0,d2.jsx)(d9,{size:20}),(0,d2.jsx)("span",{children:"File"})]})]}),(0,d2.jsx)("div",{className:ft.default.divider}),(0,d2.jsxs)("div",{className:ft.default.group,children:[(0,d2.jsxs)("button",{className:ft.default.button,onClick:h,title:"Export to Clipboard",children:[(0,d2.jsx)(d4,{size:20}),(0,d2.jsx)("span",{children:"Copy"})]}),(0,d2.jsxs)("button",{className:ft.default.button,onClick:p,title:"Export to File",children:[(0,d2.jsx)(d8,{size:20}),(0,d2.jsx)("span",{children:"Download"})]})]})]})}var fi=e.i(20897),fa=d;function fs(){let{navigateBack:e,navigateForward:t}=n4();return(0,fa.useEffect)(()=>{let n=n=>{"ArrowLeft"===n.key?(n.preventDefault(),e()):"ArrowRight"===n.key&&(n.preventDefault(),t())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[e,t]),(0,l.jsxs)("main",{className:fi.default.main,children:[(0,l.jsx)("div",{className:fi.default.leftPanel,children:(0,l.jsx)(n8,{})}),(0,l.jsxs)("div",{className:fi.default.rightPanel,children:[(0,l.jsx)(fu,{}),(0,l.jsx)(d1,{})]})]})}e.s(["default",()=>fs],52683)}]);